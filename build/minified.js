(function(window,undefined){function isArraylike(e){var t=e.length,n=jQuery.type(e);if(jQuery.isWindow(e)){return false}if(e.nodeType===1&&t){return true}return n==="array"||n!=="function"&&(t===0||typeof t==="number"&&t>0&&t-1 in e)}function createOptions(e){var t=optionsCache[e]={};jQuery.each(e.match(core_rnotwhite)||[],function(e,n){t[n]=true});return t}function Data(){Object.defineProperty(this.cache={},0,{get:function(){return{}}});this.expando=jQuery.expando+Math.random()}function dataAttr(e,t,n){var r;if(n===undefined&&e.nodeType===1){r="data-"+t.replace(rmultiDash,"-$1").toLowerCase();n=e.getAttribute(r);if(typeof n==="string"){try{n=n==="true"?true:n==="false"?false:n==="null"?null:+n+""===n?+n:rbrace.test(n)?JSON.parse(n):n}catch(i){}data_user.set(e,t,n)}else{n=undefined}}return n}function returnTrue(){return true}function returnFalse(){return false}function safeActiveElement(){try{return document.activeElement}catch(e){}}function sibling(e,t){while((e=e[t])&&e.nodeType!==1){}return e}function winnow(e,t,n){if(jQuery.isFunction(t)){return jQuery.grep(e,function(e,r){return!!t.call(e,r,e)!==n})}if(t.nodeType){return jQuery.grep(e,function(e){return e===t!==n})}if(typeof t==="string"){if(isSimple.test(t)){return jQuery.filter(t,e,n)}t=jQuery.filter(t,e)}return jQuery.grep(e,function(e){return core_indexOf.call(t,e)>=0!==n})}function manipulationTarget(e,t){return jQuery.nodeName(e,"table")&&jQuery.nodeName(t.nodeType===1?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function disableScript(e){e.type=(e.getAttribute("type")!==null)+"/"+e.type;return e}function restoreScript(e){var t=rscriptTypeMasked.exec(e.type);if(t){e.type=t[1]}else{e.removeAttribute("type")}return e}function setGlobalEval(e,t){var n=e.length,r=0;for(;r<n;r++){data_priv.set(e[r],"globalEval",!t||data_priv.get(t[r],"globalEval"))}}function cloneCopyEvent(e,t){var n,r,i,s,o,u,a,f;if(t.nodeType!==1){return}if(data_priv.hasData(e)){s=data_priv.access(e);o=data_priv.set(t,s);f=s.events;if(f){delete o.handle;o.events={};for(i in f){for(n=0,r=f[i].length;n<r;n++){jQuery.event.add(t,i,f[i][n])}}}}if(data_user.hasData(e)){u=data_user.access(e);a=jQuery.extend({},u);data_user.set(t,a)}}function getAll(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return t===undefined||t&&jQuery.nodeName(e,t)?jQuery.merge([e],n):n}function fixInput(e,t){var n=t.nodeName.toLowerCase();if(n==="input"&&manipulation_rcheckableType.test(e.type)){t.checked=e.checked}else if(n==="input"||n==="textarea"){t.defaultValue=e.defaultValue}}function vendorPropName(e,t){if(t in e){return t}var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=cssPrefixes.length;while(i--){t=cssPrefixes[i]+n;if(t in e){return t}}return r}function isHidden(e,t){e=t||e;return jQuery.css(e,"display")==="none"||!jQuery.contains(e.ownerDocument,e)}function getStyles(e){return window.getComputedStyle(e,null)}function showHide(e,t){var n,r,i,s=[],o=0,u=e.length;for(;o<u;o++){r=e[o];if(!r.style){continue}s[o]=data_priv.get(r,"olddisplay");n=r.style.display;if(t){if(!s[o]&&n==="none"){r.style.display=""}if(r.style.display===""&&isHidden(r)){s[o]=data_priv.access(r,"olddisplay",css_defaultDisplay(r.nodeName))}}else{if(!s[o]){i=isHidden(r);if(n&&n!=="none"||!i){data_priv.set(r,"olddisplay",i?n:jQuery.css(r,"display"))}}}}for(o=0;o<u;o++){r=e[o];if(!r.style){continue}if(!t||r.style.display==="none"||r.style.display===""){r.style.display=t?s[o]||"":"none"}}return e}function setPositiveNumber(e,t,n){var r=rnumsplit.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function augmentWidthOrHeight(e,t,n,r,i){var s=n===(r?"border":"content")?4:t==="width"?1:0,o=0;for(;s<4;s+=2){if(n==="margin"){o+=jQuery.css(e,n+cssExpand[s],true,i)}if(r){if(n==="content"){o-=jQuery.css(e,"padding"+cssExpand[s],true,i)}if(n!=="margin"){o-=jQuery.css(e,"border"+cssExpand[s]+"Width",true,i)}}else{o+=jQuery.css(e,"padding"+cssExpand[s],true,i);if(n!=="padding"){o+=jQuery.css(e,"border"+cssExpand[s]+"Width",true,i)}}}return o}function getWidthOrHeight(e,t,n){var r=true,i=t==="width"?e.offsetWidth:e.offsetHeight,s=getStyles(e),o=jQuery.support.boxSizing&&jQuery.css(e,"boxSizing",false,s)==="border-box";if(i<=0||i==null){i=curCSS(e,t,s);if(i<0||i==null){i=e.style[t]}if(rnumnonpx.test(i)){return i}r=o&&(jQuery.support.boxSizingReliable||i===e.style[t]);i=parseFloat(i)||0}return i+augmentWidthOrHeight(e,t,n||(o?"border":"content"),r,s)+"px"}function css_defaultDisplay(e){var t=document,n=elemdisplay[e];if(!n){n=actualDisplay(e,t);if(n==="none"||!n){iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement);t=(iframe[0].contentWindow||iframe[0].contentDocument).document;t.write("<!doctype html><html><body>");t.close();n=actualDisplay(e,t);iframe.detach()}elemdisplay[e]=n}return n}function actualDisplay(e,t){var n=jQuery(t.createElement(e)).appendTo(t.body),r=jQuery.css(n[0],"display");n.remove();return r}function buildParams(e,t,n,r){var i;if(jQuery.isArray(t)){jQuery.each(t,function(t,i){if(n||rbracket.test(e)){r(e,i)}else{buildParams(e+"["+(typeof i==="object"?t:"")+"]",i,n,r)}})}else if(!n&&jQuery.type(t)==="object"){for(i in t){buildParams(e+"["+i+"]",t[i],n,r)}}else{r(e,t)}}function addToPrefiltersOrTransports(e){return function(t,n){if(typeof t!=="string"){n=t;t="*"}var r,i=0,s=t.toLowerCase().match(core_rnotwhite)||[];if(jQuery.isFunction(n)){while(r=s[i++]){if(r[0]==="+"){r=r.slice(1)||"*";(e[r]=e[r]||[]).unshift(n)}else{(e[r]=e[r]||[]).push(n)}}}}}function inspectPrefiltersOrTransports(e,t,n,r){function o(u){var a;i[u]=true;jQuery.each(e[u]||[],function(e,u){var f=u(t,n,r);if(typeof f==="string"&&!s&&!i[f]){t.dataTypes.unshift(f);o(f);return false}else if(s){return!(a=f)}});return a}var i={},s=e===transports;return o(t.dataTypes[0])||!i["*"]&&o("*")}function ajaxExtend(e,t){var n,r,i=jQuery.ajaxSettings.flatOptions||{};for(n in t){if(t[n]!==undefined){(i[n]?e:r||(r={}))[n]=t[n]}}if(r){jQuery.extend(true,e,r)}return e}function ajaxHandleResponses(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while(a[0]==="*"){a.shift();if(r===undefined){r=e.mimeType||t.getResponseHeader("Content-Type")}}if(r){for(i in u){if(u[i]&&u[i].test(r)){a.unshift(i);break}}}if(a[0]in n){s=a[0]}else{for(i in n){if(!a[0]||e.converters[i+" "+a[0]]){s=i;break}if(!o){o=i}}s=s||o}if(s){if(s!==a[0]){a.unshift(s)}return n[s]}}function ajaxConvert(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1]){for(o in e.converters){f[o.toLowerCase()]=e.converters[o]}}s=l.shift();while(s){if(e.responseFields[s]){n[e.responseFields[s]]=t}if(!a&&r&&e.dataFilter){t=e.dataFilter(t,e.dataType)}a=s;s=l.shift();if(s){if(s==="*"){s=a}else if(a!=="*"&&a!==s){o=f[a+" "+s]||f["* "+s];if(!o){for(i in f){u=i.split(" ");if(u[1]===s){o=f[a+" "+u[0]]||f["* "+u[0]];if(o){if(o===true){o=f[i]}else if(f[i]!==true){s=u[0];l.unshift(u[1])}break}}}}if(o!==true){if(o&&e["throws"]){t=o(t)}else{try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}}}}}return{state:"success",data:t}}function createFxNow(){setTimeout(function(){fxNow=undefined});return fxNow=jQuery.now()}function createTween(e,t,n){var r,i=(tweeners[t]||[]).concat(tweeners["*"]),s=0,o=i.length;for(;s<o;s++){if(r=i[s].call(n,t,e)){return r}}}function Animation(e,t,n){var r,i,s=0,o=animationPrefilters.length,u=jQuery.Deferred().always(function(){delete a.elem}),a=function(){if(i){return false}var t=fxNow||createFxNow(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;o<a;o++){f.tweens[o].run(s)}u.notifyWith(e,[f,s,n]);if(s<1&&a){return n}else{u.resolveWith(e,[f]);return false}},f=u.promise({elem:e,props:jQuery.extend({},t),opts:jQuery.extend(true,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:fxNow||createFxNow(),duration:n.duration,tweens:[],createTween:function(t,n){var r=jQuery.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);f.tweens.push(r);return r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i){return this}i=true;for(;n<r;n++){f.tweens[n].run(1)}if(t){u.resolveWith(e,[f,t])}else{u.rejectWith(e,[f,t])}return this}}),l=f.props;propFilter(l,f.opts.specialEasing);for(;s<o;s++){r=animationPrefilters[s].call(f,e,l,f.opts);if(r){return r}}jQuery.map(l,createTween,f);if(jQuery.isFunction(f.opts.start)){f.opts.start.call(e,f)}jQuery.fx.timer(jQuery.extend(a,{elem:e,anim:f,queue:f.opts.queue}));return f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function propFilter(e,t){var n,r,i,s,o;for(n in e){r=jQuery.camelCase(n);i=t[r];s=e[n];if(jQuery.isArray(s)){i=s[1];s=e[n]=s[0]}if(n!==r){e[r]=s;delete e[n]}o=jQuery.cssHooks[r];if(o&&"expand"in o){s=o.expand(s);delete e[r];for(n in s){if(!(n in e)){e[n]=s[n];t[n]=i}}}else{t[r]=i}}}function defaultPrefilter(e,t,n){var r,i,s,o,u,a,f=this,l={},c=e.style,h=e.nodeType&&isHidden(e),p=data_priv.get(e,"fxshow");if(!n.queue){u=jQuery._queueHooks(e,"fx");if(u.unqueued==null){u.unqueued=0;a=u.empty.fire;u.empty.fire=function(){if(!u.unqueued){a()}}}u.unqueued++;f.always(function(){f.always(function(){u.unqueued--;if(!jQuery.queue(e,"fx").length){u.empty.fire()}})})}if(e.nodeType===1&&("height"in t||"width"in t)){n.overflow=[c.overflow,c.overflowX,c.overflowY];if(jQuery.css(e,"display")==="inline"&&jQuery.css(e,"float")==="none"){c.display="inline-block"}}if(n.overflow){c.overflow="hidden";f.always(function(){c.overflow=n.overflow[0];c.overflowX=n.overflow[1];c.overflowY=n.overflow[2]})}for(r in t){i=t[r];if(rfxtypes.exec(i)){delete t[r];s=s||i==="toggle";if(i===(h?"hide":"show")){if(i==="show"&&p&&p[r]!==undefined){h=true}else{continue}}l[r]=p&&p[r]||jQuery.style(e,r)}}if(!jQuery.isEmptyObject(l)){if(p){if("hidden"in p){h=p.hidden}}else{p=data_priv.access(e,"fxshow",{})}if(s){p.hidden=!h}if(h){jQuery(e).show()}else{f.done(function(){jQuery(e).hide()})}f.done(function(){var t;data_priv.remove(e,"fxshow");for(t in l){jQuery.style(e,t,l[t])}});for(r in l){o=createTween(h?p[r]:0,r,f);if(!(r in p)){p[r]=o.start;if(h){o.end=o.start;o.start=r==="width"||r==="height"?1:0}}}}}function Tween(e,t,n,r,i){return new Tween.prototype.init(e,t,n,r,i)}function genFx(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t){n=cssExpand[i];r["margin"+n]=r["padding"+n]=e}if(t){r.opacity=r.width=e}return r}function getWindow(e){return jQuery.isWindow(e)?e:e.nodeType===9&&e.defaultView}var rootjQuery,readyList,core_strundefined=typeof undefined,location=window.location,document=window.document,docElem=document.documentElement,_jQuery=window.jQuery,_$=window.$,class2type={},core_deletedIds=[],core_version="2.0.3",core_concat=core_deletedIds.concat,core_push=core_deletedIds.push,core_slice=core_deletedIds.slice,core_indexOf=core_deletedIds.indexOf,core_toString=class2type.toString,core_hasOwn=class2type.hasOwnProperty,core_trim=core_version.trim,jQuery=function(e,t){return new jQuery.fn.init(e,t,rootjQuery)},core_pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,core_rnotwhite=/\S+/g,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(e,t){return t.toUpperCase()},completed=function(){document.removeEventListener("DOMContentLoaded",completed,false);window.removeEventListener("load",completed,false);jQuery.ready()};jQuery.fn=jQuery.prototype={jquery:core_version,constructor:jQuery,init:function(e,t,n){var r,i;if(!e){return this}if(typeof e==="string"){if(e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3){r=[null,e,null]}else{r=rquickExpr.exec(e)}if(r&&(r[1]||!t)){if(r[1]){t=t instanceof jQuery?t[0]:t;jQuery.merge(this,jQuery.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:document,true));if(rsingleTag.test(r[1])&&jQuery.isPlainObject(t)){for(r in t){if(jQuery.isFunction(this[r])){this[r](t[r])}else{this.attr(r,t[r])}}}return this}else{i=document.getElementById(r[2]);if(i&&i.parentNode){this.length=1;this[0]=i}this.context=document;this.selector=e;return this}}else if(!t||t.jquery){return(t||n).find(e)}else{return this.constructor(t).find(e)}}else if(e.nodeType){this.context=this[0]=e;this.length=1;return this}else if(jQuery.isFunction(e)){return n.ready(e)}if(e.selector!==undefined){this.selector=e.selector;this.context=e.context}return jQuery.makeArray(e,this)},selector:"",length:0,toArray:function(){return core_slice.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e){var t=jQuery.merge(this.constructor(),e);t.prevObject=this;t.context=this.context;return t},each:function(e,t){return jQuery.each(this,e,t)},ready:function(e){jQuery.ready.promise().done(e);return this},slice:function(){return this.pushStack(core_slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},map:function(e){return this.pushStack(jQuery.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:core_push,sort:[].sort,splice:[].splice};jQuery.fn.init.prototype=jQuery.fn;jQuery.extend=jQuery.fn.extend=function(){var e,t,n,r,i,s,o=arguments[0]||{},u=1,a=arguments.length,f=false;if(typeof o==="boolean"){f=o;o=arguments[1]||{};u=2}if(typeof o!=="object"&&!jQuery.isFunction(o)){o={}}if(a===u){o=this;--u}for(;u<a;u++){if((e=arguments[u])!=null){for(t in e){n=o[t];r=e[t];if(o===r){continue}if(f&&r&&(jQuery.isPlainObject(r)||(i=jQuery.isArray(r)))){if(i){i=false;s=n&&jQuery.isArray(n)?n:[]}else{s=n&&jQuery.isPlainObject(n)?n:{}}o[t]=jQuery.extend(f,s,r)}else if(r!==undefined){o[t]=r}}}}return o};jQuery.extend({expando:"jQuery"+(core_version+Math.random()).replace(/\D/g,""),noConflict:function(e){if(window.$===jQuery){window.$=_$}if(e&&window.jQuery===jQuery){window.jQuery=_jQuery}return jQuery},isReady:false,readyWait:1,holdReady:function(e){if(e){jQuery.readyWait++}else{jQuery.ready(true)}},ready:function(e){if(e===true?--jQuery.readyWait:jQuery.isReady){return}jQuery.isReady=true;if(e!==true&&--jQuery.readyWait>0){return}readyList.resolveWith(document,[jQuery]);if(jQuery.fn.trigger){jQuery(document).trigger("ready").off("ready")}},isFunction:function(e){return jQuery.type(e)==="function"},isArray:Array.isArray,isWindow:function(e){return e!=null&&e===e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){if(e==null){return String(e)}return typeof e==="object"||typeof e==="function"?class2type[core_toString.call(e)]||"object":typeof e},isPlainObject:function(e){if(jQuery.type(e)!=="object"||e.nodeType||jQuery.isWindow(e)){return false}try{if(e.constructor&&!core_hasOwn.call(e.constructor.prototype,"isPrototypeOf")){return false}}catch(t){return false}return true},isEmptyObject:function(e){var t;for(t in e){return false}return true},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){if(!e||typeof e!=="string"){return null}if(typeof t==="boolean"){n=t;t=false}t=t||document;var r=rsingleTag.exec(e),i=!n&&[];if(r){return[t.createElement(r[1])]}r=jQuery.buildFragment([e],t,i);if(i){jQuery(i).remove()}return jQuery.merge([],r.childNodes)},parseJSON:JSON.parse,parseXML:function(e){var t,n;if(!e||typeof e!=="string"){return null}try{n=new DOMParser;t=n.parseFromString(e,"text/xml")}catch(r){t=undefined}if(!t||t.getElementsByTagName("parsererror").length){jQuery.error("Invalid XML: "+e)}return t},noop:function(){},globalEval:function(code){var script,indirect=eval;code=jQuery.trim(code);if(code){if(code.indexOf("use strict")===1){script=document.createElement("script");script.text=code;document.head.appendChild(script).parentNode.removeChild(script)}else{indirect(code)}}},camelCase:function(e){return e.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=isArraylike(e);if(n){if(o){for(;i<s;i++){r=t.apply(e[i],n);if(r===false){break}}}else{for(i in e){r=t.apply(e[i],n);if(r===false){break}}}}else{if(o){for(;i<s;i++){r=t.call(e[i],i,e[i]);if(r===false){break}}}else{for(i in e){r=t.call(e[i],i,e[i]);if(r===false){break}}}}return e},trim:function(e){return e==null?"":core_trim.call(e)},makeArray:function(e,t){var n=t||[];if(e!=null){if(isArraylike(Object(e))){jQuery.merge(n,typeof e==="string"?[e]:e)}else{core_push.call(n,e)}}return n},inArray:function(e,t,n){return t==null?-1:core_indexOf.call(t,e,n)},merge:function(e,t){var n=t.length,r=e.length,i=0;if(typeof n==="number"){for(;i<n;i++){e[r++]=t[i]}}else{while(t[i]!==undefined){e[r++]=t[i++]}}e.length=r;return e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++){r=!!t(e[s],s);if(n!==r){i.push(e[s])}}return i},map:function(e,t,n){var r,i=0,s=e.length,o=isArraylike(e),u=[];if(o){for(;i<s;i++){r=t(e[i],i,n);if(r!=null){u[u.length]=r}}}else{for(i in e){r=t(e[i],i,n);if(r!=null){u[u.length]=r}}}return core_concat.apply([],u)},guid:1,proxy:function(e,t){var n,r,i;if(typeof t==="string"){n=e[t];t=e;e=n}if(!jQuery.isFunction(e)){return undefined}r=core_slice.call(arguments,2);i=function(){return e.apply(t||this,r.concat(core_slice.call(arguments)))};i.guid=e.guid=e.guid||jQuery.guid++;return i},access:function(e,t,n,r,i,s,o){var u=0,a=e.length,f=n==null;if(jQuery.type(n)==="object"){i=true;for(u in n){jQuery.access(e,t,u,n[u],true,s,o)}}else if(r!==undefined){i=true;if(!jQuery.isFunction(r)){o=true}if(f){if(o){t.call(e,r);t=null}else{f=t;t=function(e,t,n){return f.call(jQuery(e),n)}}}if(t){for(;u<a;u++){t(e[u],n,o?r:r.call(e[u],u,t(e[u],n)))}}}return i?e:f?t.call(e):a?t(e[0],n):s},now:Date.now,swap:function(e,t,n,r){var i,s,o={};for(s in t){o[s]=e.style[s];e.style[s]=t[s]}i=n.apply(e,r||[]);for(s in t){e.style[s]=o[s]}return i}});jQuery.ready.promise=function(e){if(!readyList){readyList=jQuery.Deferred();if(document.readyState==="complete"){setTimeout(jQuery.ready)}else{document.addEventListener("DOMContentLoaded",completed,false);window.addEventListener("load",completed,false)}}return readyList.promise(e)};jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){class2type["[object "+t+"]"]=t.toLowerCase()});rootjQuery=jQuery(document);(function(e,t){function st(e,t,n,i){var s,o,u,a,f,l,p,m,g,E;if((t?t.ownerDocument||t:w)!==h){c(t)}t=t||h;n=n||[];if(!e||typeof e!=="string"){return n}if((a=t.nodeType)!==1&&a!==9){return[]}if(d&&!i){if(s=Y.exec(e)){if(u=s[1]){if(a===9){o=t.getElementById(u);if(o&&o.parentNode){if(o.id===u){n.push(o);return n}}else{return n}}else{if(t.ownerDocument&&(o=t.ownerDocument.getElementById(u))&&y(t,o)&&o.id===u){n.push(o);return n}}}else if(s[2]){P.apply(n,t.getElementsByTagName(e));return n}else if((u=s[3])&&r.getElementsByClassName&&t.getElementsByClassName){P.apply(n,t.getElementsByClassName(u));return n}}if(r.qsa&&(!v||!v.test(e))){m=p=b;g=t;E=a===9&&e;if(a===1&&t.nodeName.toLowerCase()!=="object"){l=vt(e);if(p=t.getAttribute("id")){m=p.replace(tt,"\\$&")}else{t.setAttribute("id",m)}m="[id='"+m+"'] ";f=l.length;while(f--){l[f]=m+mt(l[f])}g=V.test(e)&&t.parentNode||t;E=l.join(",")}if(E){try{P.apply(n,g.querySelectorAll(E));return n}catch(S){}finally{if(!p){t.removeAttribute("id")}}}}}return Tt(e.replace(z,"$1"),t,n,i)}function ot(){function t(n,r){if(e.push(n+=" ")>s.cacheLength){delete t[e.shift()]}return t[n]=r}var e=[];return t}function ut(e){e[b]=true;return e}function at(e){var t=h.createElement("div");try{return!!e(t)}catch(n){return false}finally{if(t.parentNode){t.parentNode.removeChild(t)}t=null}}function ft(e,t){var n=e.split("|"),r=e.length;while(r--){s.attrHandle[n[r]]=t}}function lt(e,t){var n=t&&e,r=n&&e.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||A)-(~e.sourceIndex||A);if(r){return r}if(n){while(n=n.nextSibling){if(n===t){return-1}}}return e?1:-1}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function pt(e){return ut(function(t){t=+t;return ut(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--){if(n[i=s[o]]){n[i]=!(r[i]=n[i])}}})})}function dt(){}function vt(e,t){var n,r,i,o,u,a,f,l=T[e+" "];if(l){return t?0:l.slice(0)}u=e;a=[];f=s.preFilter;while(u){if(!n||(r=W.exec(u))){if(r){u=u.slice(r[0].length)||u}a.push(i=[])}n=false;if(r=X.exec(u)){n=r.shift();i.push({value:n,type:r[0].replace(z," ")});u=u.slice(n.length)}for(o in s.filter){if((r=Q[o].exec(u))&&(!f[o]||(r=f[o](r)))){n=r.shift();i.push({value:n,type:o,matches:r});u=u.slice(n.length)}}if(!n){break}}return t?u.length:u?st.error(e):T(e,a).slice(0)}function mt(e){var t=0,n=e.length,r="";for(;t<n;t++){r+=e[t].value}return r}function gt(e,t,n){var r=t.dir,s=n&&r==="parentNode",o=S++;return t.first?function(t,n,i){while(t=t[r]){if(t.nodeType===1||s){return e(t,n,i)}}}:function(t,n,u){var a,f,l,c=E+" "+o;if(u){while(t=t[r]){if(t.nodeType===1||s){if(e(t,n,u)){return true}}}}else{while(t=t[r]){if(t.nodeType===1||s){l=t[b]||(t[b]={});if((f=l[r])&&f[0]===c){if((a=f[1])===true||a===i){return a===true}}else{f=l[r]=[c];f[1]=e(t,n,u)||i;if(f[1]===true){return true}}}}}}}function yt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--){if(!e[i](t,n,r)){return false}}return true}:e[0]}function bt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++){if(s=e[u]){if(!n||n(s,r,i)){o.push(s);if(f){t.push(u)}}}}return o}function wt(e,t,n,r,i,s){if(r&&!r[b]){r=wt(r)}if(i&&!i[b]){i=wt(i,s)}return ut(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||xt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?bt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;if(n){n(m,g,u,a)}if(r){f=bt(g,p);r(f,[],u,a);l=f.length;while(l--){if(c=f[l]){g[p[l]]=!(m[p[l]]=c)}}}if(s){if(i||e){if(i){f=[];l=g.length;while(l--){if(c=g[l]){f.push(m[l]=c)}}i(null,g=[],f,a)}l=g.length;while(l--){if((c=g[l])&&(f=i?B.call(s,c):h[l])>-1){s[f]=!(o[f]=c)}}}}else{g=bt(g===o?g.splice(d,g.length):g);if(i){i(null,o,g,a)}else{P.apply(o,g)}}})}function Et(e){var t,n,r,i=e.length,o=s.relative[e[0].type],u=o||s.relative[" "],a=o?1:0,l=gt(function(e){return e===t},u,true),c=gt(function(e){return B.call(t,e)>-1},u,true),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;a<i;a++){if(n=s.relative[e[a].type]){h=[gt(yt(h),n)]}else{n=s.filter[e[a].type].apply(null,e[a].matches);if(n[b]){r=++a;for(;r<i;r++){if(s.relative[e[r].type]){break}}return wt(a>1&&yt(h),a>1&&mt(e.slice(0,a-1).concat({value:e[a-2].type===" "?"*":""})).replace(z,"$1"),n,a<r&&Et(e.slice(a,r)),r<i&&Et(e=e.slice(r)),r<i&&mt(e))}h.push(n)}}return yt(h)}function St(e,t){var n=0,r=t.length>0,o=e.length>0,u=function(u,a,l,c,p){var d,v,m,g=[],y=0,b="0",w=u&&[],S=p!=null,x=f,T=u||o&&s.find["TAG"]("*",p&&a.parentNode||a),N=E+=x==null?1:Math.random()||.1;if(S){f=a!==h&&a;i=n}for(;(d=T[b])!=null;b++){if(o&&d){v=0;while(m=e[v++]){if(m(d,a,l)){c.push(d);break}}if(S){E=N;i=++n}}if(r){if(d=!m&&d){y--}if(u){w.push(d)}}}y+=b;if(r&&b!==y){v=0;while(m=t[v++]){m(w,g,a,l)}if(u){if(y>0){while(b--){if(!(w[b]||g[b])){g[b]=_.call(c)}}}g=bt(g)}P.apply(c,g);if(S&&!u&&g.length>0&&y+t.length>1){st.uniqueSort(c)}}if(S){E=N;f=x}return w};return r?ut(u):u}function xt(e,t,n){var r=0,i=t.length;for(;r<i;r++){st(e,t[r],n)}return n}function Tt(e,t,n,i){var o,u,f,l,c,h=vt(e);if(!i){if(h.length===1){u=h[0]=h[0].slice(0);if(u.length>2&&(f=u[0]).type==="ID"&&r.getById&&t.nodeType===9&&d&&s.relative[u[1].type]){t=(s.find["ID"](f.matches[0].replace(nt,rt),t)||[])[0];if(!t){return n}e=e.slice(u.shift().value.length)}o=Q["needsContext"].test(e)?0:u.length;while(o--){f=u[o];if(s.relative[l=f.type]){break}if(c=s.find[l]){if(i=c(f.matches[0].replace(nt,rt),V.test(u[0].type)&&t.parentNode||t)){u.splice(o,1);e=i.length&&mt(u);if(!e){P.apply(n,i);return n}break}}}}}a(e,h)(i,t,!d,n,V.test(e));return n}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b="sizzle"+ -(new Date),w=e.document,E=0,S=0,x=ot(),T=ot(),N=ot(),C=false,k=function(e,t){if(e===t){C=true;return 0}return 0},L=typeof t,A=1<<31,O={}.hasOwnProperty,M=[],_=M.pop,D=M.push,P=M.push,H=M.slice,B=M.indexOf||function(e){var t=0,n=this.length;for(;t<n;t++){if(this[t]===e){return t}}return-1},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",I="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",q=I.replace("w","w#"),R="\\["+F+"*("+I+")"+F+"*(?:([*^$|!~]?=)"+F+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+q+")|)|)"+F+"*\\]",U=":("+I+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+R.replace(3,8)+")*)|.*)\\)|)",z=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),W=new RegExp("^"+F+"*,"+F+"*"),X=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),V=new RegExp(F+"*[+~]"),$=new RegExp("="+F+"*([^\\]'\"]*)"+F+"*\\]","g"),J=new RegExp(U),K=new RegExp("^"+q+"$"),Q={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I.replace("w","w*")+")"),ATTR:new RegExp("^"+R),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+j+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},G=/^[^{]+\{\s*\[native \w/,Y=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/^(?:input|select|textarea|button)$/i,et=/^h\d$/i,tt=/'|\\/g,nt=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),rt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)};try{P.apply(M=H.call(w.childNodes),w.childNodes);M[w.childNodes.length].nodeType}catch(it){P={apply:M.length?function(e,t){D.apply(e,H.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]){}e.length=n-1}}}u=st.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":false};r=st.support={};c=st.setDocument=function(e){var t=e?e.ownerDocument||e:w,n=t.defaultView;if(t===h||t.nodeType!==9||!t.documentElement){return h}h=t;p=t.documentElement;d=!u(t);if(n&&n.attachEvent&&n!==n.top){n.attachEvent("onbeforeunload",function(){c()})}r.attributes=at(function(e){e.className="i";return!e.getAttribute("className")});r.getElementsByTagName=at(function(e){e.appendChild(t.createComment(""));return!e.getElementsByTagName("*").length});r.getElementsByClassName=at(function(e){e.innerHTML="<div class='a'></div><div class='a i'></div>";e.firstChild.className="i";return e.getElementsByClassName("i").length===2});r.getById=at(function(e){p.appendChild(e).id=b;return!t.getElementsByName||!t.getElementsByName(b).length});if(r.getById){s.find["ID"]=function(e,t){if(typeof t.getElementById!==L&&d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}};s.filter["ID"]=function(e){var t=e.replace(nt,rt);return function(e){return e.getAttribute("id")===t}}}else{delete s.find["ID"];s.filter["ID"]=function(e){var t=e.replace(nt,rt);return function(e){var n=typeof e.getAttributeNode!==L&&e.getAttributeNode("id");return n&&n.value===t}}}s.find["TAG"]=r.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==L){return t.getElementsByTagName(e)}}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(e==="*"){while(n=s[i++]){if(n.nodeType===1){r.push(n)}}return r}return s};s.find["CLASS"]=r.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!==L&&d){return t.getElementsByClassName(e)}};m=[];v=[];if(r.qsa=G.test(t.querySelectorAll)){at(function(e){e.innerHTML="<select><option selected=''></option></select>";if(!e.querySelectorAll("[selected]").length){v.push("\\["+F+"*(?:value|"+j+")")}if(!e.querySelectorAll(":checked").length){v.push(":checked")}});at(function(e){var n=t.createElement("input");n.setAttribute("type","hidden");e.appendChild(n).setAttribute("t","");if(e.querySelectorAll("[t^='']").length){v.push("[*^$]="+F+"*(?:''|\"\")")}if(!e.querySelectorAll(":enabled").length){v.push(":enabled",":disabled")}e.querySelectorAll("*,:x");v.push(",.*:")})}if(r.matchesSelector=G.test(g=p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector)){at(function(e){r.disconnectedMatch=g.call(e,"div");g.call(e,"[s!='']:x");m.push("!=",U)})}v=v.length&&new RegExp(v.join("|"));m=m.length&&new RegExp(m.join("|"));y=G.test(p.contains)||p.compareDocumentPosition?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&r.nodeType===1&&(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16))}:function(e,t){if(t){while(t=t.parentNode){if(t===e){return true}}}return false};k=p.compareDocumentPosition?function(e,n){if(e===n){C=true;return 0}var i=n.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(n);if(i){if(i&1||!r.sortDetached&&n.compareDocumentPosition(e)===i){if(e===t||y(w,e)){return-1}if(n===t||y(w,n)){return 1}return l?B.call(l,e)-B.call(l,n):0}return i&4?-1:1}return e.compareDocumentPosition?-1:1}:function(e,n){var r,i=0,s=e.parentNode,o=n.parentNode,u=[e],a=[n];if(e===n){C=true;return 0}else if(!s||!o){return e===t?-1:n===t?1:s?-1:o?1:l?B.call(l,e)-B.call(l,n):0}else if(s===o){return lt(e,n)}r=e;while(r=r.parentNode){u.unshift(r)}r=n;while(r=r.parentNode){a.unshift(r)}while(u[i]===a[i]){i++}return i?lt(u[i],a[i]):u[i]===w?-1:a[i]===w?1:0};return t};st.matches=function(e,t){return st(e,null,null,t)};st.matchesSelector=function(e,t){if((e.ownerDocument||e)!==h){c(e)}t=t.replace($,"='$1']");if(r.matchesSelector&&d&&(!m||!m.test(t))&&(!v||!v.test(t))){try{var n=g.call(e,t);if(n||r.disconnectedMatch||e.document&&e.document.nodeType!==11){return n}}catch(i){}}return st(t,h,null,[e]).length>0};st.contains=function(e,t){if((e.ownerDocument||e)!==h){c(e)}return y(e,t)};st.attr=function(e,n){if((e.ownerDocument||e)!==h){c(e)}var i=s.attrHandle[n.toLowerCase()],o=i&&O.call(s.attrHandle,n.toLowerCase())?i(e,n,!d):t;return o===t?r.attributes||!d?e.getAttribute(n):(o=e.getAttributeNode(n))&&o.specified?o.value:null:o};st.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};st.uniqueSort=function(e){var t,n=[],i=0,s=0;C=!r.detectDuplicates;l=!r.sortStable&&e.slice(0);e.sort(k);if(C){while(t=e[s++]){if(t===e[s]){i=n.push(s)}}while(i--){e.splice(n[i],1)}}return e};o=st.getText=function(e){var t,n="",r=0,i=e.nodeType;if(!i){for(;t=e[r];r++){n+=o(t)}}else if(i===1||i===9||i===11){if(typeof e.textContent==="string"){return e.textContent}else{for(e=e.firstChild;e;e=e.nextSibling){n+=o(e)}}}else if(i===3||i===4){return e.nodeValue}return n};s=st.selectors={cacheLength:50,createPseudo:ut,match:Q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(nt,rt);e[3]=(e[4]||e[5]||"").replace(nt,rt);if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1].slice(0,3)==="nth"){if(!e[3]){st.error(e[0])}e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd"));e[5]=+(e[7]+e[8]||e[3]==="odd")}else if(e[3]){st.error(e[0])}return e},PSEUDO:function(e){var n,r=!e[5]&&e[2];if(Q["CHILD"].test(e[0])){return null}if(e[3]&&e[4]!==t){e[2]=e[4]}else if(r&&J.test(r)&&(n=vt(r,true))&&(n=r.indexOf(")",r.length-n)-r.length)){e[0]=e[0].slice(0,n);e[2]=r.slice(0,n)}return e.slice(0,3)}},filter:{TAG:function(e){var t=e.replace(nt,rt).toLowerCase();return e==="*"?function(){return true}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=x[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&x(e,function(e){return t.test(typeof e.className==="string"&&e.className||typeof e.getAttribute!==L&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=st.attr(r,e);if(i==null){return t==="!="}if(!t){return true}i+="";return t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":false}},CHILD:function(e,t,n,r,i){var s=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v]){if(u?c.nodeName.toLowerCase()===g:c.nodeType===1){return false}}d=v=e==="only"&&!d&&"nextSibling"}return true}d=[o?m.firstChild:m.lastChild];if(o&&y){l=m[b]||(m[b]={});f=l[e]||[];p=f[0]===E&&f[1];h=f[0]===E&&f[2];c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop()){if(c.nodeType===1&&++h&&c===t){l[e]=[E,p,h];break}}}else if(y&&(f=(t[b]||(t[b]={}))[e])&&f[0]===E){h=f[1]}else{while(c=++p&&c&&c[v]||(h=p=0)||d.pop()){if((u?c.nodeName.toLowerCase()===g:c.nodeType===1)&&++h){if(y){(c[b]||(c[b]={}))[e]=[E,h]}if(c===t){break}}}}h-=i;return h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,r=s.pseudos[e]||s.setFilters[e.toLowerCase()]||st.error("unsupported pseudo: "+e);if(r[b]){return r(t)}if(r.length>1){n=[e,e,"",t];return s.setFilters.hasOwnProperty(e.toLowerCase())?ut(function(e,n){var i,s=r(e,t),o=s.length;while(o--){i=B.call(e,s[o]);e[i]=!(n[i]=s[o])}}):function(e){return r(e,0,n)}}return r}},pseudos:{not:ut(function(e){var t=[],n=[],r=a(e.replace(z,"$1"));return r[b]?ut(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--){if(s=o[u]){e[u]=!(t[u]=s)}}}):function(e,i,s){t[0]=e;r(t,null,s,n);return!n.pop()}}),has:ut(function(e){return function(t){return st(e,t).length>0}}),contains:ut(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:ut(function(e){if(!K.test(e||"")){st.error("unsupported lang: "+e)}e=e.replace(nt,rt).toLowerCase();return function(t){var n;do{if(n=d?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang")){n=n.toLowerCase();return n===e||n.indexOf(e+"-")===0}}while((t=t.parentNode)&&t.nodeType===1);return false}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===false},disabled:function(e){return e.disabled===true},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling){if(e.nodeName>"@"||e.nodeType===3||e.nodeType===4){return false}}return true},parent:function(e){return!s.pseudos["empty"](e)},header:function(e){return et.test(e.nodeName)},input:function(e){return Z.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()===e.type)},first:pt(function(){return[0]}),last:pt(function(e,t){return[t-1]}),eq:pt(function(e,t,n){return[n<0?n+t:n]}),even:pt(function(e,t){var n=0;for(;n<t;n+=2){e.push(n)}return e}),odd:pt(function(e,t){var n=1;for(;n<t;n+=2){e.push(n)}return e}),lt:pt(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;){e.push(r)}return e}),gt:pt(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;){e.push(r)}return e})}};s.pseudos["nth"]=s.pseudos["eq"];for(n in{radio:true,checkbox:true,file:true,password:true,image:true}){s.pseudos[n]=ct(n)}for(n in{submit:true,reset:true}){s.pseudos[n]=ht(n)}dt.prototype=s.filters=s.pseudos;s.setFilters=new dt;a=st.compile=function(e,t){var n,r=[],i=[],s=N[e+" "];if(!s){if(!t){t=vt(e)}n=t.length;while(n--){s=Et(t[n]);if(s[b]){r.push(s)}else{i.push(s)}}s=N(e,St(i,r))}return s};r.sortStable=b.split("").sort(k).join("")===b;r.detectDuplicates=C;c();r.sortDetached=at(function(e){return e.compareDocumentPosition(h.createElement("div"))&1});if(!at(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild.getAttribute("href")==="#"})){ft("type|href|height|width",function(e,t,n){if(!n){return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}})}if(!r.attributes||!at(function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return e.firstChild.getAttribute("value")===""})){ft("value",function(e,t,n){if(!n&&e.nodeName.toLowerCase()==="input"){return e.defaultValue}})}if(!at(function(e){return e.getAttribute("disabled")==null})){ft(j,function(e,t,n){var r;if(!n){return(r=e.getAttributeNode(t))&&r.specified?r.value:e[t]===true?t.toLowerCase():null}})}jQuery.find=st;jQuery.expr=st.selectors;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.unique=st.uniqueSort;jQuery.text=st.getText;jQuery.isXMLDoc=st.isXML;jQuery.contains=st.contains})(window);var optionsCache={};jQuery.Callbacks=function(e){e=typeof e==="string"?optionsCache[e]||createOptions(e):jQuery.extend({},e);var t,n,r,i,s,o,u=[],a=!e.once&&[],f=function(c){t=e.memory&&c;n=true;o=i||0;i=0;s=u.length;r=true;for(;u&&o<s;o++){if(u[o].apply(c[0],c[1])===false&&e.stopOnFalse){t=false;break}}r=false;if(u){if(a){if(a.length){f(a.shift())}}else if(t){u=[]}else{l.disable()}}},l={add:function(){if(u){var n=u.length;(function o(t){jQuery.each(t,function(t,n){var r=jQuery.type(n);if(r==="function"){if(!e.unique||!l.has(n)){u.push(n)}}else if(n&&n.length&&r!=="string"){o(n)}})})(arguments);if(r){s=u.length}else if(t){i=n;f(t)}}return this},remove:function(){if(u){jQuery.each(arguments,function(e,t){var n;while((n=jQuery.inArray(t,u,n))>-1){u.splice(n,1);if(r){if(n<=s){s--}if(n<=o){o--}}}})}return this},has:function(e){return e?jQuery.inArray(e,u)>-1:!!(u&&u.length)},empty:function(){u=[];s=0;return this},disable:function(){u=a=t=undefined;return this},disabled:function(){return!u},lock:function(){a=undefined;if(!t){l.disable()}return this},locked:function(){return!a},fireWith:function(e,t){if(u&&(!n||a)){t=t||[];t=[e,t.slice?t.slice():t];if(r){a.push(t)}else{f(t)}}return this},fire:function(){l.fireWith(this,arguments);return this},fired:function(){return!!n}};return l};jQuery.extend({Deferred:function(e){var t=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){i.done(arguments).fail(arguments);return this},then:function(){var e=arguments;return jQuery.Deferred(function(n){jQuery.each(t,function(t,s){var o=s[0],u=jQuery.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);if(e&&jQuery.isFunction(e.promise)){e.promise().done(n.resolve).fail(n.reject).progress(n.notify)}else{n[o+"With"](this===r?n.promise():this,u?[e]:arguments)}})});e=null}).promise()},promise:function(e){return e!=null?jQuery.extend(e,r):r}},i={};r.pipe=r.then;jQuery.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add;if(u){o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock)}i[s[0]]=function(){i[s[0]+"With"](this===i?r:this,arguments);return this};i[s[0]+"With"]=o.fireWith});r.promise(i);if(e){e.call(i,i)}return i},when:function(e){var t=0,n=core_slice.call(arguments),r=n.length,i=r!==1||e&&jQuery.isFunction(e.promise)?r:0,s=i===1?e:jQuery.Deferred(),o=function(e,t,n){return function(r){t[e]=this;n[e]=arguments.length>1?core_slice.call(arguments):r;if(n===u){s.notifyWith(t,n)}else if(!--i){s.resolveWith(t,n)}}},u,a,f;if(r>1){u=new Array(r);a=new Array(r);f=new Array(r);for(;t<r;t++){if(n[t]&&jQuery.isFunction(n[t].promise)){n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u))}else{--i}}}if(!i){s.resolveWith(f,n)}return s.promise()}});jQuery.support=function(e){var t=document.createElement("input"),n=document.createDocumentFragment(),r=document.createElement("div"),i=document.createElement("select"),s=i.appendChild(document.createElement("option"));if(!t.type){return e}t.type="checkbox";e.checkOn=t.value!=="";e.optSelected=s.selected;e.reliableMarginRight=true;e.boxSizingReliable=true;e.pixelPosition=false;t.checked=true;e.noCloneChecked=t.cloneNode(true).checked;i.disabled=true;e.optDisabled=!s.disabled;t=document.createElement("input");t.value="t";t.type="radio";e.radioValue=t.value==="t";t.setAttribute("checked","t");t.setAttribute("name","t");n.appendChild(t);e.checkClone=n.cloneNode(true).cloneNode(true).lastChild.checked;e.focusinBubbles="onfocusin"in window;r.style.backgroundClip="content-box";r.cloneNode(true).style.backgroundClip="";e.clearCloneStyle=r.style.backgroundClip==="content-box";jQuery(function(){var t,n,i="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",s=document.getElementsByTagName("body")[0];if(!s){return}t=document.createElement("div");t.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";s.appendChild(t).appendChild(r);r.innerHTML="";r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%";jQuery.swap(s,s.style.zoom!=null?{zoom:1}:{},function(){e.boxSizing=r.offsetWidth===4});if(window.getComputedStyle){e.pixelPosition=(window.getComputedStyle(r,null)||{}).top!=="1%";e.boxSizingReliable=(window.getComputedStyle(r,null)||{width:"4px"}).width==="4px";n=r.appendChild(document.createElement("div"));n.style.cssText=r.style.cssText=i;n.style.marginRight=n.style.width="0";r.style.width="1px";e.reliableMarginRight=!parseFloat((window.getComputedStyle(n,null)||{}).marginRight)}s.removeChild(t)});return e}({});var data_user,data_priv,rbrace=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,rmultiDash=/([A-Z])/g;Data.uid=1;Data.accepts=function(e){return e.nodeType?e.nodeType===1||e.nodeType===9:true};Data.prototype={key:function(e){if(!Data.accepts(e)){return 0}var t={},n=e[this.expando];if(!n){n=Data.uid++;try{t[this.expando]={value:n};Object.defineProperties(e,t)}catch(r){t[this.expando]=n;jQuery.extend(e,t)}}if(!this.cache[n]){this.cache[n]={}}return n},set:function(e,t,n){var r,i=this.key(e),s=this.cache[i];if(typeof t==="string"){s[t]=n}else{if(jQuery.isEmptyObject(s)){jQuery.extend(this.cache[i],t)}else{for(r in t){s[r]=t[r]}}}return s},get:function(e,t){var n=this.cache[this.key(e)];return t===undefined?n:n[t]},access:function(e,t,n){var r;if(t===undefined||t&&typeof t==="string"&&n===undefined){r=this.get(e,t);return r!==undefined?r:this.get(e,jQuery.camelCase(t))}this.set(e,t,n);return n!==undefined?n:t},remove:function(e,t){var n,r,i,s=this.key(e),o=this.cache[s];if(t===undefined){this.cache[s]={}}else{if(jQuery.isArray(t)){r=t.concat(t.map(jQuery.camelCase))}else{i=jQuery.camelCase(t);if(t in o){r=[t,i]}else{r=i;r=r in o?[r]:r.match(core_rnotwhite)||[]}}n=r.length;while(n--){delete o[r[n]]}}},hasData:function(e){return!jQuery.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){if(e[this.expando]){delete this.cache[e[this.expando]]}}};data_user=new Data;data_priv=new Data;jQuery.extend({acceptData:Data.accepts,hasData:function(e){return data_user.hasData(e)||data_priv.hasData(e)},data:function(e,t,n){return data_user.access(e,t,n)},removeData:function(e,t){data_user.remove(e,t)},_data:function(e,t,n){return data_priv.access(e,t,n)},_removeData:function(e,t){data_priv.remove(e,t)}});jQuery.fn.extend({data:function(e,t){var n,r,i=this[0],s=0,o=null;if(e===undefined){if(this.length){o=data_user.get(i);if(i.nodeType===1&&!data_priv.get(i,"hasDataAttrs")){n=i.attributes;for(;s<n.length;s++){r=n[s].name;if(r.indexOf("data-")===0){r=jQuery.camelCase(r.slice(5));dataAttr(i,r,o[r])}}data_priv.set(i,"hasDataAttrs",true)}}return o}if(typeof e==="object"){return this.each(function(){data_user.set(this,e)})}return jQuery.access(this,function(t){var n,r=jQuery.camelCase(e);if(i&&t===undefined){n=data_user.get(i,e);if(n!==undefined){return n}n=data_user.get(i,r);if(n!==undefined){return n}n=dataAttr(i,r,undefined);if(n!==undefined){return n}return}this.each(function(){var n=data_user.get(this,r);data_user.set(this,r,t);if(e.indexOf("-")!==-1&&n!==undefined){data_user.set(this,e,t)}})},null,t,arguments.length>1,null,true)},removeData:function(e){return this.each(function(){data_user.remove(this,e)})}});jQuery.extend({queue:function(e,t,n){var r;if(e){t=(t||"fx")+"queue";r=data_priv.get(e,t);if(n){if(!r||jQuery.isArray(n)){r=data_priv.access(e,t,jQuery.makeArray(n))}else{r.push(n)}}return r||[]}},dequeue:function(e,t){t=t||"fx";var n=jQuery.queue(e,t),r=n.length,i=n.shift(),s=jQuery._queueHooks(e,t),o=function(){jQuery.dequeue(e,t)};if(i==="inprogress"){i=n.shift();r--}if(i){if(t==="fx"){n.unshift("inprogress")}delete s.stop;i.call(e,o,s)}if(!r&&s){s.empty.fire()}},_queueHooks:function(e,t){var n=t+"queueHooks";return data_priv.get(e,n)||data_priv.access(e,n,{empty:jQuery.Callbacks("once memory").add(function(){data_priv.remove(e,[t+"queue",n])})})}});jQuery.fn.extend({queue:function(e,t){var n=2;if(typeof e!=="string"){t=e;e="fx";n--}if(arguments.length<n){return jQuery.queue(this[0],e)}return t===undefined?this:this.each(function(){var n=jQuery.queue(this,e,t);jQuery._queueHooks(this,e);if(e==="fx"&&n[0]!=="inprogress"){jQuery.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){jQuery.dequeue(this,e)})},delay:function(e,t){e=jQuery.fx?jQuery.fx.speeds[e]||e:e;t=t||"fx";return this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=jQuery.Deferred(),s=this,o=this.length,u=function(){if(!--r){i.resolveWith(s,[s])}};if(typeof e!=="string"){t=e;e=undefined}e=e||"fx";while(o--){n=data_priv.get(s[o],e+"queueHooks");if(n&&n.empty){r++;n.empty.add(u)}}u();return i.promise(t)}});var nodeHook,boolHook,rclass=/[\t\r\n\f]/g,rreturn=/\r/g,rfocusable=/^(?:input|select|textarea|button)$/i;jQuery.fn.extend({attr:function(e,t){return jQuery.access(this,jQuery.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){jQuery.removeAttr(this,e)})},prop:function(e,t){return jQuery.access(this,jQuery.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[jQuery.propFix[e]||e]})},addClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=typeof e==="string"&&e;if(jQuery.isFunction(e)){return this.each(function(t){jQuery(this).addClass(e.call(this,t,this.className))})}if(a){t=(e||"").match(core_rnotwhite)||[];for(;o<u;o++){n=this[o];r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(rclass," "):" ");if(r){s=0;while(i=t[s++]){if(r.indexOf(" "+i+" ")<0){r+=i+" "}}n.className=jQuery.trim(r)}}}return this},removeClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=arguments.length===0||typeof e==="string"&&e;if(jQuery.isFunction(e)){return this.each(function(t){jQuery(this).removeClass(e.call(this,t,this.className))})}if(a){t=(e||"").match(core_rnotwhite)||[];for(;o<u;o++){n=this[o];r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(rclass," "):"");if(r){s=0;while(i=t[s++]){while(r.indexOf(" "+i+" ")>=0){r=r.replace(" "+i+" "," ")}}n.className=e?jQuery.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e;if(typeof t==="boolean"&&n==="string"){return t?this.addClass(e):this.removeClass(e)}if(jQuery.isFunction(e)){return this.each(function(n){jQuery(this).toggleClass(e.call(this,n,this.className,t),t)})}return this.each(function(){if(n==="string"){var t,r=0,i=jQuery(this),s=e.match(core_rnotwhite)||[];while(t=s[r++]){if(i.hasClass(t)){i.removeClass(t)}else{i.addClass(t)}}}else if(n===core_strundefined||n==="boolean"){if(this.className){data_priv.set(this,"__className__",this.className)}this.className=this.className||e===false?"":data_priv.get(this,"__className__")||""}})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++){if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(rclass," ").indexOf(t)>=0){return true}}return false},val:function(e){var t,n,r,i=this[0];if(!arguments.length){if(i){t=jQuery.valHooks[i.type]||jQuery.valHooks[i.nodeName.toLowerCase()];if(t&&"get"in t&&(n=t.get(i,"value"))!==undefined){return n}n=i.value;return typeof n==="string"?n.replace(rreturn,""):n==null?"":n}return}r=jQuery.isFunction(e);return this.each(function(n){var i;if(this.nodeType!==1){return}if(r){i=e.call(this,n,jQuery(this).val())}else{i=e}if(i==null){i=""}else if(typeof i==="number"){i+=""}else if(jQuery.isArray(i)){i=jQuery.map(i,function(e){return e==null?"":e+""})}t=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!t||!("set"in t)||t.set(this,i,"value")===undefined){this.value=i}})}});jQuery.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(jQuery.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!jQuery.nodeName(n.parentNode,"optgroup"))){t=jQuery(n).val();if(s){return t}o.push(t)}}return o},set:function(e,t){var n,r,i=e.options,s=jQuery.makeArray(t),o=i.length;while(o--){r=i[o];if(r.selected=jQuery.inArray(jQuery(r).val(),s)>=0){n=true}}if(!n){e.selectedIndex=-1}return s}}},attr:function(e,t,n){var r,i,s=e.nodeType;if(!e||s===3||s===8||s===2){return}if(typeof e.getAttribute===core_strundefined){return jQuery.prop(e,t,n)}if(s!==1||!jQuery.isXMLDoc(e)){t=t.toLowerCase();r=jQuery.attrHooks[t]||(jQuery.expr.match.bool.test(t)?boolHook:nodeHook)}if(n!==undefined){if(n===null){jQuery.removeAttr(e,t)}else if(r&&"set"in r&&(i=r.set(e,n,t))!==undefined){return i}else{e.setAttribute(t,n+"");return n}}else if(r&&"get"in r&&(i=r.get(e,t))!==null){return i}else{i=jQuery.find.attr(e,t);return i==null?undefined:i}},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(core_rnotwhite);if(s&&e.nodeType===1){while(n=s[i++]){r=jQuery.propFix[n]||n;if(jQuery.expr.match.bool.test(n)){e[r]=false}e.removeAttribute(n)}}},attrHooks:{type:{set:function(e,t){if(!jQuery.support.radioValue&&t==="radio"&&jQuery.nodeName(e,"input")){var n=e.value;e.setAttribute("type",t);if(n){e.value=n}return t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,s,o=e.nodeType;if(!e||o===3||o===8||o===2){return}s=o!==1||!jQuery.isXMLDoc(e);if(s){t=jQuery.propFix[t]||t;i=jQuery.propHooks[t]}if(n!==undefined){return i&&"set"in i&&(r=i.set(e,n,t))!==undefined?r:e[t]=n}else{return i&&"get"in i&&(r=i.get(e,t))!==null?r:e[t]}},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||rfocusable.test(e.nodeName)||e.href?e.tabIndex:-1}}}});boolHook={set:function(e,t,n){if(t===false){jQuery.removeAttr(e,n)}else{e.setAttribute(n,n)}return n}};jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(e,t){var n=jQuery.expr.attrHandle[t]||jQuery.find.attr;jQuery.expr.attrHandle[t]=function(e,t,r){var i=jQuery.expr.attrHandle[t],s=r?undefined:(jQuery.expr.attrHandle[t]=undefined)!=n(e,t,r)?t.toLowerCase():null;jQuery.expr.attrHandle[t]=i;return s}});if(!jQuery.support.optSelected){jQuery.propHooks.selected={get:function(e){var t=e.parentNode;if(t&&t.parentNode){t.parentNode.selectedIndex}return null}}}jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(e,t){if(jQuery.isArray(t)){return e.checked=jQuery.inArray(jQuery(e).val(),t)>=0}}};if(!jQuery.support.checkOn){jQuery.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value}}});var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;jQuery.event={global:{},add:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=data_priv.get(e);if(!m){return}if(n.handler){s=n;n=s.handler;i=s.selector}if(!n.guid){n.guid=jQuery.guid++}if(!(a=m.events)){a=m.events={}}if(!(o=m.handle)){o=m.handle=function(e){return typeof jQuery!==core_strundefined&&(!e||jQuery.event.triggered!==e.type)?jQuery.event.dispatch.apply(o.elem,arguments):undefined};o.elem=e}t=(t||"").match(core_rnotwhite)||[""];f=t.length;while(f--){u=rtypenamespace.exec(t[f])||[];p=v=u[1];d=(u[2]||"").split(".").sort();if(!p){continue}c=jQuery.event.special[p]||{};p=(i?c.delegateType:c.bindType)||p;c=jQuery.event.special[p]||{};l=jQuery.extend({type:p,origType:v,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&jQuery.expr.match.needsContext.test(i),namespace:d.join(".")},s);if(!(h=a[p])){h=a[p]=[];h.delegateCount=0;if(!c.setup||c.setup.call(e,r,d,o)===false){if(e.addEventListener){e.addEventListener(p,o,false)}}}if(c.add){c.add.call(e,l);if(!l.handler.guid){l.handler.guid=n.guid}}if(i){h.splice(h.delegateCount++,0,l)}else{h.push(l)}jQuery.event.global[p]=true}e=null},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=data_priv.hasData(e)&&data_priv.get(e);if(!m||!(a=m.events)){return}t=(t||"").match(core_rnotwhite)||[""];f=t.length;while(f--){u=rtypenamespace.exec(t[f])||[];p=v=u[1];d=(u[2]||"").split(".").sort();if(!p){for(p in a){jQuery.event.remove(e,p+t[f],n,r,true)}continue}c=jQuery.event.special[p]||{};p=(r?c.delegateType:c.bindType)||p;h=a[p]||[];u=u[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)");o=s=h.length;while(s--){l=h[s];if((i||v===l.origType)&&(!n||n.guid===l.guid)&&(!u||u.test(l.namespace))&&(!r||r===l.selector||r==="**"&&l.selector)){h.splice(s,1);if(l.selector){h.delegateCount--}if(c.remove){c.remove.call(e,l)}}}if(o&&!h.length){if(!c.teardown||c.teardown.call(e,d,m.handle)===false){jQuery.removeEvent(e,p,m.handle)}delete a[p]}}if(jQuery.isEmptyObject(a)){delete m.handle;data_priv.remove(e,"events")}},trigger:function(e,t,n,r){var i,s,o,u,a,f,l,c=[n||document],h=core_hasOwn.call(e,"type")?e.type:e,p=core_hasOwn.call(e,"namespace")?e.namespace.split("."):[];s=o=n=n||document;if(n.nodeType===3||n.nodeType===8){return}if(rfocusMorph.test(h+jQuery.event.triggered)){return}if(h.indexOf(".")>=0){p=h.split(".");h=p.shift();p.sort()}a=h.indexOf(":")<0&&"on"+h;e=e[jQuery.expando]?e:new jQuery.Event(h,typeof e==="object"&&e);e.isTrigger=r?2:3;e.namespace=p.join(".");e.namespace_re=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;e.result=undefined;if(!e.target){e.target=n}t=t==null?[e]:jQuery.makeArray(t,[e]);l=jQuery.event.special[h]||{};if(!r&&l.trigger&&l.trigger.apply(n,t)===false){return}if(!r&&!l.noBubble&&!jQuery.isWindow(n)){u=l.delegateType||h;if(!rfocusMorph.test(u+h)){s=s.parentNode}for(;s;s=s.parentNode){c.push(s);o=s}if(o===(n.ownerDocument||document)){c.push(o.defaultView||o.parentWindow||window)}}i=0;while((s=c[i++])&&!e.isPropagationStopped()){e.type=i>1?u:l.bindType||h;f=(data_priv.get(s,"events")||{})[e.type]&&data_priv.get(s,"handle");if(f){f.apply(s,t)}f=a&&s[a];if(f&&jQuery.acceptData(s)&&f.apply&&f.apply(s,t)===false){e.preventDefault()}}e.type=h;if(!r&&!e.isDefaultPrevented()){if((!l._default||l._default.apply(c.pop(),t)===false)&&jQuery.acceptData(n)){if(a&&jQuery.isFunction(n[h])&&!jQuery.isWindow(n)){o=n[a];if(o){n[a]=null}jQuery.event.triggered=h;n[h]();jQuery.event.triggered=undefined;if(o){n[a]=o}}}}return e.result},dispatch:function(e){e=jQuery.event.fix(e);var t,n,r,i,s,o=[],u=core_slice.call(arguments),a=(data_priv.get(this,"events")||{})[e.type]||[],f=jQuery.event.special[e.type]||{};u[0]=e;e.delegateTarget=this;if(f.preDispatch&&f.preDispatch.call(this,e)===false){return}o=jQuery.event.handlers.call(this,e,a);t=0;while((i=o[t++])&&!e.isPropagationStopped()){e.currentTarget=i.elem;n=0;while((s=i.handlers[n++])&&!e.isImmediatePropagationStopped()){if(!e.namespace_re||e.namespace_re.test(s.namespace)){e.handleObj=s;e.data=s.data;r=((jQuery.event.special[s.origType]||{}).handle||s.handler).apply(i.elem,u);if(r!==undefined){if((e.result=r)===false){e.preventDefault();e.stopPropagation()}}}}}if(f.postDispatch){f.postDispatch.call(this,e)}return e.result},handlers:function(e,t){var n,r,i,s,o=[],u=t.delegateCount,a=e.target;if(u&&a.nodeType&&(!e.button||e.type!=="click")){for(;a!==this;a=a.parentNode||this){if(a.disabled!==true||e.type!=="click"){r=[];for(n=0;n<u;n++){s=t[n];i=s.selector+" ";if(r[i]===undefined){r[i]=s.needsContext?jQuery(i,this).index(a)>=0:jQuery.find(i,this,null,[a]).length}if(r[i]){r.push(s)}}if(r.length){o.push({elem:a,handlers:r})}}}}if(u<t.length){o.push({elem:this,handlers:t.slice(u)})}return o},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){if(e.which==null){e.which=t.charCode!=null?t.charCode:t.keyCode}return e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,s=t.button;if(e.pageX==null&&t.clientX!=null){n=e.target.ownerDocument||document;r=n.documentElement;i=n.body;e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0);e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)}if(!e.which&&s!==undefined){e.which=s&1?1:s&2?3:s&4?2:0}return e}},fix:function(e){if(e[jQuery.expando]){return e}var t,n,r,i=e.type,s=e,o=this.fixHooks[i];if(!o){this.fixHooks[i]=o=rmouseEvent.test(i)?this.mouseHooks:rkeyEvent.test(i)?this.keyHooks:{}}r=o.props?this.props.concat(o.props):this.props;e=new jQuery.Event(s);t=r.length;while(t--){n=r[t];e[n]=s[n]}if(!e.target){e.target=document}if(e.target.nodeType===3){e.target=e.target.parentNode}return o.filter?o.filter(e,s):e},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus){this.focus();return false}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&jQuery.nodeName(this,"input")){this.click();return false}},_default:function(e){return jQuery.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){if(e.result!==undefined){e.originalEvent.returnValue=e.result}}}},simulate:function(e,t,n,r){var i=jQuery.extend(new jQuery.Event,n,{type:e,isSimulated:true,originalEvent:{}});if(r){jQuery.event.trigger(i,null,t)}else{jQuery.event.dispatch.call(t,i)}if(i.isDefaultPrevented()){n.preventDefault()}}};jQuery.removeEvent=function(e,t,n){if(e.removeEventListener){e.removeEventListener(t,n,false)}};jQuery.Event=function(e,t){if(!(this instanceof jQuery.Event)){return new jQuery.Event(e,t)}if(e&&e.type){this.originalEvent=e;this.type=e.type;this.isDefaultPrevented=e.defaultPrevented||e.getPreventDefault&&e.getPreventDefault()?returnTrue:returnFalse}else{this.type=e}if(t){jQuery.extend(this,t)}this.timeStamp=e&&e.timeStamp||jQuery.now();this[jQuery.expando]=true};jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue;if(e&&e.preventDefault){e.preventDefault()}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue;if(e&&e.stopPropagation){e.stopPropagation()}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue;this.stopPropagation()}};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){jQuery.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;if(!i||i!==r&&!jQuery.contains(r,i)){e.type=s.origType;n=s.handler.apply(this,arguments);e.type=t}return n}}});if(!jQuery.support.focusinBubbles){jQuery.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){jQuery.event.simulate(t,e.target,jQuery.event.fix(e),true)};jQuery.event.special[t]={setup:function(){if(n++===0){document.addEventListener(e,r,true)}},teardown:function(){if(--n===0){document.removeEventListener(e,r,true)}}}})}jQuery.fn.extend({on:function(e,t,n,r,i){var s,o;if(typeof e==="object"){if(typeof t!=="string"){n=n||t;t=undefined}for(o in e){this.on(o,t,n,e[o],i)}return this}if(n==null&&r==null){r=t;n=t=undefined}else if(r==null){if(typeof t==="string"){r=n;n=undefined}else{r=n;n=t;t=undefined}}if(r===false){r=returnFalse}else if(!r){return this}if(i===1){s=r;r=function(e){jQuery().off(e);return s.apply(this,arguments)};r.guid=s.guid||(s.guid=jQuery.guid++)}return this.each(function(){jQuery.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj){r=e.handleObj;jQuery(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler);return this}if(typeof e==="object"){for(i in e){this.off(i,t,e[i])}return this}if(t===false||typeof t==="function"){n=t;t=undefined}if(n===false){n=returnFalse}return this.each(function(){jQuery.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){jQuery.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n){return jQuery.event.trigger(e,t,n,true)}}});var isSimple=/^.[^:#\[\.,]*$/,rparentsprev=/^(?:parents|prev(?:Until|All))/,rneedsContext=jQuery.expr.match.needsContext,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if(typeof e!=="string"){return this.pushStack(jQuery(e).filter(function(){for(t=0;t<i;t++){if(jQuery.contains(r[t],this)){return true}}}))}for(t=0;t<i;t++){jQuery.find(e,r[t],n)}n=this.pushStack(i>1?jQuery.unique(n):n);n.selector=this.selector?this.selector+" "+e:e;return n},has:function(e){var t=jQuery(e,this),n=t.length;return this.filter(function(){var e=0;for(;e<n;e++){if(jQuery.contains(this,t[e])){return true}}})},not:function(e){return this.pushStack(winnow(this,e||[],true))},filter:function(e){return this.pushStack(winnow(this,e||[],false))},is:function(e){return!!winnow(this,typeof e==="string"&&rneedsContext.test(e)?jQuery(e):e||[],false).length},closest:function(e,t){var n,r=0,i=this.length,s=[],o=rneedsContext.test(e)||typeof e!=="string"?jQuery(e,t||this.context):0;for(;r<i;r++){for(n=this[r];n&&n!==t;n=n.parentNode){if(n.nodeType<11&&(o?o.index(n)>-1:n.nodeType===1&&jQuery.find.matchesSelector(n,e))){n=s.push(n);break}}}return this.pushStack(s.length>1?jQuery.unique(s):s)},index:function(e){if(!e){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof e==="string"){return core_indexOf.call(jQuery(e),this[0])}return core_indexOf.call(this,e.jquery?e[0]:e)},add:function(e,t){var n=typeof e==="string"?jQuery(e,t):jQuery.makeArray(e&&e.nodeType?[e]:e),r=jQuery.merge(this.get(),n);return this.pushStack(jQuery.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});jQuery.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return jQuery.dir(e,"parentNode")},parentsUntil:function(e,t,n){return jQuery.dir(e,"parentNode",n)},next:function(e){return sibling(e,"nextSibling")},prev:function(e){return sibling(e,"previousSibling")},nextAll:function(e){return jQuery.dir(e,"nextSibling")},prevAll:function(e){return jQuery.dir(e,"previousSibling")},nextUntil:function(e,t,n){return jQuery.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return jQuery.dir(e,"previousSibling",n)},siblings:function(e){return jQuery.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return jQuery.sibling(e.firstChild)},contents:function(e){return e.contentDocument||jQuery.merge([],e.childNodes)}},function(e,t){jQuery.fn[e]=function(n,r){var i=jQuery.map(this,t,n);if(e.slice(-5)!=="Until"){r=n}if(r&&typeof r==="string"){i=jQuery.filter(r,i)}if(this.length>1){if(!guaranteedUnique[e]){jQuery.unique(i)}if(rparentsprev.test(e)){i.reverse()}}return this.pushStack(i)}});jQuery.extend({filter:function(e,t,n){var r=t[0];if(n){e=":not("+e+")"}return t.length===1&&r.nodeType===1?jQuery.find.matchesSelector(r,e)?[r]:[]:jQuery.find.matches(e,jQuery.grep(t,function(e){return e.nodeType===1}))},dir:function(e,t,n){var r=[],i=n!==undefined;while((e=e[t])&&e.nodeType!==9){if(e.nodeType===1){if(i&&jQuery(e).is(n)){break}r.push(e)}}return r},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling){if(e.nodeType===1&&e!==t){n.push(e)}}return n}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,manipulation_rcheckableType=/^(?:checkbox|radio)$/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;jQuery.fn.extend({text:function(e){return jQuery.access(this,function(e){return e===undefined?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=manipulationTarget(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=manipulationTarget(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this)}})},after:function(){return this.domManip(arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this.nextSibling)}})},remove:function(e,t){var n,r=e?jQuery.filter(e,this):this,i=0;for(;(n=r[i])!=null;i++){if(!t&&n.nodeType===1){jQuery.cleanData(getAll(n))}if(n.parentNode){if(t&&jQuery.contains(n.ownerDocument,n)){setGlobalEval(getAll(n,"script"))}n.parentNode.removeChild(n)}}return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){if(e.nodeType===1){jQuery.cleanData(getAll(e,false));e.textContent=""}}return this},clone:function(e,t){e=e==null?false:e;t=t==null?e:t;return this.map(function(){return jQuery.clone(this,e,t)})},html:function(e){return jQuery.access(this,function(e){var t=this[0]||{},n=0,r=this.length;if(e===undefined&&t.nodeType===1){return t.innerHTML}if(typeof e==="string"&&!rnoInnerhtml.test(e)&&!wrapMap[(rtagName.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(rxhtmlTag,"<$1></$2>");try{for(;n<r;n++){t=this[n]||{};if(t.nodeType===1){jQuery.cleanData(getAll(t,false));t.innerHTML=e}}t=0}catch(i){}}if(t){this.empty().append(e)}},null,e,arguments.length)},replaceWith:function(){var e=jQuery.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;this.domManip(arguments,function(n){var r=e[t++],s=e[t++];if(s){if(r&&r.parentNode!==s){r=this.nextSibling}jQuery(this).remove();s.insertBefore(n,r)}},true);return t?this:this.remove()},detach:function(e){return this.remove(e,true)},domManip:function(e,t,n){e=core_concat.apply([],e);var r,i,s,o,u,a,f=0,l=this.length,c=this,h=l-1,p=e[0],d=jQuery.isFunction(p);if(d||!(l<=1||typeof p!=="string"||jQuery.support.checkClone||!rchecked.test(p))){return this.each(function(r){var i=c.eq(r);if(d){e[0]=p.call(this,r,i.html())}i.domManip(e,t,n)})}if(l){r=jQuery.buildFragment(e,this[0].ownerDocument,false,!n&&this);i=r.firstChild;if(r.childNodes.length===1){r=i}if(i){s=jQuery.map(getAll(r,"script"),disableScript);o=s.length;for(;f<l;f++){u=r;if(f!==h){u=jQuery.clone(u,true,true);if(o){jQuery.merge(s,getAll(u,"script"))}}t.call(this[f],u,f)}if(o){a=s[s.length-1].ownerDocument;jQuery.map(s,restoreScript);for(f=0;f<o;f++){u=s[f];if(rscriptType.test(u.type||"")&&!data_priv.access(u,"globalEval")&&jQuery.contains(a,u)){if(u.src){jQuery._evalUrl(u.src)}else{jQuery.globalEval(u.textContent.replace(rcleanScript,""))}}}}}}return this}});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){jQuery.fn[e]=function(e){var n,r=[],i=jQuery(e),s=i.length-1,o=0;for(;o<=s;o++){n=o===s?this:this.clone(true);jQuery(i[o])[t](n);core_push.apply(r,n.get())}return this.pushStack(r)}});jQuery.extend({clone:function(e,t,n){var r,i,s,o,u=e.cloneNode(true),a=jQuery.contains(e.ownerDocument,e);if(!jQuery.support.noCloneChecked&&(e.nodeType===1||e.nodeType===11)&&!jQuery.isXMLDoc(e)){o=getAll(u);s=getAll(e);for(r=0,i=s.length;r<i;r++){fixInput(s[r],o[r])}}if(t){if(n){s=s||getAll(e);o=o||getAll(u);for(r=0,i=s.length;r<i;r++){cloneCopyEvent(s[r],o[r])}}else{cloneCopyEvent(e,u)}}o=getAll(u,"script");if(o.length>0){setGlobalEval(o,!a&&getAll(e,"script"))}return u},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l=0,c=e.length,h=t.createDocumentFragment(),p=[];for(;l<c;l++){i=e[l];if(i||i===0){if(jQuery.type(i)==="object"){jQuery.merge(p,i.nodeType?[i]:i)}else if(!rhtml.test(i)){p.push(t.createTextNode(i))}else{s=s||h.appendChild(t.createElement("div"));o=(rtagName.exec(i)||["",""])[1].toLowerCase();u=wrapMap[o]||wrapMap._default;s.innerHTML=u[1]+i.replace(rxhtmlTag,"<$1></$2>")+u[2];f=u[0];while(f--){s=s.lastChild}jQuery.merge(p,s.childNodes);s=h.firstChild;s.textContent=""}}}h.textContent="";l=0;while(i=p[l++]){if(r&&jQuery.inArray(i,r)!==-1){continue}a=jQuery.contains(i.ownerDocument,i);s=getAll(h.appendChild(i),"script");if(a){setGlobalEval(s)}if(n){f=0;while(i=s[f++]){if(rscriptType.test(i.type||"")){n.push(i)}}}}return h},cleanData:function(e){var t,n,r,i,s,o,u=jQuery.event.special,a=0;for(;(n=e[a])!==undefined;a++){if(Data.accepts(n)){s=n[data_priv.expando];if(s&&(t=data_priv.cache[s])){r=Object.keys(t.events||{});if(r.length){for(o=0;(i=r[o])!==undefined;o++){if(u[i]){jQuery.event.remove(n,i)}else{jQuery.removeEvent(n,i,t.handle)}}}if(data_priv.cache[s]){delete data_priv.cache[s]}}}delete data_user.cache[n[data_user.expando]]}},_evalUrl:function(e){return jQuery.ajax({url:e,type:"GET",dataType:"script",async:false,global:false,"throws":true})}});jQuery.fn.extend({wrapAll:function(e){var t;if(jQuery.isFunction(e)){return this.each(function(t){jQuery(this).wrapAll(e.call(this,t))})}if(this[0]){t=jQuery(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){t.insertBefore(this[0])}t.map(function(){var e=this;while(e.firstElementChild){e=e.firstElementChild}return e}).append(this)}return this},wrapInner:function(e){if(jQuery.isFunction(e)){return this.each(function(t){jQuery(this).wrapInner(e.call(this,t))})}return this.each(function(){var t=jQuery(this),n=t.contents();if(n.length){n.wrapAll(e)}else{t.append(e)}})},wrap:function(e){var t=jQuery.isFunction(e);return this.each(function(n){jQuery(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body")){jQuery(this).replaceWith(this.childNodes)}}).end()}});var curCSS,iframe,rdisplayswap=/^(none|table(?!-c[ea]).+)/,rmargin=/^margin/,rnumsplit=new RegExp("^("+core_pnum+")(.*)$","i"),rnumnonpx=new RegExp("^("+core_pnum+")(?!px)[a-z%]+$","i"),rrelNum=new RegExp("^([+-])=("+core_pnum+")","i"),elemdisplay={BODY:"block"},cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:0,fontWeight:400},cssExpand=["Top","Right","Bottom","Left"],cssPrefixes=["Webkit","O","Moz","ms"];jQuery.fn.extend({css:function(e,t){return jQuery.access(this,function(e,t,n){var r,i,s={},o=0;if(jQuery.isArray(t)){r=getStyles(e);i=t.length;for(;o<i;o++){s[t[o]]=jQuery.css(e,t[o],false,r)}return s}return n!==undefined?jQuery.style(e,t,n):jQuery.css(e,t)},e,t,arguments.length>1)},show:function(){return showHide(this,true)},hide:function(){return showHide(this)},toggle:function(e){if(typeof e==="boolean"){return e?this.show():this.hide()}return this.each(function(){if(isHidden(this)){jQuery(this).show()}else{jQuery(this).hide()}})}});jQuery.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=curCSS(e,"opacity");return n===""?"1":n}}}},cssNumber:{columnCount:true,fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(!e||e.nodeType===3||e.nodeType===8||!e.style){return}var i,s,o,u=jQuery.camelCase(t),a=e.style;t=jQuery.cssProps[u]||(jQuery.cssProps[u]=vendorPropName(a,u));o=jQuery.cssHooks[t]||jQuery.cssHooks[u];if(n!==undefined){s=typeof n;if(s==="string"&&(i=rrelNum.exec(n))){n=(i[1]+1)*i[2]+parseFloat(jQuery.css(e,t));s="number"}if(n==null||s==="number"&&isNaN(n)){return}if(s==="number"&&!jQuery.cssNumber[u]){n+="px"}if(!jQuery.support.clearCloneStyle&&n===""&&t.indexOf("background")===0){a[t]="inherit"}if(!o||!("set"in o)||(n=o.set(e,n,r))!==undefined){a[t]=n}}else{if(o&&"get"in o&&(i=o.get(e,false,r))!==undefined){return i}return a[t]}},css:function(e,t,n,r){var i,s,o,u=jQuery.camelCase(t);t=jQuery.cssProps[u]||(jQuery.cssProps[u]=vendorPropName(e.style,u));o=jQuery.cssHooks[t]||jQuery.cssHooks[u];if(o&&"get"in o){i=o.get(e,true,n)}if(i===undefined){i=curCSS(e,t,r)}if(i==="normal"&&t in cssNormalTransform){i=cssNormalTransform[t]}if(n===""||n){s=parseFloat(i);return n===true||jQuery.isNumeric(s)?s||0:i}return i}});curCSS=function(e,t,n){var r,i,s,o=n||getStyles(e),u=o?o.getPropertyValue(t)||o[t]:undefined,a=e.style;if(o){if(u===""&&!jQuery.contains(e.ownerDocument,e)){u=jQuery.style(e,t)}if(rnumnonpx.test(u)&&rmargin.test(t)){r=a.width;i=a.minWidth;s=a.maxWidth;a.minWidth=a.maxWidth=a.width=u;u=o.width;a.width=r;a.minWidth=i;a.maxWidth=s}}return u};jQuery.each(["height","width"],function(e,t){jQuery.cssHooks[t]={get:function(e,n,r){if(n){return e.offsetWidth===0&&rdisplayswap.test(jQuery.css(e,"display"))?jQuery.swap(e,cssShow,function(){return getWidthOrHeight(e,t,r)}):getWidthOrHeight(e,t,r)}},set:function(e,n,r){var i=r&&getStyles(e);return setPositiveNumber(e,n,r?augmentWidthOrHeight(e,t,r,jQuery.support.boxSizing&&jQuery.css(e,"boxSizing",false,i)==="border-box",i):0)}}});jQuery(function(){if(!jQuery.support.reliableMarginRight){jQuery.cssHooks.marginRight={get:function(e,t){if(t){return jQuery.swap(e,{display:"inline-block"},curCSS,[e,"marginRight"])}}}}if(!jQuery.support.pixelPosition&&jQuery.fn.position){jQuery.each(["top","left"],function(e,t){jQuery.cssHooks[t]={get:function(e,n){if(n){n=curCSS(e,t);return rnumnonpx.test(n)?jQuery(e).position()[t]+"px":n}}}})}});if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0};jQuery.expr.filters.visible=function(e){return!jQuery.expr.filters.hidden(e)}}jQuery.each({margin:"",padding:"",border:"Width"},function(e,t){jQuery.cssHooks[e+t]={expand:function(n){var r=0,i={},s=typeof n==="string"?n.split(" "):[n];for(;r<4;r++){i[e+cssExpand[r]+t]=s[r]||s[r-2]||s[0]}return i}};if(!rmargin.test(e)){jQuery.cssHooks[e+t].set=setPositiveNumber}});var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=jQuery.prop(this,"elements");return e?jQuery.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(e)&&(this.checked||!manipulation_rcheckableType.test(e))}).map(function(e,t){var n=jQuery(this).val();return n==null?null:jQuery.isArray(n)?jQuery.map(n,function(e){return{name:t.name,value:e.replace(rCRLF,"\r\n")}}):{name:t.name,value:n.replace(rCRLF,"\r\n")}}).get()}});jQuery.param=function(e,t){var n,r=[],i=function(e,t){t=jQuery.isFunction(t)?t():t==null?"":t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(t===undefined){t=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional}if(jQuery.isArray(e)||e.jquery&&!jQuery.isPlainObject(e)){jQuery.each(e,function(){i(this.name,this.value)})}else{for(n in e){buildParams(n,e[n],t,i)}}return r.join("&").replace(r20,"+")};jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(e,t){jQuery.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}});jQuery.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)}});var ajaxLocParts,ajaxLocation,ajax_nonce=jQuery.now(),ajax_rquery=/\?/,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/mg,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,_load=jQuery.fn.load,prefilters={},transports={},allTypes="*/".concat("*");try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a");ajaxLocation.href="";ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];jQuery.fn.load=function(e,t,n){if(typeof e!=="string"&&_load){return _load.apply(this,arguments)}var r,i,s,o=this,u=e.indexOf(" ");if(u>=0){r=e.slice(u);e=e.slice(0,u)}if(jQuery.isFunction(t)){n=t;t=undefined}else if(t&&typeof t==="object"){i="POST"}if(o.length>0){jQuery.ajax({url:e,type:i,dataType:"html",data:t}).done(function(e){s=arguments;o.html(r?jQuery("<div>").append(jQuery.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){o.each(n,s||[e.responseText,t,e])})}return this};jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){jQuery.fn[t]=function(e){return this.on(t,e)}});jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(e,t){return t?ajaxExtend(ajaxExtend(e,jQuery.ajaxSettings),t):ajaxExtend(jQuery.ajaxSettings,e)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(e,t){function S(e,t,s,u){var f,m,g,b,E,S=t;if(y===2){return}y=2;if(o){clearTimeout(o)}n=undefined;i=u||"";w.readyState=e>0?4:0;f=e>=200&&e<300||e===304;if(s){b=ajaxHandleResponses(l,w,s)}b=ajaxConvert(l,b,w,f);if(f){if(l.ifModified){E=w.getResponseHeader("Last-Modified");if(E){jQuery.lastModified[r]=E}E=w.getResponseHeader("etag");if(E){jQuery.etag[r]=E}}if(e===204||l.type==="HEAD"){S="nocontent"}else if(e===304){S="notmodified"}else{S=b.state;m=b.data;g=b.error;f=!g}}else{g=S;if(e||!S){S="error";if(e<0){e=0}}}w.status=e;w.statusText=(t||S)+"";if(f){p.resolveWith(c,[m,S,w])}else{p.rejectWith(c,[w,S,g])}w.statusCode(v);v=undefined;if(a){h.trigger(f?"ajaxSuccess":"ajaxError",[w,l,f?m:g])}d.fireWith(c,[w,S]);if(a){h.trigger("ajaxComplete",[w,l]);if(!--jQuery.active){jQuery.event.trigger("ajaxStop")}}}if(typeof e==="object"){t=e;e=undefined}t=t||{};var n,r,i,s,o,u,a,f,l=jQuery.ajaxSetup({},t),c=l.context||l,h=l.context&&(c.nodeType||c.jquery)?jQuery(c):jQuery.event,p=jQuery.Deferred(),d=jQuery.Callbacks("once memory"),v=l.statusCode||{},m={},g={},y=0,b="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(y===2){if(!s){s={};while(t=rheaders.exec(i)){s[t[1].toLowerCase()]=t[2]}}t=s[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return y===2?i:null},setRequestHeader:function(e,t){var n=e.toLowerCase();if(!y){e=g[n]=g[n]||e;m[e]=t}return this},overrideMimeType:function(e){if(!y){l.mimeType=e}return this},statusCode:function(e){var t;if(e){if(y<2){for(t in e){v[t]=[v[t],e[t]]}}else{w.always(e[w.status])}}return this},abort:function(e){var t=e||b;if(n){n.abort(t)}S(0,t);return this}};p.promise(w).complete=d.add;w.success=w.done;w.error=w.fail;l.url=((e||l.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//");l.type=t.method||t.type||l.method||l.type;l.dataTypes=jQuery.trim(l.dataType||"*").toLowerCase().match(core_rnotwhite)||[""];if(l.crossDomain==null){u=rurl.exec(l.url.toLowerCase());l.crossDomain=!!(u&&(u[1]!==ajaxLocParts[1]||u[2]!==ajaxLocParts[2]||(u[3]||(u[1]==="http:"?"80":"443"))!==(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?"80":"443"))))}if(l.data&&l.processData&&typeof l.data!=="string"){l.data=jQuery.param(l.data,l.traditional)}inspectPrefiltersOrTransports(prefilters,l,t,w);if(y===2){return w}a=l.global;if(a&&jQuery.active++===0){jQuery.event.trigger("ajaxStart")}l.type=l.type.toUpperCase();l.hasContent=!rnoContent.test(l.type);r=l.url;if(!l.hasContent){if(l.data){r=l.url+=(ajax_rquery.test(r)?"&":"?")+l.data;delete l.data}if(l.cache===false){l.url=rts.test(r)?r.replace(rts,"$1_="+ajax_nonce++):r+(ajax_rquery.test(r)?"&":"?")+"_="+ajax_nonce++}}if(l.ifModified){if(jQuery.lastModified[r]){w.setRequestHeader("If-Modified-Since",jQuery.lastModified[r])}if(jQuery.etag[r]){w.setRequestHeader("If-None-Match",jQuery.etag[r])}}if(l.data&&l.hasContent&&l.contentType!==false||t.contentType){w.setRequestHeader("Content-Type",l.contentType)}w.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+(l.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):l.accepts["*"]);for(f in l.headers){w.setRequestHeader(f,l.headers[f])}if(l.beforeSend&&(l.beforeSend.call(c,w,l)===false||y===2)){return w.abort()}b="abort";for(f in{success:1,error:1,complete:1}){w[f](l[f])}n=inspectPrefiltersOrTransports(transports,l,t,w);if(!n){S(-1,"No Transport")}else{w.readyState=1;if(a){h.trigger("ajaxSend",[w,l])}if(l.async&&l.timeout>0){o=setTimeout(function(){w.abort("timeout")},l.timeout)}try{y=1;n.send(m,S)}catch(E){if(y<2){S(-1,E)}else{throw E}}}return w},getJSON:function(e,t,n){return jQuery.get(e,t,n,"json")},getScript:function(e,t){return jQuery.get(e,undefined,t,"script")}});jQuery.each(["get","post"],function(e,t){jQuery[t]=function(e,n,r,i){if(jQuery.isFunction(n)){i=i||r;r=n;n=undefined}return jQuery.ajax({url:e,type:t,dataType:i,data:n,success:r})}});jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){jQuery.globalEval(e);return e}}});jQuery.ajaxPrefilter("script",function(e){if(e.cache===undefined){e.cache=false}if(e.crossDomain){e.type="GET"}});jQuery.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=jQuery("<script>").prop({async:true,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove();n=null;if(e){i(e.type==="error"?404:200,e.type)}});document.head.appendChild(t[0])},abort:function(){if(n){n()}}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=oldCallbacks.pop()||jQuery.expando+"_"+ajax_nonce++;this[e]=true;return e}});jQuery.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,s,o=e.jsonp!==false&&(rjsonp.test(e.url)?"url":typeof e.data==="string"&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(e.data)&&"data");if(o||e.dataTypes[0]==="jsonp"){r=e.jsonpCallback=jQuery.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback;if(o){e[o]=e[o].replace(rjsonp,"$1"+r)}else if(e.jsonp!==false){e.url+=(ajax_rquery.test(e.url)?"&":"?")+e.jsonp+"="+r}e.converters["script json"]=function(){if(!s){jQuery.error(r+" was not called")}return s[0]};e.dataTypes[0]="json";i=window[r];window[r]=function(){s=arguments};n.always(function(){window[r]=i;if(e[r]){e.jsonpCallback=t.jsonpCallback;oldCallbacks.push(r)}if(s&&jQuery.isFunction(i)){i(s[0])}s=i=undefined});return"script"}});jQuery.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var xhrSupported=jQuery.ajaxSettings.xhr(),xhrSuccessStatus={0:200,1223:204},xhrId=0,xhrCallbacks={};if(window.ActiveXObject){jQuery(window).on("unload",function(){for(var e in xhrCallbacks){xhrCallbacks[e]()}xhrCallbacks=undefined})}jQuery.support.cors=!!xhrSupported&&"withCredentials"in xhrSupported;jQuery.support.ajax=xhrSupported=!!xhrSupported;jQuery.ajaxTransport(function(e){var t;if(jQuery.support.cors||xhrSupported&&!e.crossDomain){return{send:function(n,r){var i,s,o=e.xhr();o.open(e.type,e.url,e.async,e.username,e.password);if(e.xhrFields){for(i in e.xhrFields){o[i]=e.xhrFields[i]}}if(e.mimeType&&o.overrideMimeType){o.overrideMimeType(e.mimeType)}if(!e.crossDomain&&!n["X-Requested-With"]){n["X-Requested-With"]="XMLHttpRequest"}for(i in n){o.setRequestHeader(i,n[i])}t=function(e){return function(){if(t){delete xhrCallbacks[s];t=o.onload=o.onerror=null;if(e==="abort"){o.abort()}else if(e==="error"){r(o.status||404,o.statusText)}else{r(xhrSuccessStatus[o.status]||o.status,o.statusText,typeof o.responseText==="string"?{text:o.responseText}:undefined,o.getAllResponseHeaders())}}}};o.onload=t();o.onerror=t("error");t=xhrCallbacks[s=xhrId++]=t("abort");o.send(e.hasContent&&e.data||null)},abort:function(){if(t){t()}}}}});var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+core_pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=rfxnum.exec(t),s=i&&i[3]||(jQuery.cssNumber[e]?"":"px"),o=(jQuery.cssNumber[e]||s!=="px"&&+r)&&rfxnum.exec(jQuery.css(n.elem,e)),u=1,a=20;if(o&&o[3]!==s){s=s||o[3];i=i||[];o=+r||1;do{u=u||".5";o=o/u;jQuery.style(n.elem,e,o+s)}while(u!==(u=n.cur()/r)&&u!==1&&--a)}if(i){o=n.start=+o||+r||0;n.unit=s;n.end=i[1]?o+(i[1]+1)*i[2]:+i[2]}return n}]};jQuery.Animation=jQuery.extend(Animation,{tweener:function(e,t){if(jQuery.isFunction(e)){t=e;e=["*"]}else{e=e.split(" ")}var n,r=0,i=e.length;for(;r<i;r++){n=e[r];tweeners[n]=tweeners[n]||[];tweeners[n].unshift(t)}},prefilter:function(e,t){if(t){animationPrefilters.unshift(e)}else{animationPrefilters.push(e)}}});jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function(e,t,n,r,i,s){this.elem=e;this.prop=n;this.easing=i||"swing";this.options=t;this.start=this.now=this.cur();this.end=r;this.unit=s||(jQuery.cssNumber[n]?"":"px")},cur:function(){var e=Tween.propHooks[this.prop];return e&&e.get?e.get(this):Tween.propHooks._default.get(this)},run:function(e){var t,n=Tween.propHooks[this.prop];if(this.options.duration){this.pos=t=jQuery.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration)}else{this.pos=t=e}this.now=(this.end-this.start)*t+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(n&&n.set){n.set(this)}else{Tween.propHooks._default.set(this)}return this}};Tween.prototype.init.prototype=Tween.prototype;Tween.propHooks={_default:{get:function(e){var t;if(e.elem[e.prop]!=null&&(!e.elem.style||e.elem.style[e.prop]==null)){return e.elem[e.prop]}t=jQuery.css(e.elem,e.prop,"");return!t||t==="auto"?0:t},set:function(e){if(jQuery.fx.step[e.prop]){jQuery.fx.step[e.prop](e)}else if(e.elem.style&&(e.elem.style[jQuery.cssProps[e.prop]]!=null||jQuery.cssHooks[e.prop])){jQuery.style(e.elem,e.prop,e.now+e.unit)}else{e.elem[e.prop]=e.now}}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(e){if(e.elem.nodeType&&e.elem.parentNode){e.elem[e.prop]=e.now}}};jQuery.each(["toggle","show","hide"],function(e,t){var n=jQuery.fn[t];jQuery.fn[t]=function(e,r,i){return e==null||typeof e==="boolean"?n.apply(this,arguments):this.animate(genFx(t,true),e,r,i)}});jQuery.fn.extend({fadeTo:function(e,t,n,r){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=jQuery.isEmptyObject(e),s=jQuery.speed(t,n,r),o=function(){var t=Animation(this,jQuery.extend({},e),s);if(i||data_priv.get(this,"finish")){t.stop(true)}};o.finish=o;return i||s.queue===false?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop;t(n)};if(typeof e!=="string"){n=t;t=e;e=undefined}if(t&&e!==false){this.queue(e||"fx",[])}return this.each(function(){var t=true,i=e!=null&&e+"queueHooks",s=jQuery.timers,o=data_priv.get(this);if(i){if(o[i]&&o[i].stop){r(o[i])}}else{for(i in o){if(o[i]&&o[i].stop&&rrun.test(i)){r(o[i])}}}for(i=s.length;i--;){if(s[i].elem===this&&(e==null||s[i].queue===e)){s[i].anim.stop(n);t=false;s.splice(i,1)}}if(t||!n){jQuery.dequeue(this,e)}})},finish:function(e){if(e!==false){e=e||"fx"}return this.each(function(){var t,n=data_priv.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=jQuery.timers,o=r?r.length:0;n.finish=true;jQuery.queue(this,e,[]);if(i&&i.stop){i.stop.call(this,true)}for(t=s.length;t--;){if(s[t].elem===this&&s[t].queue===e){s[t].anim.stop(true);s.splice(t,1)}}for(t=0;t<o;t++){if(r[t]&&r[t].finish){r[t].finish.call(this)}}delete n.finish})}});jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){jQuery.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}});jQuery.speed=function(e,t,n){var r=e&&typeof e==="object"?jQuery.extend({},e):{complete:n||!n&&t||jQuery.isFunction(e)&&e,duration:e,easing:n&&t||t&&!jQuery.isFunction(t)&&t};r.duration=jQuery.fx.off?0:typeof r.duration==="number"?r.duration:r.duration in jQuery.fx.speeds?jQuery.fx.speeds[r.duration]:jQuery.fx.speeds._default;if(r.queue==null||r.queue===true){r.queue="fx"}r.old=r.complete;r.complete=function(){if(jQuery.isFunction(r.old)){r.old.call(this)}if(r.queue){jQuery.dequeue(this,r.queue)}};return r};jQuery.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}};jQuery.timers=[];jQuery.fx=Tween.prototype.init;jQuery.fx.tick=function(){var e,t=jQuery.timers,n=0;fxNow=jQuery.now();for(;n<t.length;n++){e=t[n];if(!e()&&t[n]===e){t.splice(n--,1)}}if(!t.length){jQuery.fx.stop()}fxNow=undefined};jQuery.fx.timer=function(e){if(e()&&jQuery.timers.push(e)){jQuery.fx.start()}};jQuery.fx.interval=13;jQuery.fx.start=function(){if(!timerId){timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval)}};jQuery.fx.stop=function(){clearInterval(timerId);timerId=null};jQuery.fx.speeds={slow:600,fast:200,_default:400};jQuery.fx.step={};if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.animated=function(e){return jQuery.grep(jQuery.timers,function(t){return e===t.elem}).length}}jQuery.fn.offset=function(e){if(arguments.length){return e===undefined?this:this.each(function(t){jQuery.offset.setOffset(this,e,t)})}var t,n,r=this[0],i={top:0,left:0},s=r&&r.ownerDocument;if(!s){return}t=s.documentElement;if(!jQuery.contains(t,r)){return i}if(typeof r.getBoundingClientRect!==core_strundefined){i=r.getBoundingClientRect()}n=getWindow(s);return{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}};jQuery.offset={setOffset:function(e,t,n){var r,i,s,o,u,a,f,l=jQuery.css(e,"position"),c=jQuery(e),h={};if(l==="static"){e.style.position="relative"}u=c.offset();s=jQuery.css(e,"top");a=jQuery.css(e,"left");f=(l==="absolute"||l==="fixed")&&(s+a).indexOf("auto")>-1;if(f){r=c.position();o=r.top;i=r.left}else{o=parseFloat(s)||0;i=parseFloat(a)||0}if(jQuery.isFunction(t)){t=t.call(e,n,u)}if(t.top!=null){h.top=t.top-u.top+o}if(t.left!=null){h.left=t.left-u.left+i}if("using"in t){t.using.call(e,h)}else{c.css(h)}}};jQuery.fn.extend({position:function(){if(!this[0]){return}var e,t,n=this[0],r={top:0,left:0};if(jQuery.css(n,"position")==="fixed"){t=n.getBoundingClientRect()}else{e=this.offsetParent();t=this.offset();if(!jQuery.nodeName(e[0],"html")){r=e.offset()}r.top+=jQuery.css(e[0],"borderTopWidth",true);r.left+=jQuery.css(e[0],"borderLeftWidth",true)}return{top:t.top-r.top-jQuery.css(n,"marginTop",true),left:t.left-r.left-jQuery.css(n,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||docElem;while(e&&!jQuery.nodeName(e,"html")&&jQuery.css(e,"position")==="static"){e=e.offsetParent}return e||docElem})}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;jQuery.fn[e]=function(r){return jQuery.access(this,function(e,r,i){var s=getWindow(e);if(i===undefined){return s?s[t]:e[r]}if(s){s.scrollTo(!n?i:window.pageXOffset,n?i:window.pageYOffset)}else{e[r]=i}},e,r,arguments.length,null)}});jQuery.each({Height:"height",Width:"width"},function(e,t){jQuery.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){jQuery.fn[r]=function(r,i){var s=arguments.length&&(n||typeof r!=="boolean"),o=n||(r===true||i===true?"margin":"border");return jQuery.access(this,function(t,n,r){var i;if(jQuery.isWindow(t)){return t.document.documentElement["client"+e]}if(t.nodeType===9){i=t.documentElement;return Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])}return r===undefined?jQuery.css(t,n,o):jQuery.style(t,n,r,o)},t,s?r:undefined,s,null)}})});jQuery.fn.size=function(){return this.length};jQuery.fn.andSelf=jQuery.fn.addBack;if(typeof module==="object"&&module&&typeof module.exports==="object"){module.exports=jQuery}else{if(typeof define==="function"&&define.amd){define("jquery",[],function(){return jQuery})}}if(typeof window==="object"&&typeof window.document==="object"){window.jQuery=window.$=jQuery}})(window);(function(){var e=this;var t=e._;var n={};var r=Array.prototype,i=Object.prototype,s=Function.prototype;var o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty;var c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind;var x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=x}exports._=x}else{e._=x}x.VERSION="1.5.2";var T=x.each=x.forEach=function(e,t,r){if(e==null)return;if(c&&e.forEach===c){e.forEach(t,r)}else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++){if(t.call(r,e[i],i,e)===n)return}}else{var o=x.keys(e);for(var i=0,s=o.length;i<s;i++){if(t.call(r,e[o[i]],o[i],e)===n)return}}};x.map=x.collect=function(e,t,n){var r=[];if(e==null)return r;if(h&&e.map===h)return e.map(t,n);T(e,function(e,i,s){r.push(t.call(n,e,i,s))});return r};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;if(e==null)e=[];if(p&&e.reduce===p){if(r)t=x.bind(t,r);return i?e.reduce(t,n):e.reduce(t)}T(e,function(e,s,o){if(!i){n=e;i=true}else{n=t.call(r,n,e,s,o)}});if(!i)throw new TypeError(N);return n};x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;if(e==null)e=[];if(d&&e.reduceRight===d){if(r)t=x.bind(t,r);return i?e.reduceRight(t,n):e.reduceRight(t)}var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s;if(!i){n=e[a];i=true}else{n=t.call(r,n,e[a],a,f)}});if(!i)throw new TypeError(N);return n};x.find=x.detect=function(e,t,n){var r;C(e,function(e,i,s){if(t.call(n,e,i,s)){r=e;return true}});return r};x.filter=x.select=function(e,t,n){var r=[];if(e==null)return r;if(v&&e.filter===v)return e.filter(t,n);T(e,function(e,i,s){if(t.call(n,e,i,s))r.push(e)});return r};x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)};x.every=x.all=function(e,t,r){t||(t=x.identity);var i=true;if(e==null)return i;if(m&&e.every===m)return e.every(t,r);T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n});return!!i};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=false;if(e==null)return i;if(g&&e.some===g)return e.some(t,r);T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n});return!!i};x.contains=x.include=function(e,t){if(e==null)return false;if(y&&e.indexOf===y)return e.indexOf(t)!=-1;return C(e,function(e){return e===t})};x.invoke=function(e,t){var n=u.call(arguments,2);var r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})};x.pluck=function(e,t){return x.map(e,function(e){return e[t]})};x.where=function(e,t,n){if(x.isEmpty(t))return n?void 0:[];return x[n?"find":"filter"](e,function(e){for(var n in t){if(t[n]!==e[n])return false}return true})};x.findWhere=function(e,t){return x.where(e,t,true)};x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535){return Math.max.apply(Math,e)}if(!t&&x.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>r.computed&&(r={value:e,computed:o})});return r.value};x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535){return Math.min.apply(Math,e)}if(!t&&x.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})});return r.value};x.shuffle=function(e){var t;var n=0;var r=[];T(e,function(e){t=x.random(n++);r[n-1]=r[t];r[t]=e});return r};x.sample=function(e,t,n){if(arguments.length<2||n){return e[x.random(e.length-1)]}return x.shuffle(e).slice(0,Math.max(0,t))};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria;var r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),"value")};var L=function(e){return function(t,n,r){var i={};var s=n==null?x.identity:k(n);T(t,function(n,o){var u=s.call(r,n,o,t);e(i,u,n)});return i}};x.groupBy=L(function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)});x.indexBy=L(function(e,t,n){e[t]=n});x.countBy=L(function(e,t){x.has(e,t)?e[t]++:e[t]=1});x.sortedIndex=function(e,t,n,r){n=n==null?x.identity:k(n);var i=n.call(r,t);var s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s};x.toArray=function(e){if(!e)return[];if(x.isArray(e))return u.call(e);if(e.length===+e.length)return x.map(e,x.identity);return x.values(e)};x.size=function(e){if(e==null)return 0;return e.length===+e.length?e.length:x.keys(e).length};x.first=x.head=x.take=function(e,t,n){if(e==null)return void 0;return t==null||n?e[0]:u.call(e,0,t)};x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))};x.last=function(e,t,n){if(e==null)return void 0;if(t==null||n){return e[e.length-1]}else{return u.call(e,Math.max(e.length-t,0))}};x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)};x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){if(t&&x.every(e,x.isArray)){return a.apply(n,e)}T(e,function(e){if(x.isArray(e)||x.isArguments(e)){t?o.apply(n,e):A(e,t,n)}else{n.push(e)}});return n};x.flatten=function(e,t){return A(e,t,[])};x.without=function(e){return x.difference(e,u.call(arguments,1))};x.uniq=x.unique=function(e,t,n,r){if(x.isFunction(t)){r=n;n=t;t=false}var i=n?x.map(e,n,r):e;var s=[];var o=[];T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n)){o.push(n);s.push(e[r])}});return s};x.union=function(){return x.uniq(x.flatten(arguments,true))};x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})};x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})};x.zip=function(){var e=x.max(x.pluck(arguments,"length").concat(0));var t=new Array(e);for(var n=0;n<e;n++){t[n]=x.pluck(arguments,""+n)}return t};x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++){if(t){n[e[r]]=t[r]}else{n[e[r][0]]=e[r][1]}}return n};x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n=="number"){r=n<0?Math.max(0,i+n):n}else{r=x.sortedIndex(e,t);return e[r]===t?r:-1}}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1};x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b){return r?e.lastIndexOf(t,n):e.lastIndexOf(t)}var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1};x.range=function(e,t,n){if(arguments.length<=1){t=e||0;e=0}n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0);var i=0;var s=new Array(r);while(i<r){s[i++]=e;e+=n}return s};var O=function(){};x.bind=function(e,t){var n,r;if(S&&e.bind===S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;n=u.call(arguments,2);return r=function(){if(!(this instanceof r))return e.apply(t,n.concat(u.call(arguments)));O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));if(Object(s)===s)return s;return i}};x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}};x.bindAll=function(e){var t=u.call(arguments,1);if(t.length===0)throw new Error("bindAll must be passed function names");T(t,function(t){e[t]=x.bind(e[t],e)});return e};x.memoize=function(e,t){var n={};t||(t=x.identity);return function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}};x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)};x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))};x.throttle=function(e,t,n){var r,i,s;var o=null;var u=0;n||(n={});var a=function(){u=n.leading===false?0:new Date;o=null;s=e.apply(r,i)};return function(){var f=new Date;if(!u&&n.leading===false)u=f;var l=t-(f-u);r=this;i=arguments;if(l<=0){clearTimeout(o);o=null;u=f;s=e.apply(r,i)}else if(!o&&n.trailing!==false){o=setTimeout(a,l)}return s}};x.debounce=function(e,t,n){var r,i,s,o,u;return function(){s=this;i=arguments;o=new Date;var a=function(){var f=new Date-o;if(f<t){r=setTimeout(a,t-f)}else{r=null;if(!n)u=e.apply(s,i)}};var f=n&&!r;if(!r){r=setTimeout(a,t)}if(f)u=e.apply(s,i);return u}};x.once=function(e){var t=false,n;return function(){if(t)return n;t=true;n=e.apply(this,arguments);e=null;return n}};x.wrap=function(e,t){return function(){var n=[e];o.apply(n,arguments);return t.apply(this,n)}};x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--){t=[e[n].apply(this,t)]}return t[0]}};x.after=function(e,t){return function(){if(--e<1){return t.apply(this,arguments)}}};x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)if(x.has(e,n))t.push(n);return t};x.values=function(e){var t=x.keys(e);var n=t.length;var r=new Array(n);for(var i=0;i<n;i++){r[i]=e[t[i]]}return r};x.pairs=function(e){var t=x.keys(e);var n=t.length;var r=new Array(n);for(var i=0;i<n;i++){r[i]=[t[i],e[t[i]]]}return r};x.invert=function(e){var t={};var n=x.keys(e);for(var r=0,i=n.length;r<i;r++){t[e[n[r]]]=n[r]}return t};x.functions=x.methods=function(e){var t=[];for(var n in e){if(x.isFunction(e[n]))t.push(n)}return t.sort()};x.extend=function(e){T(u.call(arguments,1),function(t){if(t){for(var n in t){e[n]=t[n]}}});return e};x.pick=function(e){var t={};var n=a.apply(r,u.call(arguments,1));T(n,function(n){if(n in e)t[n]=e[n]});return t};x.omit=function(e){var t={};var n=a.apply(r,u.call(arguments,1));for(var i in e){if(!x.contains(n,i))t[i]=e[i]}return t};x.defaults=function(e){T(u.call(arguments,1),function(t){if(t){for(var n in t){if(e[n]===void 0)e[n]=t[n]}}});return e};x.clone=function(e){if(!x.isObject(e))return e;return x.isArray(e)?e.slice():x.extend({},e)};x.tap=function(e,t){t(e);return e};var M=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;if(e instanceof x)e=e._wrapped;if(t instanceof x)t=t._wrapped;var i=f.call(e);if(i!=f.call(t))return false;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return false;var s=n.length;while(s--){if(n[s]==e)return r[s]==t}var o=e.constructor,u=t.constructor;if(o!==u&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(u)&&u instanceof u)){return false}n.push(e);r.push(t);var a=0,l=true;if(i=="[object Array]"){a=e.length;l=a==t.length;if(l){while(a--){if(!(l=M(e[a],t[a],n,r)))break}}}else{for(var c in e){if(x.has(e,c)){a++;if(!(l=x.has(t,c)&&M(e[c],t[c],n,r)))break}}if(l){for(c in t){if(x.has(t,c)&&!(a--))break}l=!a}}n.pop();r.pop();return l};x.isEqual=function(e,t){return M(e,t,[],[])};x.isEmpty=function(e){if(e==null)return true;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return false;return true};x.isElement=function(e){return!!(e&&e.nodeType===1)};x.isArray=w||function(e){return f.call(e)=="[object Array]"};x.isObject=function(e){return e===Object(e)};T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}});if(!x.isArguments(arguments)){x.isArguments=function(e){return!!(e&&x.has(e,"callee"))}}if(typeof /./!=="function"){x.isFunction=function(e){return typeof e==="function"}}x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))};x.isNaN=function(e){return x.isNumber(e)&&e!=+e};x.isBoolean=function(e){return e===true||e===false||f.call(e)=="[object Boolean]"};x.isNull=function(e){return e===null};x.isUndefined=function(e){return e===void 0};x.has=function(e,t){return l.call(e,t)};x.noConflict=function(){e._=t;return this};x.identity=function(e){return e};x.times=function(e,t,n){var r=Array(Math.max(0,e));for(var i=0;i<e;i++)r[i]=t.call(n,i);return r};x.random=function(e,t){if(t==null){t=e;e=0}return e+Math.floor(Math.random()*(t-e+1))};var _={escape:{"&":"&","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){if(t==null)return"";return(""+t).replace(D[e],function(t){return _[e][t]})}});x.result=function(e,t){if(e==null)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n};x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];o.apply(e,arguments);return F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=++P+"";return e?e+t:t};x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/;var B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"};var j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g");var s=0;var o="__p+='";e.replace(i,function(t,n,r,i,u){o+=e.slice(s,u).replace(j,function(e){return"\\"+B[e]});if(n){o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"}if(r){o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"}if(i){o+="';\n"+i+"\n__p+='"}s=u+t.length;return t});o+="';\n";if(!n.variable)o="with(obj||{}){\n"+o+"}\n";o="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){u.source=o;throw u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};a.source="function("+(n.variable||"obj")+"){\n"+o+"}";return a};x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x);T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;t.apply(n,arguments);if((e=="shift"||e=="splice")&&n.length===0)delete n[0];return F.call(this,n)}});T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}});x.extend(x.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);(function(){var e=this;var t=e.Backbone;var n=[];var r=n.push;var i=n.slice;var s=n.splice;var o;if(typeof exports!=="undefined"){o=exports}else{o=e.Backbone={}}o.VERSION="1.1.0";var u=e._;if(!u&&typeof require!=="undefined")u=require("underscore");o.$=e.jQuery||e.Zepto||e.ender||e.$;o.noConflict=function(){e.Backbone=t;return this};o.emulateHTTP=false;o.emulateJSON=false;var a=o.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);r.push({callback:t,context:n,ctx:n||this});return this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this;var i=u.once(function(){r.off(e,i);t.apply(this,arguments)});i._callback=t;return this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,a,f,c,h;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n){this._events={};return this}o=e?[e]:u.keys(this._events);for(a=0,f=o.length;a<f;a++){e=o[a];if(s=this._events[e]){this._events[e]=r=[];if(t||n){for(c=0,h=s.length;c<h;c++){i=s[c];if(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context){r.push(i)}}}if(!r.length)delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e];var r=this._events.all;if(n)c(n,t);if(r)c(r,arguments);return this},stopListening:function(e,t,n){var r=this._listeningTo;if(!r)return this;var i=!t&&!n;if(!n&&typeof t==="object")n=this;if(e)(r={})[e._listenId]=e;for(var s in r){e=r[s];e.off(t,n,this);if(i||u.isEmpty(e._events))delete this._listeningTo[s]}return this}};var f=/\s+/;var l=function(e,t,n,r){if(!n)return true;if(typeof n==="object"){for(var i in n){e[t].apply(e,[i,n[i]].concat(r))}return false}if(f.test(n)){var s=n.split(f);for(var o=0,u=s.length;o<u;o++){e[t].apply(e,[s[o]].concat(r))}return false}return true};var c=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}};var h={listenTo:"on",listenToOnce:"once"};u.each(h,function(e,t){a[t]=function(t,n,r){var i=this._listeningTo||(this._listeningTo={});var s=t._listenId||(t._listenId=u.uniqueId("l"));i[s]=t;if(!r&&typeof n==="object")r=this;t[e](n,r,this);return this}});a.bind=a.on;a.unbind=a.off;u.extend(o,a);var p=o.Model=function(e,t){var n=e||{};t||(t={});this.cid=u.uniqueId("c");this.attributes={};if(t.collection)this.collection=t.collection;if(t.parse)n=this.parse(n,t)||{};n=u.defaults({},n,u.result(this,"defaults"));this.set(n,t);this.changed={};this.initialize.apply(this,arguments)};u.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;if(typeof e==="object"){i=e;n=t}else{(i={})[e]=t}n||(n={});if(!this._validate(i,n))return false;s=n.unset;a=n.silent;o=[];f=this._changing;this._changing=true;if(!f){this._previousAttributes=u.clone(this.attributes);this.changed={}}c=this.attributes,l=this._previousAttributes;if(this.idAttribute in i)this.id=i[this.idAttribute];for(r in i){t=i[r];if(!u.isEqual(c[r],t))o.push(r);if(!u.isEqual(l[r],t)){this.changed[r]=t}else{delete this.changed[r]}s?delete c[r]:c[r]=t}if(!a){if(o.length)this._pending=true;for(var h=0,p=o.length;h<p;h++){this.trigger("change:"+o[h],this,c[o[h]],n)}}if(f)return this;if(!a){while(this._pending){this._pending=false;this.trigger("change",this,n)}}this._pending=false;this._changing=false;return this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:true}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:true}))},hasChanged:function(e){if(e==null)return!u.isEmpty(this.changed);return u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):false;var t,n=false;var r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){if(e==null||!this._previousAttributes)return null;return this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{};if(e.parse===void 0)e.parse=true;var t=this;var n=e.success;e.success=function(r){if(!t.set(t.parse(r,e),e))return false;if(n)n(t,r,e);t.trigger("sync",t,r,e)};F(this,e);return this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;if(e==null||typeof e==="object"){r=e;n=t}else{(r={})[e]=t}n=u.extend({validate:true},n);if(r&&!n.wait){if(!this.set(r,n))return false}else{if(!this._validate(r,n))return false}if(r&&n.wait){this.attributes=u.extend({},o,r)}if(n.parse===void 0)n.parse=true;var a=this;var f=n.success;n.success=function(e){a.attributes=o;var t=a.parse(e,n);if(n.wait)t=u.extend(r||{},t);if(u.isObject(t)&&!a.set(t,n)){return false}if(f)f(a,e,n);a.trigger("sync",a,e,n)};F(this,n);i=this.isNew()?"create":n.patch?"patch":"update";if(i==="patch")n.attrs=r;s=this.sync(i,this,n);if(r&&n.wait)this.attributes=o;return s},destroy:function(e){e=e?u.clone(e):{};var t=this;var n=e.success;var r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){if(e.wait||t.isNew())r();if(n)n(t,i,e);if(!t.isNew())t.trigger("sync",t,i,e)};if(this.isNew()){e.success();return false}F(this,e);var i=this.sync("delete",this,e);if(!e.wait)r();return i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||j();if(this.isNew())return e;return e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},u.extend(e||{},{validate:true}))},_validate:function(e,t){if(!t.validate||!this.validate)return true;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;if(!n)return true;this.trigger("invalid",this,n,u.extend(t,{validationError:n}));return false}});var d=["keys","values","pairs","invert","pick","omit"];u.each(d,function(e){p.prototype[e]=function(){var t=i.call(arguments);t.unshift(this.attributes);return u[e].apply(u,t)}});var v=o.Collection=function(e,t){t||(t={});if(t.model)this.model=t.model;if(t.comparator!==void 0)this.comparator=t.comparator;this._reset();this.initialize.apply(this,arguments);if(e)this.reset(e,u.extend({silent:true},t))};var m={add:true,remove:true,merge:true};var g={add:true,remove:false};u.extend(v.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.extend({merge:false},t,g))},remove:function(e,t){var n=!u.isArray(e);e=n?[e]:u.clone(e);t||(t={});var r,i,s,o;for(r=0,i=e.length;r<i;r++){o=e[r]=this.get(e[r]);if(!o)continue;delete this._byId[o.id];delete this._byId[o.cid];s=this.indexOf(o);this.models.splice(s,1);this.length--;if(!t.silent){t.index=s;o.trigger("remove",o,this,t)}this._removeReference(o)}return n?e[0]:e},set:function(e,t){t=u.defaults({},t,m);if(t.parse)e=this.parse(e,t);var n=!u.isArray(e);e=n?e?[e]:[]:u.clone(e);var r,i,s,o,a,f,l;var c=t.at;var h=this.model;var d=this.comparator&&c==null&&t.sort!==false;var v=u.isString(this.comparator)?this.comparator:null;var g=[],y=[],b={};var w=t.add,E=t.merge,S=t.remove;var x=!d&&w&&S?[]:false;for(r=0,i=e.length;r<i;r++){a=e[r];if(a instanceof p){s=o=a}else{s=a[h.prototype.idAttribute]}if(f=this.get(s)){if(S)b[f.cid]=true;if(E){a=a===o?o.attributes:a;if(t.parse)a=f.parse(a,t);f.set(a,t);if(d&&!l&&f.hasChanged(v))l=true}e[r]=f}else if(w){o=e[r]=this._prepareModel(a,t);if(!o)continue;g.push(o);o.on("all",this._onModelEvent,this);this._byId[o.cid]=o;if(o.id!=null)this._byId[o.id]=o}if(x)x.push(f||o)}if(S){for(r=0,i=this.length;r<i;++r){if(!b[(o=this.models[r]).cid])y.push(o)}if(y.length)this.remove(y,t)}if(g.length||x&&x.length){if(d)l=true;this.length+=g.length;if(c!=null){for(r=0,i=g.length;r<i;r++){this.models.splice(c+r,0,g[r])}}else{if(x)this.models.length=0;var T=x||g;for(r=0,i=T.length;r<i;r++){this.models.push(T[r])}}}if(l)this.sort({silent:true});if(!t.silent){for(r=0,i=g.length;r<i;r++){(o=g[r]).trigger("add",o,this,t)}if(l||x&&x.length)this.trigger("sort",this,t)}return n?e[0]:e},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++){this._removeReference(this.models[n])}t.previousModels=this.models;this._reset();e=this.add(e,u.extend({silent:true},t));if(!t.silent)this.trigger("reset",this,t);return e},push:function(e,t){return this.add(e,u.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);this.remove(t,e);return t},unshift:function(e,t){return this.add(e,u.extend({at:0},t))},shift:function(e){var t=this.at(0);this.remove(t,e);return t},slice:function(){return i.apply(this.models,arguments)},get:function(e){if(e==null)return void 0;return this._byId[e.id]||this._byId[e.cid]||this._byId[e]},at:function(e){return this.models[e]},where:function(e,t){if(u.isEmpty(e))return t?void 0:[];return this[t?"find":"filter"](function(t){for(var n in e){if(e[n]!==t.get(n))return false}return true})},findWhere:function(e){return this.where(e,true)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");e||(e={});if(u.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(u.bind(this.comparator,this))}if(!e.silent)this.trigger("sort",this,e);return this},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){e=e?u.clone(e):{};if(e.parse===void 0)e.parse=true;var t=e.success;var n=this;e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e);if(t)t(n,r,e);n.trigger("sync",n,r,e)};F(this,e);return this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return false;if(!t.wait)this.add(e,t);var n=this;var r=t.success;t.success=function(e,t,i){if(i.wait)n.add(e,i);if(r)r(e,t,i)};e.save(null,t);return e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(e,t){if(e instanceof p){if(!e.collection)e.collection=this;return e}t=t?u.clone(t):{};t.collection=this;var n=new this.model(e,t);if(!n.validationError)return n;this.trigger("invalid",this,n.validationError,t);return false},_removeReference:function(e){if(this===e.collection)delete e.collection;e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;if(e==="destroy")this.remove(t,r);if(t&&e==="change:"+t.idAttribute){delete this._byId[t.previous(t.idAttribute)];if(t.id!=null)this._byId[t.id]=t}this.trigger.apply(this,arguments)}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(y,function(e){v.prototype[e]=function(){var t=i.call(arguments);t.unshift(this.models);return u[e].apply(u,t)}});var b=["groupBy","countBy","sortBy"];u.each(b,function(e){v.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var w=o.View=function(e){this.cid=u.uniqueId("view");e||(e={});u.extend(this,u.pick(e,S));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var E=/^(\S+)\s*(.*)$/;var S=["model","collection","el","id","attributes","className","tagName","events"];u.extend(w.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(e,t){if(this.$el)this.undelegateEvents();this.$el=e instanceof o.$?e:o.$(e);this.el=this.$el[0];if(t!==false)this.delegateEvents();return this},delegateEvents:function(e){if(!(e||(e=u.result(this,"events"))))return this;this.undelegateEvents();for(var t in e){var n=e[t];if(!u.isFunction(n))n=this[e[t]];if(!n)continue;var r=t.match(E);var i=r[1],s=r[2];n=u.bind(n,this);i+=".delegateEvents"+this.cid;if(s===""){this.$el.on(i,n)}else{this.$el.on(i,s,n)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));if(this.id)e.id=u.result(this,"id");if(this.className)e["class"]=u.result(this,"className");var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,false)}else{this.setElement(u.result(this,"el"),false)}}});o.sync=function(e,t,n){var r=T[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};if(!n.url){i.url=u.result(t,"url")||j()}if(n.data==null&&t&&(e==="create"||e==="update"||e==="patch")){i.contentType="application/json";i.data=JSON.stringify(n.attrs||t.toJSON(n))}if(n.emulateJSON){i.contentType="application/x-www-form-urlencoded";i.data=i.data?{model:i.data}:{}}if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST";if(n.emulateJSON)i.data._method=r;var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}if(i.type!=="GET"&&!n.emulateJSON){i.processData=false}if(i.type==="PATCH"&&x){i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}var a=n.xhr=o.ajax(u.extend(i,n));t.trigger("request",t,a,n);return a};var x=typeof window!=="undefined"&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent);var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var N=o.Router=function(e){e||(e={});if(e.routes)this.routes=e.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var C=/\((.*?)\)/g;var k=/(\(\?)?:\w+/g;var L=/\*\w+/g;var A=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(N.prototype,a,{initialize:function(){},route:function(e,t,n){if(!u.isRegExp(e))e=this._routeToRegExp(e);if(u.isFunction(t)){n=t;t=""}if(!n)n=this[t];var r=this;o.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s);r.trigger.apply(r,["route:"+t].concat(s));r.trigger("route",t,s);o.history.trigger("route",r,t,s)});return this},navigate:function(e,t){o.history.navigate(e,t);return this},_bindRoutes:function(){if(!this.routes)return;this.routes=u.result(this,"routes");var e,t=u.keys(this.routes);while((e=t.pop())!=null){this.route(e,this.routes[e])}},_routeToRegExp:function(e){e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)");return new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var O=o.History=function(){this.handlers=[];u.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var M=/^[#\/]|\s+$/g;var _=/^\/+|\/+$/g;var D=/msie [\w.]+/;var P=/\/$/;var H=/[?#].*$/;O.started=false;u.extend(O.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null){if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");if(!e.indexOf(n))e=e.slice(n.length)}else{e=this.getHash()}}return e.replace(M,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=true;this.options=u.extend({root:"/"},this.options,e);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment();var n=document.documentMode;var r=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/");if(r&&this._wantsHashChange){this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(t)}if(this._hasPushState){o.$(window).on("popstate",this.checkUrl)}else if(this._wantsHashChange&&"onhashchange"in window&&!r){o.$(window).on("hashchange",this.checkUrl)}else if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}this.fragment=t;var i=this.location;var s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!s){this.fragment=this.getFragment(null,true);this.location.replace(this.root+this.location.search+"#"+this.fragment);return true}else if(this._hasPushState&&s&&i.hash){this.fragment=this.getHash().replace(M,"");this.history.replaceState({},document.title,this.root+this.fragment+i.search)}}if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);O.started=false},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe){t=this.getFragment(this.getHash(this.iframe))}if(t===this.fragment)return false;if(this.iframe)this.navigate(t);this.loadUrl()},loadUrl:function(e){e=this.fragment=this.getFragment(e);return u.any(this.handlers,function(t){if(t.route.test(e)){t.callback(e);return true}})},navigate:function(e,t){if(!O.started)return false;if(!t||t===true)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(H,"");if(this.fragment===e)return;this.fragment=e;if(e===""&&n!=="/")n=n.slice(0,-1);if(this._hasPushState){this.history[t.replace?"replaceState":"pushState"]({},document.title,n)}else if(this._wantsHashChange){this._updateHash(this.location,e,t.replace);if(this.iframe&&e!==this.getFragment(this.getHash(this.iframe))){if(!t.replace)this.iframe.document.open().close();this._updateHash(this.iframe.location,e,t.replace)}}else{return this.location.assign(n)}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else{e.hash="#"+t}}});o.history=new O;var B=function(e,t){var n=this;var r;if(e&&u.has(e,"constructor")){r=e.constructor}else{r=function(){return n.apply(this,arguments)}}u.extend(r,n,t);var i=function(){this.constructor=r};i.prototype=n.prototype;r.prototype=new i;if(e)u.extend(r.prototype,e);r.__super__=n.prototype;return r};p.extend=v.extend=N.extend=w.extend=O.extend=B;var j=function(){throw new Error('A "url" property or function must be specified')};var F=function(e,t){var n=t.error;t.error=function(r){if(n)n(e,r,t);e.trigger("error",e,r,t)}}}).call(this);(function(e){if(typeof bootstrap==="function"){bootstrap("promise",e)}else if(typeof exports==="object"){module.exports=e()}else if(typeof define==="function"&&define.amd){define(e)}else if(typeof ses!=="undefined"){if(!ses.ok()){return}else{ses.makeQ=e}}else{Q=e()}})(function(){"use strict";function u(e){return function(){return o.apply(e,arguments)}}function m(e){return e===Object(e)}function g(e){return v(e)==="[object StopIteration]"||e instanceof y}function E(t,n){if(e&&n.stack&&typeof t==="object"&&t!==null&&t.stack&&t.stack.indexOf(w)===-1){var r=[];for(var i=n;!!i;i=i.source){if(i.stack){r.unshift(i.stack)}}r.unshift(t.stack);var s=r.join("\n"+w+"\n");t.stack=S(s)}}function S(e){var t=e.split("\n");var n=[];for(var r=0;r<t.length;++r){var i=t[r];if(!N(i)&&!x(i)&&i){n.push(i)}}return n.join("\n")}function x(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function T(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t){return[t[1],Number(t[2])]}var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n){return[n[1],Number(n[2])]}var r=/.*@(.+):(\d+)$/.exec(e);if(r){return[r[1],Number(r[2])]}}function N(e){var t=T(e);if(!t){return false}var i=t[0];var s=t[1];return i===r&&s>=n&&s<=lt}function C(){if(!e){return}try{throw new Error}catch(t){var n=t.stack.split("\n");var i=n[0].indexOf("@")>0?n[1]:n[2];var s=T(i);if(!s){return}r=s[0];return s[1]}}function k(e,t,n){return function(){if(typeof console!=="undefined"&&typeof console.warn==="function"){console.warn(t+" is deprecated, use "+n+" instead.",(new Error("")).stack)}return e.apply(e,arguments)}}function L(e){if(H(e)){return e}if(B(e)){return G(e)}else{return Q(e)}}function A(){function l(e){r=e;o.source=e;f(t,function(t,n){s(function(){e.promiseDispatch.apply(e,n)})},void 0);t=void 0;n=void 0}var t=[],n=[],r;var i=h(A.prototype);var o=h(_.prototype);o.promiseDispatch=function(e,i,o){var u=a(arguments);if(t){t.push(u);if(i==="when"&&o[1]){n.push(o[1])}}else{s(function(){r.promiseDispatch.apply(r,u)})}};o.valueOf=k(function(){if(t){return o}var e=P(r);if(H(e)){r=e}return e},"valueOf","inspect");o.inspect=function(){if(!r){return{state:"pending"}}return r.inspect()};if(L.longStackSupport&&e){try{throw new Error}catch(u){o.stack=u.stack.substring(u.stack.indexOf("\n")+1)}}i.promise=o;i.resolve=function(e){if(r){return}l(L(e))};i.fulfill=function(e){if(r){return}l(Q(e))};i.reject=function(e){if(r){return}l(K(e))};i.notify=function(e){if(r){return}f(n,function(t,n){s(function(){n(e)})},void 0)};return i}function O(e){if(typeof e!=="function"){throw new TypeError("resolver must be a function.")}var t=A();try{e(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}return t.promise}function M(e){return O(function(t,n){for(var r=0,i=e.length;r<i;r++){L(e[r]).then(t,n)}})}function _(e,t,n){if(t===void 0){t=function(e){return K(new Error("Promise does not support operation: "+e))}}if(n===void 0){n=function(){return{state:"unknown"}}}var r=h(_.prototype);r.promiseDispatch=function(n,i,s){var o;try{if(e[i]){o=e[i].apply(r,s)}else{o=t.call(r,i,s)}}catch(u){o=K(u)}if(n){n(o)}};r.inspect=n;if(n){var i=n();if(i.state==="rejected"){r.exception=i.reason}r.valueOf=k(function(){var e=n();if(e.state==="pending"||e.state==="rejected"){return r}return e.value})}return r}function D(e,t,n,r){return L(e).then(t,n,r)}function P(e){if(H(e)){var t=e.inspect();if(t.state==="fulfilled"){return t.value}}return e}function H(e){return m(e)&&typeof e.promiseDispatch==="function"&&typeof e.inspect==="function"}function B(e){return m(e)&&typeof e.then==="function"}function j(e){return H(e)&&e.inspect().state==="pending"}function F(e){return!H(e)||e.inspect().state==="fulfilled"}function I(e){return H(e)&&e.inspect().state==="rejected"}function W(){if(!U&&typeof window!=="undefined"&&!window.Touch&&window.console){console.warn("[Q] Unhandled rejection reasons (should be empty):",q)}U=true}function X(){for(var e=0;e<q.length;e++){var t=q[e];console.warn("Unhandled rejection reason:",t)}}function V(){q.length=0;R.length=0;U=false;if(!z){z=true;if(typeof process!=="undefined"&&process.on){process.on("exit",X)}}}function $(e,t){if(!z){return}R.push(e);if(t&&typeof t.stack!=="undefined"){q.push(t.stack)}else{q.push("(no stack) "+t)}W()}function J(e){if(!z){return}var t=l(R,e);if(t!==-1){R.splice(t,1);q.splice(t,1)}}function K(e){var t=_({when:function(t){if(t){J(this)}return t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});$(t,e);return t}function Q(e){return _({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){if(t===null||t===void 0){return e.apply(void 0,n)}else{return e[t].apply(e,n)}},apply:function(t,n){return e.apply(t,n)},keys:function(){return d(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function G(e){var t=A();s(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}});return t.promise}function Y(e){return _({isDef:function(){}},function(n,r){return it(e,n,r)},function(){return L(e).inspect()})}function Z(e,t,n){return L(e).spread(t,n)}function et(e){return function(){function t(e,t){var s;if(b){try{s=n[e](t)}catch(o){return K(o)}if(s.done){return s.value}else{return D(s.value,r,i)}}else{try{s=n[e](t)}catch(o){if(g(o)){return o.value}else{return K(o)}}return D(s,r,i)}}var n=e.apply(this,arguments);var r=t.bind(t,"next");var i=t.bind(t,"throw");return r()}}function tt(e){L.done(L.async(e)())}function nt(e){throw new y(e)}function rt(e){return function(){return Z([this,st(arguments)],function(t,n){return e.apply(t,n)})}}function it(e,t,n){return L(e).dispatch(t,n)}function st(e){return D(e,function(e){var t=0;var n=A();f(e,function(r,i,s){var o;if(H(i)&&(o=i.inspect()).state==="fulfilled"){e[s]=o.value}else{++t;D(i,function(r){e[s]=r;if(--t===0){n.resolve(e)}},n.reject,function(e){n.notify({index:s,value:e})})}},void 0);if(t===0){n.resolve(e)}return n.promise})}function ot(e){return D(e,function(e){e=c(e,L);return D(st(c(e,function(e){return D(e,i,i)})),function(){return e})})}function ut(e){return L(e).allSettled()}function at(e,t){return L(e).then(void 0,void 0,t)}function ft(e,t){return L(e).nodeify(t)}var e=false;try{throw new Error}catch(t){e=!!t.stack}var n=C();var r;var i=function(){};var s=function(){function o(){while(e.next){e=e.next;var t=e.task;e.task=void 0;var r=e.domain;if(r){e.domain=void 0;r.enter()}try{t()}catch(s){if(i){if(r){r.exit()}setTimeout(o,0);if(r){r.enter()}throw s}else{setTimeout(function(){throw s},0)}}if(r){r.exit()}}n=false}var e={task:void 0,next:null};var t=e;var n=false;var r=void 0;var i=false;s=function(e){t=t.next={task:e,domain:i&&process.domain,next:null};if(!n){n=true;r()}};if(typeof process!=="undefined"&&process.nextTick){i=true;r=function(){process.nextTick(o)}}else if(typeof setImmediate==="function"){if(typeof window!=="undefined"){r=setImmediate.bind(window,o)}else{r=function(){setImmediate(o)}}}else if(typeof MessageChannel!=="undefined"){var u=new MessageChannel;u.port1.onmessage=function(){r=a;u.port1.onmessage=o;o()};var a=function(){u.port2.postMessage(0)};r=function(){setTimeout(o,0);a()}}else{r=function(){setTimeout(o,0)}}return s}();var o=Function.call;var a=u(Array.prototype.slice);var f=u(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(arguments.length===1){do{if(n in this){t=this[n++];break}if(++n>=r){throw new TypeError}}while(1)}for(;n<r;n++){if(n in this){t=e(t,this[n],n)}}return t});var l=u(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++){if(this[t]===e){return t}}return-1});var c=u(Array.prototype.map||function(e,t){var n=this;var r=[];f(n,function(i,s,o){r.push(e.call(t,s,o,n))},void 0);return r});var h=Object.create||function(e){function t(){}t.prototype=e;return new t};var p=u(Object.prototype.hasOwnProperty);var d=Object.keys||function(e){var t=[];for(var n in e){if(p(e,n)){t.push(n)}}return t};var v=u(Object.prototype.toString);var y;if(typeof ReturnValue!=="undefined"){y=ReturnValue}else{y=function(e){this.value=e}}var b;try{new Function("(function* (){ yield 1; })");b=true}catch(t){b=false}var w="From previous event:";L.resolve=L;L.nextTick=s;L.longStackSupport=false;L.defer=A;A.prototype.makeNodeResolver=function(){var e=this;return function(t,n){if(t){e.reject(t)}else if(arguments.length>2){e.resolve(a(arguments,1))}else{e.resolve(n)}}};L.promise=O;L.passByCopy=function(e){return e};_.prototype.passByCopy=function(){return this};L.join=function(e,t){return L(e).join(t)};_.prototype.join=function(e){return L([this,e]).spread(function(e,t){if(e===t){return e}else{throw new Error("Can't join: not the same: "+e+" "+t)}})};L.race=M;_.prototype.race=function(){return this.then(L.race)};L.makePromise=_;_.prototype.toString=function(){return"[object Promise]"};_.prototype.then=function(e,t,n){function u(t){try{return typeof e==="function"?e(t):t}catch(n){return K(n)}}function a(e){if(typeof t==="function"){E(e,r);try{return t(e)}catch(n){return K(n)}}return K(e)}function f(e){return typeof n==="function"?n(e):e}var r=this;var i=A();var o=false;s(function(){r.promiseDispatch(function(e){if(o){return}o=true;i.resolve(u(e))},"when",[function(e){if(o){return}o=true;i.resolve(a(e))}])});r.promiseDispatch(void 0,"when",[void 0,function(e){var t;var n=false;try{t=f(e)}catch(r){n=true;if(L.onerror){L.onerror(r)}else{throw r}}if(!n){i.notify(t)}}]);return i.promise};L.when=D;_.prototype.thenResolve=function(e){return this.then(function(){return e})};L.thenResolve=function(e,t){return L(e).thenResolve(t)};_.prototype.thenReject=function(e){return this.then(function(){throw e})};L.thenReject=function(e,t){return L(e).thenReject(t)};L.nearer=P;L.isPromise=H;L.isPromiseAlike=B;L.isPending=j;_.prototype.isPending=function(){return this.inspect().state==="pending"};L.isFulfilled=F;_.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"};L.isRejected=I;_.prototype.isRejected=function(){return this.inspect().state==="rejected"};var q=[];var R=[];var U=false;var z=true;L.resetUnhandledRejections=V;L.getUnhandledReasons=function(){return q.slice()};L.stopUnhandledRejectionTracking=function(){V();if(typeof process!=="undefined"&&process.on){process.removeListener("exit",X)}z=false};V();L.reject=K;L.fulfill=Q;L.master=Y;L.spread=Z;_.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)};L.async=et;L.spawn=tt;L["return"]=nt;L.promised=rt;L.dispatch=it;_.prototype.dispatch=function(e,t){var n=this;var r=A();s(function(){n.promiseDispatch(r.resolve,e,t)});return r.promise};L.get=function(e,t){return L(e).dispatch("get",[t])};_.prototype.get=function(e){return this.dispatch("get",[e])};L.set=function(e,t,n){return L(e).dispatch("set",[t,n])};_.prototype.set=function(e,t){return this.dispatch("set",[e,t])};L.del=L["delete"]=function(e,t){return L(e).dispatch("delete",[t])};_.prototype.del=_.prototype["delete"]=function(e){return this.dispatch("delete",[e])};L.mapply=L.post=function(e,t,n){return L(e).dispatch("post",[t,n])};_.prototype.mapply=_.prototype.post=function(e,t){return this.dispatch("post",[e,t])};L.send=L.mcall=L.invoke=function(e,t){return L(e).dispatch("post",[t,a(arguments,2)])};_.prototype.send=_.prototype.mcall=_.prototype.invoke=function(e){return this.dispatch("post",[e,a(arguments,1)])};L.fapply=function(e,t){return L(e).dispatch("apply",[void 0,t])};_.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])};L["try"]=L.fcall=function(e){return L(e).dispatch("apply",[void 0,a(arguments,1)])};_.prototype.fcall=function(){return this.dispatch("apply",[void 0,a(arguments)])};L.fbind=function(e){var t=L(e);var n=a(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(a(arguments))])}};_.prototype.fbind=function(){var e=this;var t=a(arguments);return function(){return e.dispatch("apply",[this,t.concat(a(arguments))])}};L.keys=function(e){return L(e).dispatch("keys",[])};_.prototype.keys=function(){return this.dispatch("keys",[])};L.all=st;_.prototype.all=function(){return st(this)};L.allResolved=k(ot,"allResolved","allSettled");_.prototype.allResolved=function(){return ot(this)};L.allSettled=ut;_.prototype.allSettled=function(){return this.then(function(e){return st(c(e,function(e){function t(){return e.inspect()}e=L(e);return e.then(t,t)}))})};L.fail=L["catch"]=function(e,t){return L(e).then(void 0,t)};_.prototype.fail=_.prototype["catch"]=function(e){return this.then(void 0,e)};L.progress=at;_.prototype.progress=function(e){return this.then(void 0,void 0,e)};L.fin=L["finally"]=function(e,t){return L(e)["finally"](t)};_.prototype.fin=_.prototype["finally"]=function(e){e=L(e);return this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})};L.done=function(e,t,n,r){return L(e).done(t,n,r)};_.prototype.done=function(e,t,n){var r=function(e){s(function(){E(e,i);if(L.onerror){L.onerror(e)}else{throw e}})};var i=e||t||n?this.then(e,t,n):this;if(typeof process==="object"&&process&&process.domain){r=process.domain.bind(r)}i.then(void 0,r)};L.timeout=function(e,t,n){return L(e).timeout(t,n)};_.prototype.timeout=function(e,t){var n=A();var r=setTimeout(function(){n.reject(new Error(t||"Timed out after "+e+" ms"))},e);this.then(function(e){clearTimeout(r);n.resolve(e)},function(e){clearTimeout(r);n.reject(e)},n.notify);return n.promise};L.delay=function(e,t){if(t===void 0){t=e;e=void 0}return L(e).delay(t)};_.prototype.delay=function(e){return this.then(function(t){var n=A();setTimeout(function(){n.resolve(t)},e);return n.promise})};L.nfapply=function(e,t){return L(e).nfapply(t)};_.prototype.nfapply=function(e){var t=A();var n=a(e);n.push(t.makeNodeResolver());this.fapply(n).fail(t.reject);return t.promise};L.nfcall=function(e){var t=a(arguments,1);return L(e).nfapply(t)};_.prototype.nfcall=function(){var e=a(arguments);var t=A();e.push(t.makeNodeResolver());this.fapply(e).fail(t.reject);return t.promise};L.nfbind=L.denodeify=function(e){var t=a(arguments,1);return function(){var n=t.concat(a(arguments));var r=A();n.push(r.makeNodeResolver());L(e).fapply(n).fail(r.reject);return r.promise}};_.prototype.nfbind=_.prototype.denodeify=function(){var e=a(arguments);e.unshift(this);return L.denodeify.apply(void 0,e)};L.nbind=function(e,t){var n=a(arguments,2);return function(){function s(){return e.apply(t,arguments)}var r=n.concat(a(arguments));var i=A();r.push(i.makeNodeResolver());L(s).fapply(r).fail(i.reject);return i.promise}};_.prototype.nbind=function(){var e=a(arguments,0);e.unshift(this);return L.nbind.apply(void 0,e)};L.nmapply=L.npost=function(e,t,n){return L(e).npost(t,n)};_.prototype.nmapply=_.prototype.npost=function(e,t){var n=a(t||[]);var r=A();n.push(r.makeNodeResolver());this.dispatch("post",[e,n]).fail(r.reject);return r.promise};L.nsend=L.nmcall=L.ninvoke=function(e,t){var n=a(arguments,2);var r=A();n.push(r.makeNodeResolver());L(e).dispatch("post",[t,n]).fail(r.reject);return r.promise};_.prototype.nsend=_.prototype.nmcall=_.prototype.ninvoke=function(e){var t=a(arguments,1);var n=A();t.push(n.makeNodeResolver());this.dispatch("post",[e,t]).fail(n.reject);return n.promise};L.nodeify=ft;_.prototype.nodeify=function(e){if(e){this.then(function(t){s(function(){e(null,t)})},function(t){s(function(){e(t)})})}else{return this}};var lt=C();return L});(function(){var e,t,n,r,i,s,o,u,a;e=typeof exports!=="undefined";if(e){r=exports}else{i=(u=this.intermine)!=null?u:this.intermine={};r=(a=i.imjs)!=null?a:i.imjs={}}r.VERSION="unknown";if(e){n=require("fs");s=require("path");if(process.mainModule!=null){t=n.readFileSync(s.join(__dirname,"..","package.json"),"utf8");o=JSON.parse(t);r.VERSION=o.version}}else{r.VERSION="2.10.6"}}).call(this);(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p;n=typeof exports!=="undefined";e=typeof console!=="undefined";t=typeof JSON!=="undefined";r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];if(!n){if(!t){jQuery.getScript("http://cdn.intermine.org/js/json3/3.2.2/json3.min.js")}if(Object.keys==null){s=Object.prototype.hasOwnProperty;i=!{toString:null}.propertyIsEnumerable("toString");Object.keys=function(e){var t,n,o,u,a;if(typeof e!=="object"&&typeof e!==""||e===null){throw new TypeError("Object.keys called on a non-object")}t=function(){var t;t=[];for(n in e){if(s.call(e,n)){t.push(n)}}return t}();if(i){for(u=0,a=r.length;u<a;u++){o=r[u];if(s.call(e,o)){t.push(o)}}}return t}}if(Array.prototype.map==null){Array.prototype.map=function(e){var t,n,r,i;i=[];for(n=0,r=this.length;n<r;n++){t=this[n];i.push(e(t))}return i}}if(Array.prototype.filter==null){Array.prototype.filter=function(e){var t,n,r,i;i=[];for(n=0,r=this.length;n<r;n++){t=this[n];if(e(t)){i.push(t)}}return i}}if(Array.prototype.reduce==null){Array.prototype.reduce=function(e,t){var n,r,i,s,o;i=this.slice();n=arguments.length<2?i.pop():t;for(s=0,o=i.length;s<o;s++){r=i[s];n=e(n,r)}return n}}if(Array.prototype.forEach==null){Array.prototype.forEach=function(e,t){var n,r,i,s,o;if(!e){throw new Error("No function provided")}o=[];for(n=i=0,s=this.length;i<s;n=++i){r=this[n];o.push(e.call(t!=null?t:this,r,n,this))}return o}}if(!e){this.console={log:function(){},error:function(){},debug:function(){}};if(typeof window!=="undefined"&&window!==null){window.console=this.console}}if((l=console.log)==null){console.log=function(){}}if((c=console.error)==null){console.error=function(){}}if((h=console.debug)==null){console.debug=function(){}}if(console.log.apply==null){console.log("Your console needs patching.");p=["log","error","debug"];u=function(e){var t;t=console[e];return console[e]=function(e){return t(e)}};for(a=0,f=p.length;a<f;a++){o=p[a];u(o)}}}}).call(this);(function(e,t){var n=e._,r=e.jQuery;if(typeof r==="undefined"){return null}var i=r;if(!i.support.cors&&window.XDomainRequest){console.log("Patching IE x-domain request support");var s=/^https?:\/\//i;var o=/^get|post$/i;var u=new RegExp("^"+location.protocol,"i");var a=/\/json/i;var f=/\/xml/i;var l=function(e,t){this.userOptions=e;this.options=t;this.userType=(e.dataType||"").toLowerCase();n.bindAll(this)};l.prototype.constructor=l;l.prototype.send=function(e,t){this.xdr=new XDomainRequest;this.complete=t;var n=this.xdr;if(/^\d+$/.test(this.userOptions.timeout)){n.timeout=this.userOptions.timeout}n.ontimeout=function(){t(500,"timeout")};n.onerror=function(){t(500,"error",{text:n.responseText})};n.onload=this.onLoad;var r=this.userOptions.data&&i.param(this.userOptions.data)||"";n.open(this.options.type,this.options.url);n.send(r)};l.prototype.respond=function(e,t,n,i){var s=this.xdr;s.onload=s.onerror=s.ontimeout=s.onprogress=r.noop;delete this.xdr;r.event.trigger("ajaxStop");this.complete(e,t,n,i)};l.prototype.abort=function(){if(xdr){xdr.abort()}};l.prototype.onLoad=function(){var e=this.xdr;var n="Content-Length: "+e.responseText.length+"\r\nContent-Type: "+e.contentType;var r={code:200,message:"success"};var s={text:e.responseText};try{if(this.userType==="json"||this.userType!=="text"&&a.test(e.contentType)){try{s.json=i.parseJSON(e.responseText)}catch(o){r.code=500;r.message="parseerror"}}else if(this.userType==="xml"||this.userType!=="text"&&f.test(e.contentType)){var u=new ActiveXObject("Microsoft.XMLDOM");u.async=false;try{u.loadXML(e.responseText)}catch(o){u=t}if(!u||!u.documentElement||u.getElementsByTagName("parsererror").length){r.code=500;r.message="parseerror";throw"Invalid XML: "+e.responseText}s.xml=u}}catch(l){throw l}finally{this.complete(r.code,r.message,s,n)}};r.ajaxTransport("text html xml json",function(e,t,n){if(e.crossDomain&&e.async&&o.test(e.type)&&s.test(t.url)&&u.test(t.url)){return new l(t,e)}});r.support.cors=true}}).call(this,typeof exports==="undefined"?this:exports);(function(){var e,t,n,r,i;e=typeof exports!=="undefined";if(e){t=exports}else{n=(r=this.intermine)!=null?r:this.intermine={};t=(i=n.constants)!=null?i:n.constants={}}t.ACCEPT_HEADER={json:"application/json",jsonobjects:"application/json;type=objects",jsontable:"application/json;type=table",jsonrows:"application/json;type=rows",jsoncount:"application/json;type=count",jsonp:"application/javascript",jsonpobjects:"application/javascript;type=objects",jsonptable:"application/javascript;type=table",jsonprows:"application/javascript;type=rows",jsonpcount:"application/javascript;type=count"}}).call(this);(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d=[].slice,v={}.hasOwnProperty;t=typeof exports!=="undefined";u=typeof exports!=="undefined"&&exports!==null?exports:this;if(t){e=require("underscore.deferred").Deferred;l=require("underscore")._}else{e=u.jQuery.Deferred;l=u._;if((h=u.intermine)==null){u.intermine={}}if((p=(c=u.intermine).funcutils)==null){c.funcutils={}}u=u.intermine.funcutils}u.curry=r=function(){var e,t;t=arguments[0],e=2<=arguments.length?d.call(arguments,1):[];return function(){var n;n=1<=arguments.length?d.call(arguments,0):[];return t.apply(null,e.concat(n))}};u.error=function(t){return e(function(){return this.reject(new Error(t))}).promise()};u.success=a=function(){var t;t=1<=arguments.length?d.call(arguments,0):[];return e(function(){return this.resolve.apply(this,t)}).promise()};u.fold=i=function(e){return function(t,n){var r,i,s;if(arguments.length===1){n=(t!=null?t.slice():void 0)||t;t=(n!=null?n.shift():void 0)||{}}if(n==null){throw new Error("xs is null")}if(n.reduce!=null){return n.reduce(e,t)}else{i=t;for(r in n){s=n[r];i=i!=null?e(i,r,s):{k:s}}return i}}};u.take=function(e){return function(t){if(e!=null){return t.slice(0,e-1+1||9e9)}else{return t}}};u.filter=function(e){return function(t){var n,r,i,s;s=[];for(r=0,i=t.length;r<i;r++){n=t[r];if(e(n)){s.push(n)}}return s}};u.omap=function(e){var t;t=i(function(t,n,r){var i,s,o;o=e(n,r),i=o[0],s=o[1];t[i]=s;return t});return function(e){return t({},e)}};u.copy=u.omap(function(e,t){return[e,t]});u.partition=function(e){return function(t){var n,r,i,s,o;r=[];n=[];for(s=0,o=t.length;s<o;s++){i=t[s];if(e(i)){r.push(i)}else{n.push(i)}}return[r,n]}};u.id=s=function(e){return e};u.concatMap=function(e){return function(t){var n,r,i,s,o,u,a;i=void 0;for(u=0,a=t.length;u<a;u++){o=t[u];n=e(o);i=function(){var e;if(i===void 0){return n}else if((e=typeof n)==="string"||e==="number"){return i+n}else if(n.slice!=null){return i.concat(n)}else{for(r in n){s=n[r];i[r]=s}return i}}()}return i}};u.flatMap=u.concatMap;u.sum=u.concatMap(s);u.AND=function(e,t){return e&&t};u.OR=function(e,t){return e||t};u.NOT=function(e){return!e};u.any=function(e,t){var n,r,i;if(t==null){t=s}for(r=0,i=e.length;r<i;r++){n=e[r];if(t(n)){return true}}return false};u.invoke=function(){var t,n;n=arguments[0],t=2<=arguments.length?d.call(arguments,1):[];return function(r){var i;if((i=r[n])!=null?i.apply:void 0){return r[n].apply(r,t)}else{return e().reject("No method: "+n).promise()}}};u.invokeWith=function(e,t,n){if(t==null){t=[]}if(n==null){n=null}return function(r){return r[e].apply(n||r,t)}};u.get=function(e){return function(t){return t[e]}};u.set=function(e,t){return function(n){var r,i;if(arguments.length===2){n[e]=t}else{for(r in e){if(!v.call(e,r))continue;i=e[r];n[r]=i}}return n}};u.flip=function(e){return function(){var t;t=1<=arguments.length?d.call(arguments,0):[];return e.apply(null,t.reverse())}};n=function(e,t){return"This service requires a service at version "+e+" or above. This one is at "+t};u.REQUIRES_VERSION=function(e,t,r){return e.fetchVersion().pipe(function(e){if(e>=t){return r()}else{return error(n(t,e))}})};u.dejoin=function(e){var t,n,r,i,s;s=e.views;for(r=0,i=s.length;r<i;r++){n=s[r];t=n.split(".");if(t.length>2){e.addJoin(t.slice(1,-1).join("."))}}return e};f=i(function(e,t){return e.then(t)});u.sequence=function(){var e;e=1<=arguments.length?d.call(arguments,0):[];return f(a(),l.flatten(e))};o=i(function(e,t){var n,r;n=t[0],r=t[1];if(e[n]!=null){throw new Error("Duplicate key: "+n)}e[n]=r;return e});u.pairsToObj=function(e){return o({},e)}}).call(this);(function(){var e,t,n,r,i,s,o=[].slice;e=typeof exports!=="undefined";i=typeof exports!=="undefined"&&exports!==null?exports:this;if(e){r=i}else{r=i.intermine;if(r==null){r=i.intermine={}}}if((s=r.compression)==null){r.compression={}}n=function(e){var t,n,r;t={};for(n=r=0;0<=e?r<=e:r>=e;n=0<=e?++r:--r){t[String.fromCharCode(n)]=n}return t};t=function(e){var t,n,r;r=[];for(t=n=0;0<=e?n<=e:n>=e;t=0<=e?++n:--n){r.push(String.fromCharCode(t))}return r};r.compression.LZW={encode:function(e){var t,r,i,s,o,u,a,f,l;i=(e+"").split("");u=[];a="";o=256;s=n(o);for(f=0,l=i.length;f<l;f++){t=i[f];r=a+t;if(r in s){a=r}else{u.push(s[a]);s[r]=o++;a=String(t)}}if(a!==""){u.push(s[a])}return u},decode:function(e){var n,r,i,s,u,a,f,l,c,h;i=256;r=t(i);s="";u=e[0],f=2<=e.length?o.call(e,1):[];l=String.fromCharCode(u);a=[l];for(c=0,h=f.length;c<h;c++){n=f[c];s=function(){if(r[n]){return r[n]}else if(n===i){return l+l.charAt(0)}else{throw new Error("Key is "+n)}}();a.push(s);r[i++]=l+s.charAt(0);l=s}return a.join("")}}}).call(this);(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d;f=this.jQuery,h=this._,a=this.intermine,r=this.XDomainRequest;o=(p=a.http)!=null?p:a.http={};e=a.constants.ACCEPT_HEADER;d=a.funcutils,s=d.get,i=d.error;(function(){var t,n,r;t={};for(n in e){r=e[n];t["text "+n]=f.parseJSON}return f.ajaxSetup({accepts:e,contents:{json:/json/},converters:t})})();t=function(e){return f.Deferred(function(){if(e.wasSuccessful){return this.resolve(e)}else{return this.reject(e.error,e)}})};n=function(e){if(e==null){e=function(){}}return function(t,n,r){if((t!=null?t.status:void 0)===0){return}try{return e(JSON.parse(t.responseText).error)}catch(r){return e(n)}}};u=r!=null;l={PUT:"POST",DELETE:"GET"};if(u){o.getMethod=function(e){var t;return(t=l[e])!=null?t:e};o.supports=function(e){return!(e in l)}}else{o.getMethod=function(e){return e};o.supports=function(){return true}}c=function(e){var t,n,r,i;if(h.isArray(e)){if(!e.length){return[]}n=e[0],r=e[1],t=e[2];i=function(e){return h.each(e,n!=null?n:function(){})};return[i,r,t]}else{i=function(t){return h.each(t,e!=null?e:function(){})};return[i]}};o.iterReq=function(e,t,n){return function(r,i,o,u,a){var f,l,c;if(i==null){i={}}if(o==null){o=function(){}}if(u==null){u=function(){}}if(a==null){a=function(){}}if(arguments.length===2&&h.isFunction(i)){c=[i,{}],o=c[0],i=c[1]}f=h.extend({format:n},i,{query:r.toXML()});l=function(e){return e.forEach(o)};return this.makeRequest(e,t,f).fail(u).pipe(s("results")).done(o).done(a)}};o.doReq=function(e){var t,r;r=e.error||this.errorHandler;e.error=n(r);t=f.Deferred(function(){var t,r=this;t=f.ajax(e);t.then(function(){return r.resolve.apply(r,arguments)});return t.fail(n(function(e){return r.reject(e)}))});return t.promise()}}).call(this);(function(){var e,t,n,r,i,s,o,u;t=typeof exports!=="undefined";if(t){e=require("xmldom").DOMParser;o=exports;n=new e;s=function(e){var t;if(!(e!=null?e.match("<.*>"):void 0)){e=e+">"}try{if(e){t=n.parseFromString(e,"text/xml")}}catch(r){t=void 0}if(!t||!t.documentElement||t.getElementsByTagName("parsererror").length){throw new Error("Invalid xml: "+e)}return t}}else{i=this.jQuery,r=this.intermine;o=(u=r.xml)!=null?u:r.xml={};s=i.parseXML}o.parse=s}).call(this);(function(){var e,t,n,r,i,s;e=typeof exports!=="undefined";i=typeof exports!=="undefined"&&exports!==null?exports:(s=this.intermine)!=null?s:this.intermine={};n=function(e,t){var n,r,i;i=[];for(n in e){r=e[n];i.push(t[n]=r)}return i};r=["attributes","references","collections"];t=function(){function e(e){var t,i,s,o,u,a;this.name=e.name,this.attributes=e.attributes,this.references=e.references,this.collections=e.collections;this.fields={};this.__parents__=arguments[0]["extends"];for(o=0,u=r.length;o<u;o++){i=r[o];n(this[i],this.fields)}a=this.collections;for(s in a){t=a[s];t.isCollection=true}}e.prototype.toString=function(){var e,t;return"[Table name="+this.name+", fields=["+function(){var n,r;n=this.fields;r=[];for(e in n){t=n[e];r.push(e)}return r}.call(this)+"]]"};e.prototype.parents=function(){var e;return((e=this.__parents__)!=null?e:[]).slice()};return e}();i.Table=t}).call(this);(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y=function(e,t){return function(){return e.apply(t,arguments)}},b=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++){if(t in this&&this[t]===e)return t}return-1};n=typeof exports!=="undefined";g=typeof exports!=="undefined"&&exports!==null?exports:this;if(n){c=g;m=require("underscore")._;t=(e=require("underscore.deferred")).Deferred;v=require("./util")}else{m=g._;t=(e=g.jQuery).Deferred;c=g.intermine;v=c.funcutils}u=v.concatMap,l=v.get,o=v.any,p=v.set,a=v.copy,d=v.success,f=v.error;r={};i={};h=function(e,t,n){var r,i,s;return""+(e!=null?e.name:void 0)+"|"+(e!=null?(s=e.service)!=null?s.root:void 0:void 0)+"|"+t+":"+function(){var e;e=[];for(r in n){i=n[r];e.push(""+r+"="+i)}return e}()};s=function(){function e(e){var t;this.root=e.root,this.model=e.model,this.descriptors=e.descriptors,this.subclasses=e.subclasses,this.displayName=e.displayName,this.ident=e.ident;this.allDescriptors=y(this.allDescriptors,this);this.getChildNodes=y(this.getChildNodes,this);this.getDisplayName=y(this.getDisplayName,this);this.isa=y(this.isa,this);this.append=y(this.append,this);this.getParent=y(this.getParent,this);this.getEndClass=y(this.getEndClass,this);this.containsCollection=y(this.containsCollection,this);this.isCollection=y(this.isCollection,this);this.isReference=y(this.isReference,this);this.isClass=y(this.isClass,this);this.isAttribute=y(this.isAttribute,this);this.isRoot=y(this.isRoot,this);this.end=m.last(this.descriptors);if((t=this.ident)==null){this.ident=h(this.model,this,this.subclasses)}}e.prototype.isRoot=function(){return this.descriptors.length===0};e.prototype.isAttribute=function(){return this.end!=null&&!(this.end.referencedType!=null)};e.prototype.isClass=function(){return this.isRoot()||this.end.referencedType!=null};e.prototype.isReference=function(){var e;return((e=this.end)!=null?e.referencedType:void 0)!=null};e.prototype.isCollection=function(){var e,t;return(e=(t=this.end)!=null?t.isCollection:void 0)!=null?e:false};e.prototype.containsCollection=function(){return o(this.descriptors,function(e){return e.isCollection})};e.prototype.getEndClass=function(){var e;return this.model.classes[this.subclasses[this.toString()]||((e=this.end)!=null?e.referencedType:void 0)]||this.root};e.prototype.getParent=function(){var t;if(this.isRoot()){throw new Error("Root paths do not have parents")}t={root:this.root,model:this.model,descriptors:m.initial(this.descriptors),subclasses:this.subclasses};return new e(t)};e.prototype.append=function(t){var n,r;if(this.isAttribute()){throw new Error(""+this+" is an attribute.")}r=m.isString(t)?this.getType().fields[t]:t;if(r==null){throw new Error(""+t+" is not a field of "+this.getType())}n={root:this.root,model:this.model,descriptors:this.descriptors.concat(r),subclasses:this.subclasses};return new e(n)};e.prototype.isa=function(e){var t,n;if(this.isAttribute()){return this.getType()===e}else{t=e.name?e.name:""+e;n=this.getType();return t===n.name||b.call(this.model.getAncestorsOf(n),t)>=0}};e.prototype.getDisplayName=function(e){var t,n,i,s,o,c=this;if(n=this.displayName){return d(n)}if((o=this.namePromise)==null){this.namePromise=(t=r[this.ident])?d(t):!(this.model.service!=null)?f("No service"):(s="model"+u(function(e){return"/"+e.name})(this.allDescriptors()),i=p({format:"json"})(a(this.subclasses)),this.model.service.get(s,i).then(l("display")).done(function(e){var t,n;return(n=r[t=c.ident])!=null?n:r[t]=e}))}return this.namePromise.done(e)};e.prototype.getChildNodes=function(){var e,t,n,r,i;r=((n=this.getEndClass())!=null?n.fields:void 0)||{};i=[];for(t in r){e=r[t];i.push(this.append(e))}return i};e.prototype.allDescriptors=function(){return[this.root].concat(this.descriptors)};e.prototype.toString=function(){return this.allDescriptors().map(l("name")).join(".")};e.prototype.equals=function(e){return e&&e.ident!=null&&this.ident===e.ident};e.prototype.getType=function(){var e,t;return((e=this.end)!=null?(t=e.type)!=null?t.replace(/java\.lang\./,""):void 0:void 0)||this.getEndClass()};return e}();s.prototype.toPathString=s.prototype.toString;s.parse=function(e,t,n){var r,o,u,a,f,l,c,p,d;if(n==null){n={}}f=h(e,t,n);if(r=i[f]){return r}p=(t+"").split(".");d=o=e.classes[p.shift()];l=d.name;u=function(){var r,i,s,u;u=[];for(r=0,i=p.length;r<i;r++){c=p[r];a=(o!=null?o.fields[c]:void 0)||((s=o=e.classes[n[l]])!=null?s.fields[c]:void 0);if(!a){throw new Error("Could not find "+c+" in "+o+" when parsing "+t)}l+="."+c;o=e.classes[a.type||a.referencedType];u.push(a)}return u}();return i[f]=new s({root:d,model:e,descriptors:u,subclasses:n,ident:f})};s.flushCache=function(){i={};return r={}};c.PathInfo=s}).call(this);(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d=function(e,t){return function(){return e.apply(t,arguments)}},v=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++){if(t in this&&this[t]===e)return t}return-1};n=typeof exports!=="undefined";h=typeof exports!=="undefined"&&exports!==null?exports:this;if(n){u=h;c=require("underscore")._;t=(e=require("underscore.deferred")).Deferred;s=require("./table").Table;i=require("./path").PathInfo;l=require("./util").omap}else{c=h._;t=(e=h.jQuery).Deferred;u=(p=h.intermine)!=null?p:h.intermine={};s=u.Table,i=u.PathInfo;l=u.funcutils.omap}o=c.flatten,a=c.intersection;f=l(function(e,t){return[e,new s(t)]});r=function(){function e(e){var t;this.name=e.name,t=e.classes;this.findCommonType=d(this.findCommonType,this);this.findSharedAncestor=d(this.findSharedAncestor,this);this.getAncestorsOf=d(this.getAncestorsOf,this);this.getSubclassesOf=d(this.getSubclassesOf,this);this.getPathInfo=d(this.getPathInfo,this);this.classes=f(t)}e.prototype.getPathInfo=function(e,t){return i.parse(this,e,t)};e.prototype.getSubclassesOf=function(e){var t,n,r,i,s;n=e&&e.name?e:this.classes[e];if(n==null){throw new Error(""+e+" is not a table")}r=[n.name];i=this.classes;for(c in i){t=i[c];if(s=n.name,v.call(t.parents(),s)>=0){r=r.concat(this.getSubclassesOf(t))}}return r};e.prototype.getAncestorsOf=function(e){var t,n,r,i,s;n=e&&e.name?e:this.classes[e];if(n==null){throw new Error(""+e+" is not a table")}t=n.parents();for(i=0,s=t.length;i<s;i++){r=t[i];t.push(this.getAncestorsOf(r))}return o(t)};e.prototype.findSharedAncestor=function(e,t){var n,r,i;if(t===null||e===null){return null}if(e===t){return e}n=this.getAncestorsOf(e);if(v.call(n,t)>=0){return t}r=this.getAncestorsOf(t);if(v.call(r,e)>=0){return e}return(i=a(n,r).shift())!=null?i:null};e.prototype.findCommonType=function(e){if(e==null){e=[]}return e.reduce(this.findSharedAncestor)};return e}();r.prototype.makePath=r.prototype.getPathInfo;r.prototype.findCommonTypeOfMultipleClasses=r.prototype.findCommonType;r.load=function(e){return new r(e)};r.INTEGRAL_TYPES=["int","Integer","long","Long"];r.FRACTIONAL_TYPES=["double","Double","float","Float"];r.NUMERIC_TYPES=r.INTEGRAL_TYPES.concat(r.FRACTIONAL_TYPES);r.BOOLEAN_TYPES=["boolean","Boolean"];u.Model=r}).call(this);(function(){var e,t,n,r,i,s,o,u,a=function(e,t){return function(){return e.apply(t,arguments)}};t=typeof exports!=="undefined";u=typeof exports!=="undefined"&&exports!==null?exports:this;if(t){e=require("underscore.deferred").Deferred;o=require("underscore")._;i=require("./util").error;s=u}else{o=u._;e=u.jQuery.Deferred;s=u.intermine;i=s.funcutils.error}r=function(e,t,n){return e.service.manageUserPreferences(n,t).done(function(t){return e.preferences=t})};n=function(){function e(e,t){var n;this.service=e;this.username=t.username,this.preferences=t.preferences;this.refresh=a(this.refresh,this);this.clearPreferences=a(this.clearPreferences,this);this.clearPreference=a(this.clearPreference,this);this.setPreferences=a(this.setPreferences,this);this.setPreference=a(this.setPreference,this);this.hasPreferences=this.preferences!=null;if((n=this.preferences)==null){this.preferences={}}}e.prototype.setPreference=function(e,t){var n;if(o.isString(e)){n={};n[e]=t}else if(!(t!=null)){n=e}else{i("Incorrect arguments to setPreference")}return this.setPreferences(n)};e.prototype.setPreferences=function(e){return r(this,e,"POST")};e.prototype.clearPreference=function(e){return r(this,{key:e},"DELETE")};e.prototype.clearPreferences=function(){return r(this,{},"DELETE")};e.prototype.refresh=function(){return r(this,{},"GET")};return e}();s.User=n}).call(this);(function(){var e,t,n,r,i,o,u,a,f,l,c,h,p,d,v,m,g=function(e,t){return function(){return e.apply(t,arguments)}},y={}.hasOwnProperty,b=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++){if(t in this&&this[t]===e)return t}return-1};t=typeof exports!=="undefined";m=typeof exports!=="undefined"&&exports!==null?exports:this;if(t){v=require("underscore")._;a=require("./util");c=m}else{v=m._,c=m.intermine;a=c.funcutils}f=a.get,h=a.invoke,r=a.REQUIRES_VERSION,d=a.set,u=a.dejoin;o="list/tags";i="lists/shares";e="lists/invitations";p=function(e){return e.substr(0,e.indexOf(":"))==="__folder__"};l=function(e){return s.substr(e.indexOf(":")+1)};n=function(){function t(e,t){var n,r;this.service=t;this.hasTag=g(this.hasTag,this);for(n in e){if(!y.call(e,n))continue;r=e[n];this[n]=r}this.dateCreated=this.dateCreated!=null?new Date(this.dateCreated):null;this.folders=this.tags.filter(p).map(l)}t.prototype.hasTag=function(e){return b.call(this.tags,e)>=0};t.prototype.query=function(e){if(e==null){e=["*"]}return this.service.query({select:e,from:this.type,where:[[this.type,"IN",this.name]]})};t.prototype.del=function(e){return this.service.makeRequest("DELETE","lists",{name:this.name},e)};t.prototype.fetchTags=function(e){var t=this;return this.service.makeRequest("GET","list/tags",{name:this.name}).pipe(function(e){return e.tags}).done(function(e){t.tags=e;return t.folders.filter(p).map(l)}).done(e)};t.prototype.addTags=function(e,t){var n=this;return this.service.makeRequest("POST","list/tags",{name:this.name,tags:e}).pipe(function(e){return e.tags}).done(function(e){n.tags=e;return n.folders.filter(p).map(l)}).done(t)};t.prototype.removeTags=function(e,t){var n=this;return this.service.makeRequest("DELETE","list/tags",{name:this.name,tags:e}).pipe(function(e){return e.tags}).done(function(e){n.tags=e;return n.folders.filter(p).map(l)}).done(t)};t.prototype.contents=function(e){return this.query().pipe(u).pipe(h("records")).done(e)};t.prototype.rename=function(e,t){var n=this;return this.service.post("lists/rename",{oldname:this.name,newname:e}).pipe(f("listName")).done(function(e){return n.name=e}).pipe(this.service.fetchList).done(t)};t.prototype.copy=function(e,t){var n,r,i,s,o,u,a,l=this;if(e==null){e={}}if(t==null){t=function(){}}if(arguments.length===1&&v.isFunction(e)){o=[{},e],e=o[0],t=o[1]}if(v.isString(e)){e={name:""+e}}r=n=(u=e.name)!=null?u:""+this.name+"_copy";s=this.tags.concat((a=e.tags)!=null?a:[]);i=this.query(["id"]);return this.service.fetchLists().pipe(h("map",f("name"))).pipe(function(e){var o;o=1;while(b.call(e,r)>=0){r=""+n+"-"+o++}return i.pipe(h("saveAsList",{name:r,tags:s,description:l.description})).done(t)})};t.prototype.enrichment=function(e,t){return this.service.enrichment(d({list:this.name})(e),t)};t.prototype.shareWithUser=function(e,t){return this.service.post(i,{list:this.name,"with":e}).done(t)};t.prototype.inviteUserToShare=function(t,n,r){if(n==null){n=true}if(r==null){r=function(){}}return this.service.post(e,{list:this.name,to:t,notify:!!n}).done(r)};return t}();c.List=n}).call(this);(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p={}.hasOwnProperty,d=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++){if(t in this&&this[t]===e)return t}return-1},v=function(e,t){return function(){return e.apply(t,arguments)}};r=typeof exports!=="undefined";h=typeof exports!=="undefined"&&exports!==null?exports:this;if(r){t=require("underscore.deferred").Deferred;a=require("./util");c=h}else{t=h.jQuery.Deferred;c=h.intermine;a=c.funcutils}l=a.id,f=a.get,u=a.fold,o=a.concatMap;s=60*1e3;e=function(){function t(e){var t,n;for(t in e){if(!p.call(e,t))continue;n=e[t];this[t]=n}}var e;e=o(f("matches"));t.prototype.getMatches=function(t){var n;if(t==="MATCH"){return this.matches[t]}else{return(n=e(this.matches[t]))!=null?n:[]}};t.prototype.getMatchIds=function(e){if(e!=null){return this.getMatches(e).map(f("id"))}else{return this.allMatchIds()}};t.prototype.goodMatchIds=function(){return this.getMatchIds("MATCH")};t.prototype.allMatchIds=function(){var e,t=this;e=u(function(e,n){return e.concat(t.getMatchIds(n))});return e(this.goodMatchIds(),["DUPLICATE","WILDCARD","TYPE_CONVERTED","OTHER"])};return t}();i=function(){function r(e){var t,n;for(t in e){if(!p.call(e,t))continue;n=e[t];this[t]=n}}var e,t,n;e=o(l);t=function(t){var n,r;return e(function(){var e,i;e=t.identifiers;i=[];for(n in e){r=e[n];i.push(r)}return i}())};n=function(e,n){return!(n!=null)||d.call(t(e),n)>=0};r.prototype.getMatches=function(e){var t,r;r=[];for(l in this){if(!p.call(this,l))continue;t=this[l];if(n(t,e)){r.push(t)}}return r};r.prototype.getMatchIds=function(e){var t,r;r=[];for(l in this){if(!p.call(this,l))continue;t=this[l];if(n(t,e)){r.push(l)}}return r};r.prototype.goodMatchIds=function(){return this.getMatchIds("MATCH")};r.prototype.allMatchIds=function(){return this.getMatchIds()};return r}();n=function(){function n(e,t){this.uid=e;this.service=t;this.del=v(this.del,this);this.fetchResults=v(this.fetchResults,this);this.fetchErrorMessage=v(this.fetchErrorMessage,this);this.fetchStatus=v(this.fetchStatus,this)}n.prototype.fetchStatus=function(e){return this.service.get("ids/"+this.uid+"/status").pipe(f("status")).done(e)};n.prototype.fetchErrorMessage=function(e){return this.service.get("ids/"+this.uid+"/status").pipe(f("message")).done(e)};n.prototype.fetchResults=function(t){var n,r;n=this.service.get("ids/"+this.uid+"/result").pipe(f("results"));r=this.service.fetchVersion();return r.then(function(t){return n.then(function(n){if(t>=16){return new e(n)}else{return new i(n)}})})};n.prototype.del=function(e){return this.service.makeRequest("DELETE","ids/"+this.uid,{},e)};n.prototype.decay=50;n.prototype.poll=function(e,n,r){var i,o,u,a=this;u=t().done(e).fail(n).progress(r);o=this.fetchStatus();o.fail(u.reject);i=this.decay;this.decay=Math.min(s,i*2);o.done(function(e){u.notify(e);switch(e){case"SUCCESS":return a.fetchResults().then(u.resolve,u.reject);case"ERROR":return a.fetchErrorMessage().then(u.reject,u.reject);default:return setTimeout(function(){return a.poll(u.resolve,u.reject,u.notify)},i)}});return u.promise()};return n}();n.prototype.wait=n.prototype.poll;n.create=function(e){return function(t){return new n(t,e)}};c.IDResolutionJob=n;c.CategoryResults=e;c.IdResults=i}).call(this);(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,Y,Z=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++){if(t in this&&this[t]===e)return t}return-1},et=function(e,t){return function(){return e.apply(t,arguments)}},tt=[].slice,nt={}.hasOwnProperty;i=typeof exports!=="undefined";z=typeof exports!=="undefined"&&exports!==null?exports:this;if(i){N=z;U=require("underscore")._;r=(e=require("underscore.deferred")).Deferred;q=require("querystring").stringify;N.xml=require("./xml");Q=require("./util"),P=Q.pairsToObj,y=Q.filter,H=Q.partition,b=Q.fold,I=Q.take,p=Q.concatMap,x=Q.id,w=Q.get,L=Q.invoke}else{U=z._,A=z.jQuery,N=z.intermine;G=N.funcutils,P=G.pairsToObj,y=G.filter,H=G.partition,b=G.fold,I=G.take,p=G.concatMap,x=G.id,w=G.get,L=G.invoke;r=(e=A).Deferred;q=function(e){return A.param(e,true)}}E=function(e){var t;t=U.isString(e)?o.OP_DICT[e.toLowerCase()]:null;if(!t){throw new Error("Illegal constraint operator: "+e)}return t};t=["path","op","code"];a=t.concat(["value","extraValue"]);u=["rowByRow","eachRow","recordByRecord","eachRecord","records","rows","table","tableRows"];s=function(e){return U.compose(e.fetchList,w("listName"))};n=[null,"A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];v=function(e){if(e==null){e=""}return e.substr(e.indexOf("."))};h=function(e){if(e!=null){return"<value>"+U.escape(e)+"</value>"}else{return"<nullValue/>"}};f=function(e,t){var n,r;return function(){var i;i=[];for(n in e){r=e[n];if(Z.call(t,n)>=0){i.push(""+n+'="'+U.escape(r)+'" ')}}return i}().join("")};D=function(e){return"<constraint "+f(e,t)+"/>"};R=function(e){return"<constraint "+f(e,["path","type"])+"/>"};j=function(e){return"<constraint "+f(e,a)+"/>"};M=function(e){return"<constraint "+f(e,t)+">"+p(h)(e.values)+"</constraint>"};T=function(e){return"<constraint "+f(e,t)+'ids="'+e.ids.join(",")+'"/>'};l=function(e){var t;if(e.values!=null){return M(e)}else if(e.ids!=null){return T(e)}else if(!(e.op!=null)){return R(e)}else if(t=e.op,Z.call(o.NULL_OPS,t)>=0){return D(e)}else{return j(e)}};S=function(e){return e.replace(/^[^\.]+\./,"")};d=function(e){var t,n,r,i,s,o,u,a;s=e.path,o=e.type,i=e.op,u=e.value,a=e.values,n=e.extraValue,r=e.ids,t=e.code;r=r!=null?r.slice():void 0;a=a!=null?a.slice():void 0;return _({path:s,type:o,op:i,value:u,values:a,extraValue:n,ids:r,code:t})};c=function(e){var t;t=d(e);t.path=S(t.path);return t};_=function(e){var t,n;for(t in e){n=e[t];if(n==null){delete e[t]}}return e};m=function(e,t){return"Did not remove a single constraint. original = "+e+", reduced = "+t};k=function(e,t){var n,r,i,s,u,a;n={path:e};if(t===null){n.op="IS NULL"}else if(U.isArray(t)){n.op="ONE OF";n.values=t}else if(U.isString(t)||U.isNumber(t)){if(a=typeof t.toUpperCase==="function"?t.toUpperCase():void 0,Z.call(o.NULL_OPS,a)>=0){n.op=t}else{n.op="=";n.value=t}}else{i=function(){var e;e=[];for(r in t){u=t[r];e.push(r)}return e}();if(Z.call(i,"isa")>=0){if(U.isArray(t.isa)){n.op=r;n.values=t.isa}else{n.type=t.isa}}else{if(Z.call(i,"extraValue")>=0){n.extraValue=t.extraValue}for(r in t){s=t[r];if(!(r!=="extraValue")){continue}n.op=r;if(U.isArray(s)){n.values=s}else{n.value=s}}}}return n};C=function(e){var t,n,r,i;e=e.slice();n={path:e.shift()};if(e.length===1){t=e[0];if(i=typeof t.toUpperCase==="function"?t.toUpperCase():void 0,Z.call(o.NULL_OPS,i)>=0){n.op=t}else{n.type=t}}else if(e.length>=2){n.op=e[0];r=e[1];if(U.isArray(r)){n.values=r}else{n.value=r}if(e.length===3){n.extraValue=e[2]}}return n};F=function(e){var t,n,r,i,s,o,u;if(e==null){return[]}n=e.split(/\s+/);r=function(){var e,t,r;r=[];for(i=e=0,t=n.length/2;0<=t?e<t:e>t;i=0<=t?++e:--e){r.push(i*2)}return r}();u=[];for(s=0,o=r.length;s<o;s++){t=r[s];u.push([n[t],n[t+1]])}return u};B=function(){var e,t;t=this.sortOrder;this.sortOrder=function(){var n,r,i;i=[];for(n=0,r=t.length;n<r;n++){e=t[n];if(this.isRelevant(e.path)){i.push(e)}}return i}.call(this);if(t.length!==this.sortOrder.length){return this.trigger("change:sortorder change:orderby",this.sortOrder.slice())}};o=function(){function g(e,t){this.addConstraint=et(this.addConstraint,this);this.expandStar=et(this.expandStar,this);this.adjustPath=et(this.adjustPath,this);this.select=et(this.select,this);var n,r,s,o,u,a,f,l,c,h,p,d,v,m=this;U.defaults(this,{constraints:[],views:[],joins:{},constraintLogic:"",sortOrder:""});if(e==null){e={}}this.displayNames=U.extend({},(a=(f=e.displayNames)!=null?f:e.aliases)!=null?a:{});l=["name","title","comment","description"];for(r=0,s=l.length;r<s;r++){n=l[r];if(e[n]!=null){this[n]=e[n]}}this.service=t!=null?t:{};this.model=(c=e.model)!=null?c:{};this.summaryFields=(h=e.summaryFields)!=null?h:{};this.root=(p=e.root)!=null?p:e.from;this.maxRows=(d=(v=e.size)!=null?v:e.limit)!=null?d:e.maxRows;this.start=(o=(u=e.start)!=null?u:e.offset)!=null?o:0;this.select(e.views||e.view||e.select||[]);this.addConstraints(e.constraints||e.where||[]);this.addJoins(e.joins||e.join||[]);this.orderBy(e.sortOrder||e.orderBy||[]);if(e.constraintLogic!=null){this.constraintLogic=e.constraintLogic}i=function(e,t){var n,r,s;n=m.getPathInfo(e).getEndClass();s=[e];r=!(n&&t>0)?[]:U.flatten(U.map(n.fields,function(n){return i(""+e+"."+n.name,t-1)}));return U.flatten(s.concat(r))};this.on("change:views",B,this)}var e,t,i,o,u,a,f,h;g.JOIN_STYLES=["INNER","OUTER"];g.BIO_FORMATS=["gff3","fasta","bed"];g.NULL_OPS=["IS NULL","IS NOT NULL"];g.ATTRIBUTE_VALUE_OPS=["=","!=",">",">=","<","<=","CONTAINS","LIKE","NOT LIKE"];g.MULTIVALUE_OPS=["ONE OF","NONE OF"];g.TERNARY_OPS=["LOOKUP"];g.LOOP_OPS=["=","!="];g.LIST_OPS=["IN","NOT IN"];g.OP_DICT={"=":"=","==":"==",eq:"=",eqq:"==","!=":"!=",ne:"!=",">":">",gt:">",">=":">=",ge:">=","<":"<",lt:"<","<=":"<=",le:"<=",contains:"CONTAINS",CONTAINS:"CONTAINS",like:"LIKE",LIKE:"LIKE","not like":"NOT LIKE","NOT LIKE":"NOT LIKE",lookup:"LOOKUP","IS NULL":"IS NULL","is null":"IS NULL","IS NOT NULL":"IS NOT NULL","is not null":"IS NOT NULL","ONE OF":"ONE OF","one of":"ONE OF","NONE OF":"NONE OF","none of":"NONE OF","in":"IN","not in":"NOT IN",IN:"IN","NOT IN":"NOT IN",WITHIN:"WITHIN",within:"WITHIN",OVERLAPS:"OVERLAPS",overlaps:"OVERLAPS",ISA:"ISA",isa:"ISA"};i=function(){};g.prototype.on=function(e,t,n){var r,i,s,o,u,a,f;e=e.split(/\s+/);r=(u=this._callbacks)!=null?u:this._callbacks={};while(i=e.shift()){s=(a=r[i])!=null?a:r[i]={};o=(f=s.tail)!=null?f:s.tail=s.next={};o.callback=t;o.context=n;s.tail=o.next={}}return this};g.prototype.bind=function(){var e;e=1<=arguments.length?tt.call(arguments,0):[];return this.on.apply(this,e)};g.prototype.off=function(e,t,n){var r,i,s,o,u,a,f,l,c,h;if(e==null){this._callbacks={};return this}e=e.split(/\s+/);r=(h=this._callbacks)!=null?h:this._callbacks={};for(l=0,c=e.length;l<c;l++){s=e[l];if(t!=null){i=u=r[s]||{};o=u.tail;while((a=i.next)!==o){f=(!(n!=null)||a.context===n)&&t===a.callback;if(f){i.next=a.next||o;a=i}else{i=a}}}else{delete r[s]}}return this};g.prototype.unbind=function(){var e;e=1<=arguments.length?tt.call(arguments,0):[];return this.off.apply(this,e)};g.prototype.once=function(e,t,n){var r,i=this;r=function(){var s;s=1<=arguments.length?tt.call(arguments,0):[];t.apply(n,s);return i.off(e,r)};return this.on(e,r)};g.prototype.emit=function(){var e;e=1<=arguments.length?tt.call(arguments,0):[];return this.trigger.apply(this,e)};g.prototype.trigger=function(){var e,t,n,r,i,s,o,u;i=arguments[0],o=2<=arguments.length?tt.call(arguments,1):[];n=this._callbacks;if(!n){return this}e=n["all"];(i=i.split(/\s+/)).push(null);while(r=i.shift()){if(e){i.push({next:e.next,tail:e.tail,event:r})}if(!(s=n[r])){continue}i.push({next:s.next,tail:s.tail})}while(s=i.pop()){u=s.tail;t=s.event?[s.event].concat(o):o;while((s=s.next)!==u){s.callback.apply(s.context||this,t)}}return this};u=["name","view","sortOrder","constraintLogic","title","description","comment"];t=["path","type","op","code","value","ids"];f=function(e,t){var n,r,i,s;s=[];for(r=0,i=t.length;r<i;r++){n=t[r];if(e.hasAttribute(n)){s.push([n,e.getAttribute(n)])}}return s};o=function(e,t){var n,r,i,s,o;s=e.getElementsByTagName(t);o=[];for(r=0,i=s.length;r<i;r++){n=s[r];o.push(n)}return o};h=function(e){return function(t){return t.getAttribute(e)}};g.fromXML=function(e){var n,r,i,s,a,l,c;r=N.xml.parse(e);l=o(r,"query")[0]||o(r,"template")[0];if(!l){throw new Error("no query in xml")}s=h("path");c=h("style");a=P(f(l,u));a.view=a.view.split(/\s+/);a.sortOrder=F(a.sortOrder);a.joins=function(){var e,t,n,r;n=o(l,"join");r=[];for(e=0,t=n.length;e<t;e++){i=n[e];if(c(i)==="OUTER"){r.push(s(i))}}return r}();a.constraints=function(){var e,r,i,s;i=o(l,"constraint");s=[];for(e=0,r=i.length;e<r;e++){n=i[e];s.push(function(e){var n,r,i,s,u;n=P(f(e,t));if(n.ids!=null){n.ids=function(){var e,t,r,i;r=n.ids.split(",");i=[];for(e=0,t=r.length;e<t;e++){u=r[e];i.push(parseInt(u,10))}return i}()}s=o(e,"value");if(s.length){n.values=function(){var e,t,n;n=[];for(e=0,t=s.length;e<t;e++){i=s[e];n.push(function(){var e,t,n,s;n=i.childNodes;s=[];for(e=0,t=n.length;e<t;e++){r=n[e];s.push(r.data)}return s}().join(""))}return n}()}return n}(n))}return s}();return a};g.prototype.removeFromSelect=function(e){var t,n,r,i;e=U.isString(e)?[e]:e||[];t=U.compose(this.expandStar,this.adjustPath);e=U.flatten(function(){var n,i,s;s=[];for(n=0,i=e.length;n<i;n++){r=e[n];s.push(t(r))}return s}());this.sortOrder=function(){var t,r,i,s,o;i=this.sortOrder;o=[];for(t=0,r=i.length;t<r;t++){n=i[t];if(!(s=n.path,Z.call(e,s)>=0)){o.push(n)}}return o}.call(this);this.views=function(){var t,n,r,s;r=this.views;s=[];for(t=0,n=r.length;t<n;t++){i=r[t];if(!(Z.call(e,i)>=0)){s.push(i)}}return s}.call(this);this.trigger("remove:view",e);return this.trigger("change:views",this.views)};g.prototype.removeConstraint=function(e,t){var n,r,i,s;if(t==null){t=false}i=this.constraints;r=typeof e==="string"?function(t){return t.code===e}:function(t){var n,r;return t.path===e.path&&t.op===e.op&&t.value===e.value&&t.extraValue===e.extraValue&&e.type===t.type&&((n=t.values)!=null?n.join("%%"):void 0)===((r=e.values)!=null?r.join("%%"):void 0)};s=function(){var e,t,s;s=[];for(e=0,t=i.length;e<t;e++){n=i[e];if(!r(n)){s.push(n)}}return s}();if(s.length!==i.length-1){throw new Error(m(i,s))}this.constraints=s;if(!t){this.trigger("change:constraints");return this.trigger("removed:constraints",U.difference(i,s))}};g.prototype.addToSelect=function(e){var t,n,r,i,s;e=U.isString(e)?[e]:e||[];r=U.flatten([U.map(e,U.compose(this.expandStar,this.adjustPath))]);t=function(){var e,t,i;i=[];for(e=0,t=r.length;e<t;e++){n=r[e];if(Z.call(this.views,n)>=0||U.indexOf(r,n)!==U.lastIndexOf(r,n)){i.push(n)}}return i}.call(this);if(t.length){throw new Error(""+t+" already in the select list")}for(i=0,s=r.length;i<s;i++){n=r[i];this.views.push(n)}return this.trigger("add:view change:views",r)};g.prototype.select=function(e){this.views=[];this.addToSelect(e);return this};g.prototype.adjustPath=function(e){e=e&&e.name?e.name:""+e;if(this.root!=null){if(!e.match("^"+this.root)){e=this.root+"."+e}}else{this.root=e.split(".")[0]}return e};g.prototype.getPossiblePaths=function(e){var t,n,r;if(e==null){e=3}if((n=this._possiblePaths)==null){this._possiblePaths={}}return(r=(t=this._possiblePaths)[e])!=null?r:t[e]=i(this.root,e)};g.prototype.getPathInfo=function(e){var t,n,r;t=this.adjustPath(e);n=(r=this.model)!=null?typeof r.getPathInfo==="function"?r.getPathInfo(t,this.getSubclasses()):void 0:void 0;if(n&&t in this.displayNames){n.displayName=this.displayNames[t]}return n};g.prototype.makePath=g.prototype.getPathInfo;a=U.compose(P,y(w(1)),L("map",function(e){return[e.path,e.type]}));g.prototype.getSubclasses=function(){return a(this.constraints)};g.prototype.getType=function(e){return this.getPathInfo(e).getType()};g.prototype.getViewNodes=function(){var e,t=this;e=function(e){return t.getPathInfo(e).getParent()};return U.uniq(U.map(this.views,e),false,function(e){return e.toPathString()})};g.prototype.isInView=function(e){var t,n,r;t=this.getPathInfo(e);if(!t){throw new Error("Invalid path: "+e)}if(t.isAttribute()){return r=t.toString(),Z.call(this.views,r)>=0}else{n=t.toString();return U.any(this.getViewNodes(),function(e){return e.toString()===n})}};g.prototype.isConstrained=function(e,t){var n,r,i=this;if(t==null){t=false}n=this.getPathInfo(e);if(!n){throw new Error("Invalid path: "+e)}r=function(e){return e.op!=null&&e.path===n.toString()};if(!n.isAttribute()&&t){r=function(e){return e.op!=null&&(e.path===n.toString()||n.equals(i.getPathInfo(e.path).getParent()))}}return U.any(this.constraints,r)};g.prototype.canHaveMultipleValues=function(e){return this.getPathInfo(e).containsCollection()};g.prototype.getQueryNodes=function(){var e,t,n,r;r=this.getViewNodes();t=function(){var t,r,i,s;i=this.constraints;s=[];for(t=0,r=i.length;t<r;t++){e=i[t];if(!!(e.type!=null)){continue}n=this.getPathInfo(e.path);if(n.isAttribute()){s.push(n.getParent())}else{s.push(n)}}return s}.call(this);return U.uniq(r.concat(t),false,String)};g.prototype.isInQuery=function(e){var t,n,r,i,s,o;n=this.getPathInfo(e);if(n){r=n.toPathString();o=this.views.concat(function(){var e,n,r,i;r=this.constraints;i=[];for(e=0,n=r.length;e<n;e++){t=r[e];if(!(t.type!=null)){i.push(t.path)}}return i}.call(this));for(i=0,s=o.length;i<s;i++){e=o[i];if(0===e.indexOf(r)){return true}}return false}return true};g.prototype.isRelevant=function(e){var t,n,r;n=this.getPathInfo(e);if(n.isAttribute()){n=n.getParent()}r=n.toString();t=this.getViewNodes();return U.any(t,function(e){return e.toPathString()===r})};g.prototype.expandStar=function(e){var t,n,r,i,s;if(/\*$/.test(e)){s=e.substr(0,e.lastIndexOf("."));n=function(e){return s+e};t=this.getType(s);if(/\.\*$/.test(e)){if(t&&this.summaryFields[t.name]){r=U.compose(n,v);return function(){var e,n,s,o;s=this.summaryFields[t.name];o=[];for(e=0,n=s.length;e<n;e++){i=s[e];if(!this.hasView(i)){o.push(r(i))}}return o}.call(this)}}if(/\.\*\*$/.test(e)){r=U.compose(n,function(e){return"."+e.name});return U.uniq(U.union(this.expandStar(s+".*"),U.map(t.attributes,r)))}}return e};g.prototype.isOuterJoin=function(e){return this.joins[this.adjustPath(e)]==="OUTER"};g.prototype.hasView=function(e){return this.views&&U.include(this.views,this.adjustPath(e))};g.prototype.count=function(e){if(this.service.count){return this.service.count(this,e)}else{throw new Error("This query has no service with count functionality attached.")}};g.prototype.appendToList=function(e,t){var n,r,i,o;n=e&&e.name?e.name:""+e;i=this.makeListQuery();r={listName:n,query:i.toXML()};o=(e!=null?e.name:void 0)?function(t){return e.size=t.size}:function(){};return this.service.post("query/append/tolist",r).pipe(s(this.service)).done(t,o)};g.prototype.makeListQuery=function(){var e,t,n,r,i;t=this.clone();if(t.views.length!==1||t.views[0]===null||!t.views[0].match(/\.id$/)){t.select(["id"])}i=this.getViewNodes();for(n=0,r=i.length;n<r;n++){e=i[n];if(!this.isOuterJoined(e)){if(!t.isInView(e||t.isConstrained(e))&&e.getEndClass().fields.id!=null){t.addConstraint([e.append("id"),"IS NOT NULL"])}}}return t};g.prototype.saveAsList=function(e,t){var n,r;r=this.makeListQuery();n=U.clone(e);n.listName=n.listName||n.name;n.query=r.toXML();if(e.tags){n.tags=e.tags.join(";")}return this.service.post("query/tolist",n).pipe(s(this.service)).done(t)};g.prototype.summarise=function(e,t,n){return this.filterSummary(e,"",t,n)};g.prototype.summarize=function(){var e;e=1<=arguments.length?tt.call(arguments,0):[];return this.summarise.apply(this,e)};g.prototype.filterSummary=function(e,t,n,i){var s,o,u,a;if(i==null){i=function(){}}if(U.isFunction(n)){a=[n,null],i=a[0],n=a[1]}e=this.adjustPath(e);u=this.clone();if(!U.include(u.views,e)){u.views.push(e)}o={query:u.toXML(),summaryPath:e,format:"jsonrows"};if(n){o.size=n}if(t){o.filterTerm=t}s=function(e){return r(function(){var t,n,r;t=e.results.map(function(e){e.count=parseInt(e.count,10);return e});n={uniqueValues:e.uniqueValues};if(((r=t[0])!=null?r.max:void 0)!=null){U.extend(n,t[0])}return this.resolve(t,n,e.filteredCount)})};return this.service.post("query/results",o).pipe(s).done(i)};g.prototype.clone=function(e){var t,n,r,i,s;t=new g(this,this.service);if((i=t._callbacks)==null){t._callbacks={}}if(e){s=this._callbacks;for(n in s){if(!nt.call(s,n))continue;r=s[n];t._callbacks[n]=r}t.off("change:views",B,this)}return t};g.prototype.next=function(){var e;e=this.clone();if(this.maxRows){e.start=this.start+this.maxRows}return e};g.prototype.previous=function(){var e;e=this.clone();if(this.maxRows){e.start=this.start-this.maxRows}else{e.start=0}return e};g.prototype.getSortDirection=function(e){var t,n,r,i,s;e=this.adjustPath(e);s=this.sortOrder;for(r=0,i=s.length;r<i;r++){n=s[r];if(n.path===e){t=n.direction}}return t};g.prototype.isOuterJoined=function(e){e=this.adjustPath(e);return U.any(this.joins,function(t,n){return t==="OUTER"&&e.indexOf(n)===0})};g.prototype.getOuterJoin=function(e){var t,n=this;e=this.adjustPath(e);t=U.sortBy(U.keys(this.joins),w("length")).reverse();return U.find(t,function(t){return n.joins[t]==="OUTER"&&e.indexOf(t)===0})};g.prototype._parse_sort_order=function(e){var t,n,r;r=e;if(U.isString(e)){r={path:e,direction:"ASC"}}else if(U.isArray(e)){n=e[0],t=e[1];r={path:n,direction:t}}else if(!(e.path!=null)){n=U.keys(e)[0];t=U.values(e)[0];r={path:n,direction:t}}r.path=this.adjustPath(r.path);r.direction=r.direction.toUpperCase();return r};g.prototype.addOrSetSortOrder=function(e){var t,n,r,i,s;e=this._parse_sort_order(e);t=this.getSortDirection(e.path);if(!(t!=null)){return this.addSortOrder(e)}else if(t!==e.direction){s=this.sortOrder;for(r=0,i=s.length;r<i;r++){n=s[r];if(n.path===e.path){n.direction=e.direction}}return this.trigger("change:sortorder",this.sortOrder)}};g.prototype.addSortOrder=function(e){this.sortOrder.push(this._parse_sort_order(e));this.trigger("add:sortorder",e);return this.trigger("change:sortorder",this.sortOrder)};g.prototype.orderBy=function(e){var t,n,r;this.sortOrder=[];for(n=0,r=e.length;n<r;n++){t=e[n];this.addSortOrder(this._parse_sort_order(t))}return this.trigger("set:sortorder change:sortorder",this.sortOrder)};g.prototype.addJoins=function(e){var t,n,r,i,s,o,u;if(U.isArray(e)){o=[];for(i=0,s=e.length;i<s;i++){t=e[i];o.push(this.addJoin(t))}return o}else{u=[];for(n in e){r=e[n];u.push(this.addJoin({path:n,style:r}))}return u}};g.prototype.addJoin=function(e){var t,n,r;if(U.isString(e)){e={path:e,style:"OUTER"}}e.path=this.adjustPath(e.path);e.style=(t=(n=e.style)!=null?n.toUpperCase():void 0)!=null?t:e.style;if(r=e.style,Z.call(g.JOIN_STYLES,r)<0){throw new Error("Invalid join style: "+e.style)}this.joins[e.path]=e.style;return this.trigger("set:join",e.path,e.style)};g.prototype.setJoinStyle=function(e,t){if(t==null){t="OUTER"}e=this.adjustPath(e);t=t.toUpperCase();if(this.joins[e]!==t){this.joins[e]=t;this.trigger("change:joins",{path:e,style:t})}return this};g.prototype.addConstraints=function(e){var t,n,r,i,s,o,u=this;this.__silent__=true;if(U.isArray(e)){for(s=0,o=e.length;s<o;s++){t=e[s];this.addConstraint(t)}}else{i=function(e,t){return u.addConstraint(k(e,t))};for(r in e){n=e[r];i(r,n)}}this.__silent__=false;this.trigger("add:constraint");return this.trigger("change:constraints")};g.prototype.addConstraint=function(e){if(U.isArray(e)){e=C(e)}else{e=d(e)}e.path=this.adjustPath(e.path);if(e.type==null){try{e.op=E(e.op)}catch(t){throw new Error("Illegal operator: "+e.op)}}this.constraints.push(e);if(this.constraintLogic!=null&&this.constraintLogic!==""){this.constraintLogic="("+this.constraintLogic+") and "+n[this.constraints.length]}if(!this.__silent__){this.trigger("add:constraint",e);this.trigger("change:constraints")}return this};g.prototype.getSorting=function(){var e;return function(){var t,n,r,i;r=this.sortOrder;i=[];for(t=0,n=r.length;t<n;t++){e=r[t];i.push(""+e.path+" "+e.direction)}return i}.call(this).join(" ")};g.prototype.getConstraintXML=function(){var e,t;t=function(){var t,n,r,i;r=this.constraints;i=[];for(t=0,n=r.length;t<n;t++){e=r[t];if(!(e.type!=null)||this.isInQuery(e.path)){i.push(e)}}return i}.call(this);if(t.length){return p(l)(p(x)(H(function(e){return e.type!=null})(t)))}else{return""}};g.prototype.getJoinXML=function(){var e,t,n;n=function(){var n,r;n=this.joins;r=[];for(e in n){t=n[e];if(this.isInQuery(e)&&t==="OUTER"){r.push('<join path="'+e+'" style="OUTER"/>')}}return r}.call(this);return n.join("")};g.prototype.toXML=function(){var e,t,n,r;e={model:this.model.name,view:this.views.join(" "),sortOrder:this.getSorting(),constraintLogic:this.constraintLogic};if(this.name!=null){e.name=this.name}t=function(){var t;t=[];for(n in e){r=e[n];if(r){t.push(n+'="'+r+'"')}}return t}().join(" ");return"<query "+t+" >"+this.getJoinXML()+this.getConstraintXML()+"</query>"};g.prototype.toJSON=function(){var e,t,n,r,i;return _({name:this.name,title:this.title,comment:this.comment,description:this.description,constraintLogic:this.constraintLogic,from:this.root,select:function(){var e,t,n,r;n=this.views;r=[];for(e=0,t=n.length;e<t;e++){i=n[e];r.push(S(i))}return r}.call(this),orderBy:function(){var e,r,i,s,o;i=this.sortOrder;o=[];for(e=0,r=i.length;e<r;e++){s=i[e],n=s.path,t=s.direction;o.push({path:S(n),direction:t})}return o}.call(this),joins:function(){var e,t;e=this.joins;t=[];for(n in e){r=e[n];if(r==="OUTER"){t.push(S(n))}}return t}.call(this),where:function(){var t,n,r,i;r=this.constraints;i=[];for(t=0,n=r.length;t<n;t++){e=r[t];i.push(c(e))}return i}.call(this)})};g.prototype.fetchCode=function(e,t){var n;n={query:this.toXML(),lang:e};return this.service.post("query/code",n).pipe(this.service.VERIFIER).pipe(w("code")).done(t)};g.prototype.save=function(e,t){var n,r=this;if(e!=null){this.name=e}n={data:this.toXML(),contentType:"application/xml; charset=UTF-8",url:this.service.root+"query",type:"POST",dataType:"json"};return this.service.doReq(n).pipe(this.service.VERIFIER).pipe(w("name")).done(t,function(e){return r.name=e})};g.prototype.getCodeURI=function(e){var t,n;t={query:this.toXML(),lang:e,format:"text"};if(((n=this.service)!=null?n.token:void 0)!=null){t.token=this.service.token}return""+this.service.root+"query/code?"+q(t)};g.prototype.getExportURI=function(e){var t,n;if(e==null){e="tab"}if(Z.call(g.BIO_FORMATS,e)>=0){return this["get"+e.toUpperCase()+"URI"]()}t={query:this.toXML(),format:e};if(((n=this.service)!=null?n.token:void 0)!=null){t.token=this.service.token}return""+this.service.root+"query/results?"+q(t)};g.prototype.fetchQID=function(e){return this.service.post("queries",{query:this.toXML()}).then(function(e){return e.id}).done(e)};e=function(e){return e.append("primaryIdentifier").toString()};g.prototype.__bio_req=function(t,n){var r,i;i=this.makeListQuery();r=function(e){return U.any(t,function(t){return e.isa(t)})};i.views=I(n)(function(){var t,i,s,o;s=this.getViewNodes();o=[];for(t=0,i=s.length;t<i;t++){n=s[t];if(r(n)){o.push(e(n))}}return o}.call(this));return{query:i.toXML(),format:"text"}};g.prototype._fasta_req=function(){return this.__bio_req(["SequenceFeature","Protein"],1)};g.prototype._gff3_req=function(){return this.__bio_req(["SequenceFeature"])};g.prototype._bed_req=g.prototype._gff3_req;return g}();o.ATTRIBUTE_OPS=U.union(o.ATTRIBUTE_VALUE_OPS,o.MULTIVALUE_OPS,o.NULL_OPS);o.REFERENCE_OPS=U.union(o.TERNARY_OPS,o.LOOP_OPS,o.LIST_OPS);Y=o.BIO_FORMATS;W=function(e){var t,n,r;n="_"+e+"_req";t="get"+e.toUpperCase();r=t+"URI";o.prototype[t]=function(t,r){var i,s,o;if(t==null){t={}}if(r==null){r=function(){}}if(U.isFunction(t)){o=[{},t],t=o[0],r=o[1]}if((t!=null?t.view:void 0)!=null){t.view=function(){var e,n,r,i;r=t.view;i=[];for(e=0,n=r.length;e<n;e++){s=r[e];i.push(this.getPathInfo(s).toString())}return i}.call(this)}i=U.extend(this[n](),t);return this.service.post("query/results/"+e,i).done(r)};return o.prototype[r]=function(t,r){var i,s,o;if(t==null){t={}}if(U.isFunction(t)){o=[{},t],t=o[0],r=o[1]}if((t!=null?t.view:void 0)!=null){t.view=function(){var e,n,r,i;r=t.view;i=[];for(e=0,n=r.length;e<n;e++){s=r[e];i.push(this.getPathInfo(s).toString())}return i}.call(this)}i=U.extend(this[n](),t);if(this.service.token!=null){i.token=this.service.token}return""+this.service.root+"query/results/"+e+"?"+q(i)}};for(V=0,J=Y.length;V<J;V++){g=Y[V];W(g)}X=function(e){return function(){var t,n,r,i;n=arguments[0],t=2<=arguments.length?tt.call(arguments,1):[];if(this.service[e]){if(!(n!=null)){n={}}else if(U.isFunction(n)){n={};t=function(){var e,t,n;n=[];for(e=0,t=arguments.length;e<t;e++){r=arguments[e];n.push(r)}return n}.apply(this,arguments)}U.defaults(n,{start:this.start,size:this.maxRows});return(i=this.service)[e].apply(i,[this,n].concat(tt.call(t)))}else{throw new Error("Service does not provide '"+e+"'.")}}};for($=0,K=u.length;$<K;$++){O=u[$];o.prototype[O]=X(O)}N.Query=o}).call(this);(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,Y,Z,et,tt=function(e,t){return function(){return e.apply(t,arguments)}},nt=[].slice;f=typeof exports!=="undefined";Z=typeof exports!=="undefined"&&exports!==null?exports:this;if(f){Y=require("underscore")._;r=(e=require("underscore.deferred")).Deferred;m=require("./model").Model;E=require("./query").Query;p=require("./lists").List;M=require("./user").User;a=require("./id-resolution-job").IDResolutionJob;q=require("./util");G=require("querystring").stringify;z=require("./http");W=exports}else{Y=Z._,V=Z.jQuery,W=Z.intermine;r=(e=V).Deferred;G=function(e){return V.param(e,true)};m=W.Model,E=W.Query,p=W.List,M=W.User,a=W.IDResolutionJob,q=W.funcutils,z=W.http}J=q.pairsToObj,$=q.omap,R=q.get,K=q.set,X=q.invoke,Q=q.success,I=q.error,S=q.REQUIRES_VERSION,F=q.dejoin;_={};d={};C={};H={};n="http://";D="version";A="templates";l="lists";v="model";N="summaryfields";b="query/results";w="search";B="widgets";i="list/enrichment";j="listswithobject";c={union:"lists/union",intersection:"lists/intersect",difference:"lists/diff"};x="lists/subtract";P="user/whoami";L=b+"/tablerows";y="user/preferences";g="path/values";u=function(e){return e};s=/^https?:\/\//i;o=/service\/?$/i;T="/service/";t=function(e){var t,n;if(f&&e.stack!=null){return console.error(e.stack)}else{t=(e!=null?e.stack:void 0)?[e.stack]:arguments;if(typeof console!=="undefined"&&console!==null){return(n=console.error||console.log)!=null?n.apply(console,t):void 0}}};et=function(e,t,n,r,i){var s,o,u,a=this;s=(u=this[e])!=null?u:this[e]=this.useCache&&(o=t[this.root])?Q(o):this.get(n).pipe(R(r)).done(function(e){return t[a.root]=e});return s.done(i)};U=function(e){return function(t){return r(function(){var n;if(n=Y.find(t,function(t){return t.name===e})){return this.resolve(n)}else{return this.reject('List "'+e+'" not found among: '+t.map(R("name")))}})}};h=function(e,t){if(t==null){t="listName"}return Y.compose(e.fetchList,R(t))};O=function(e){var t,n,r,i,s,o;if(e==null){e=[]}i=Y.isArray(e)?e:[e];o=[];for(n=0,r=i.length;n<r;n++){t=i[n];o.push((s=t.name)!=null?s:t)}return o};k=function(){function k(e){var r,i,u,a,l=this;this.root=e.root,this.token=e.token,this.errorHandler=e.errorHandler,this.DEBUG=e.DEBUG,this.help=e.help,i=e.noCache;this.createList=tt(this.createList,this);this.resolveIds=tt(this.resolveIds,this);this.query=tt(this.query,this);this.fetchWidgetMap=tt(this.fetchWidgetMap,this);this.fetchWidgets=tt(this.fetchWidgets,this);this.complement=tt(this.complement,this);this.fetchListsContaining=tt(this.fetchListsContaining,this);this.fetchList=tt(this.fetchList,this);this.findLists=tt(this.findLists,this);this.fetchLists=tt(this.fetchLists,this);this.fetchTemplates=tt(this.fetchTemplates,this);this.tableRows=tt(this.tableRows,this);this.values=tt(this.values,this);this.rows=tt(this.rows,this);this.records=tt(this.records,this);this.table=tt(this.table,this);this.pathValues=tt(this.pathValues,this);this.fetchUser=tt(this.fetchUser,this);this.whoami=tt(this.whoami,this);this.findById=tt(this.findById,this);this.count=tt(this.count,this);this.enrichment=tt(this.enrichment,this);if(this.root==null){throw new Error("No service root provided. This is required")}if(!s.test(this.root)){this.root=n+this.root}if(!o.test(this.root)){this.root=this.root+T}this.root=this.root.replace(/ice$/,"ice/");if((u=this.errorHandler)==null){this.errorHandler=t}if((a=this.help)==null){this.help="no.help.available@dev.null"}this.useCache=!i;r=f?"":location.protocol+"//"+location.host;this.getFormat=function(e){if(e==null){e="json"}if(!/jsonp/.test(e)){if(!(f||V.support.cors)){if(r.substring(0,l.root.length)!==l.root){return e.replace("json","jsonp")}}}return e}}var u;k.prototype.doReq=z.doReq;k.prototype.post=function(e,t){if(t==null){t={}}return this.makeRequest("POST",e,t)};k.prototype.get=function(e,t){return this.makeRequest("GET",e,t)};k.prototype.makeRequest=function(e,t,n,r,i){var s,o,u,a,f,l;if(e==null){e="GET"}if(t==null){t=""}if(n==null){n={}}if(r==null){r=function(){}}if(i==null){i=false}if(Y.isArray(r)){f=r,r=f[0],o=f[1]}if(Y.isArray(n)){n=J(n)}a=this.root+t;if(o==null){o=this.errorHandler}if(this.token){n.token=this.token}n.format=this.getFormat(n.format);if(/jsonp/.test(n.format)){n.method=e;e="GET";a+="?callback=?"}s=/json/.test(n.format)?"json":"text";if(!z.supports(e)){l=[e,z.getMethod(e)],n.method=l[0],e=l[1]}if(e==="DELETE"){a+="?"+G(n)}u={data:n,dataType:s,success:r,error:o,url:a,type:e};return this.doReq(u,i)};k.prototype.enrichment=function(e,t){var n=this;return S(this,8,function(){return n.get(i,Y.defaults({},e,{maxp:.05,correction:"Holm-Bonferroni"})).pipe(R("results")).done(t)})};k.prototype.search=function(e,t){var n=this;if(e==null){e={}}if(t==null){t=function(){}}return S(this,9,function(){var r,i,s,o,u,a;if(Y.isFunction(e)){u=[e,{}],t=u[0],e=u[1]}if(Y.isString(e)){e={q:e}}s=Y.defaults({},e,{q:""});delete s.facets;if(e.facets){a=e.facets;for(r in a){o=a[r];s["facet_"+r]=o}}i=function(e){return Q(e.results,e.facets)};return n.post(w,s).pipe(i).done(t)})};k.prototype.count=function(e,t){var n,r;if(t==null){t=function(){}}if(!e){return I("Not enough arguments")}else if(e.toPathString!=null){n=e.isClass()?e.append("id"):e;return this.pathValues(n,"count").done(t)}else if(e.toXML!=null){r={query:e.toXML(),format:"jsoncount"};return this.post(b,r).pipe(R("count")).done(t)}else if(Y.isString(e)){return this.fetchModel().pipe(X("makePath",e.replace(/\.\*$/,".id"))).pipe(this.count).done(t)}else{return this.query(e).pipe(this.count).done(t)}};k.prototype.findById=function(e,t,n){return this.query({from:e,select:["**"],where:{id:t}}).pipe(F).pipe(X("records")).pipe(R(0)).done(n)};k.prototype.find=function(e,t,n){return this.query({from:e,select:["**"],where:[[e,"LOOKUP",t]]}).pipe(F).pipe(X("records")).done(n)};k.prototype.whoami=function(e){var t=this;return S(this,9,function(){return t.get(P).pipe(R("user")).pipe(function(e){return new M(t,e)}).done(e)})};k.prototype.fetchUser=function(){var e;e=1<=arguments.length?nt.call(arguments,0):[];return this.whoami.apply(this,e)};k.prototype.pathValues=function(e,t,n){var r=this;if(t==null){t={}}if(n==null){n=function(){}}return S(this,6,function(){var i,s;if(Y.isString(t)){i=t;t={}}if(i!=="count"){i="results"}s=function(e){var t,n;t=i==="count"?"jsoncount":"json";n={format:t,path:e.toString(),typeConstraints:JSON.stringify(e.subclasses)};return r.post(g,n).pipe(R(i))};try{return r.fetchModel().pipe(X("makePath",e,e.subclasses||t)).pipe(s).done(n)}catch(o){return I(o)}})};k.prototype.doPagedRequest=function(e,t,n,r,i){var s,o,u=this;if(n==null){n={}}if(i==null){i=function(){}}if(e.toXML!=null){if(Y.isFunction(n)){o=[n,{}],i=o[0],n=o[1]}s=Y.defaults({},{query:e.toXML(),format:r},n);return this.post(t,s).pipe(function(e){return Q(e.results,e)}).done(i)}else{return this.query(e).pipe(function(e){return u.doPagedRequest(e,t,n,r,i)})}};k.prototype.table=function(e,t,n){return this.doPagedRequest(e,b,t,"jsontable",n)};k.prototype.records=function(e,t,n){return this.doPagedRequest(e,b,t,"jsonobjects",n)};k.prototype.rows=function(e,t,n){return this.doPagedRequest(e,b,t,"json",n)};k.prototype.values=function(e,t,n){var r=this;if(n==null){n=function(){}}if(!(e!=null)){return I("No query term supplied")}else if(e.descriptors!=null||Y.isString(e)){return this.pathValues(e,t,n)}else{return this.query(e).then(function(i){if(i.views.length!==1){return I("Expected one column, got "+e.views.length)}else{return r.rows(i,t).then(X("map",R(0))).done(n)}})}};k.prototype.tableRows=function(e,t,n){return this.doPagedRequest(e,L,t,"json",n)};k.prototype.fetchTemplates=function(e){return this.get(A).pipe(R("templates")).done(e)};k.prototype.fetchLists=function(e){return this.findLists("",e)};k.prototype.findLists=function(e,t){var n=this;if(e==null){e=""}if(t==null){t=function(){}}return this.fetchVersion().pipe(function(r){var i;if(e&&r<13){return I("Finding lists by name on the server requires version 13. This is only "+r)}else{i=function(e){var t,r,i,s;s=[];for(r=0,i=e.length;r<i;r++){t=e[r];s.push(new p(t,n))}return s};return n.get(l,{name:e}).pipe(R("lists")).pipe(i).done(t)}})};k.prototype.fetchList=function(e,t){var n=this;return this.fetchVersion().pipe(function(r){if(r<13){return n.findLists().pipe(U(e)).done(t)}else{return n.findLists(e).pipe(R(0)).done(t)}})};k.prototype.fetchListsContaining=function(e,t){var n,r=this;n=function(e){var t,n,i,s;s=[];for(n=0,i=e.length;n<i;n++){t=e[n];s.push(new p(t,r))}return s};return this.get(j,e).pipe(R("lists")).pipe(n).done(t)};k.prototype.combineLists=function(e,t,n){var r,i;r=Y.pick(t,"name","description");if((i=r.description)==null){r.description=""+e+" of "+t.lists.join(", ")}r.tags=(t.tags||[]).join(";");r.lists=(t.lists||[]).join(";");return this.get(c[e],r).pipe(h(this)).done(n)};k.prototype.merge=function(){return this.combineLists.apply(this,["union"].concat(nt.call(arguments)))};k.prototype.intersect=function(){return this.combineLists.apply(this,["intersection"].concat(nt.call(arguments)))};k.prototype.diff=function(){return this.combineLists.apply(this,["difference"].concat(nt.call(arguments)))};k.prototype.complement=function(e,t){var n,r,i,s,o,u,a,f,l;if(e==null){e={}}if(t==null){t=function(){}}s=e.from,i=e.exclude,u=e.name,r=e.description,l=e.tags;n=function(){return"Relative complement of "+o.join(" and ")+" in "+a.join(" and ")};a=O(s);o=O(i);if(u==null){u=n()}if(r==null){r=n()}if(l==null){l=[]}f={name:u,description:r,tags:l,lists:o,references:a};return this.post(x,f).pipe(h(this)).done(t)};k.prototype.fetchWidgets=function(e){var t=this;return S(this,8,function(){return et.call(t,"widgets",H,B,"widgets",e)})};u=$(function(e){return[e.name,e]});k.prototype.fetchWidgetMap=function(e){var t=this;return S(this,8,function(){var n;return((n=t.__wmap__)!=null?n:t.__wmap__=t.fetchWidgets().then(u)).done(e)})};k.prototype.fetchModel=function(e){return et.call(this,"model",d,v,"model").pipe(m.load).pipe(K({service:this})).done(e)};k.prototype.fetchSummaryFields=function(e){return et.call(this,"summaryFields",C,N,"classes",e)};k.prototype.fetchVersion=function(e){return et.call(this,"version",_,D,"version",e)};k.prototype.query=function(t,n){var i=this;return e.when(this.fetchModel(),this.fetchSummaryFields()).pipe(function(e,s){var o,u;o=Y.extend({},t,{model:e,summaryFields:s});u=i;return r(function(){this.fail(u.errorHandler);this.done(n);try{return this.resolve(new E(o,u))}catch(e){return this.reject(e)}})})};k.prototype.manageUserPreferences=function(e,t){var n=this;return S(this,11,function(){return n.makeRequest(e,y,t).pipe(R("preferences"))})};k.prototype.resolveIds=function(e,t){var n=this;return S(this,10,function(){var r;r={type:"POST",url:n.root+"ids",contentType:"application/json",data:JSON.stringify(e),dataType:"json"};return n.doReq(r).pipe(R("uid")).pipe(a.create(n)).done(t)})};k.prototype.createList=function(e,t,n){var r,i,s=this;if(e==null){e={}}if(t==null){t=""}if(n==null){n=function(){}}r=function(t){return Y.defaults({token:s.token,tags:e.tags||[]},t)};i={data:Y.isArray(t)?t.map(function(e){return'"'+e+'"'}).join("\n"):t,dataType:"json",url:""+this.root+"lists?"+G(r(e)),type:"POST",contentType:"text/plain"};return this.doReq(i).pipe(h(this)).done(n)};return k}();k.prototype.rowByRow=function(){var e,t,n,r=this;n=arguments[0],e=2<=arguments.length?nt.call(arguments,1):[];t=z.iterReq("POST",b,"json");if(n.toXML!=null){return t.apply(this,arguments)}else{return this.query(arguments[0]).then(function(t){return r.rowByRow.apply(r,[t].concat(nt.call(e)))})}};k.prototype.eachRow=k.prototype.rowByRow;k.prototype.recordByRecord=function(){var e,t,n,r=this;n=arguments[0],e=2<=arguments.length?nt.call(arguments,1):[];t=z.iterReq("POST",b,"jsonobjects");if(n.toXML!=null){return t.apply(this,arguments)}else{return this.query(arguments[0]).then(function(t){return r.recordByRecord.apply(r,[t].concat(nt.call(e)))})}};k.prototype.eachRecord=k.prototype.recordByRecord;k.prototype.union=k.prototype.merge;k.prototype.difference=k.prototype.diff;k.prototype.symmetricDifference=k.prototype.diff;k.prototype.relativeComplement=k.prototype.complement;k.prototype.subtract=k.prototype.complement;k.flushCaches=function(){d={};_={};C={};return H={}};k.connect=function(e){if(e==null){e={}}return new k(e)};W.Service=k}).call(this);(function(){function e(t,n,r){var i=e.resolve(t);if(null==i){r=r||t;n=n||"root";var s=new Error('Failed to require "'+r+'" from "'+n+'"');s.path=r;s.parent=n;s.require=true;throw s}var o=e.modules[i];if(!o._resolving&&!o.exports){var u={};u.exports={};u.client=u.component=true;o._resolving=true;o.call(this,u.exports,e.relative(i),u);delete o._resolving;o.exports=u.exports}return o.exports}e.modules={};e.aliases={};e.resolve=function(t){if(t.charAt(0)==="/")t=t.slice(1);var n=[t,t+".js",t+".json",t+"/index.js",t+"/index.json"];for(var r=0;r<n.length;r++){var t=n[r];if(e.modules.hasOwnProperty(t))return t;if(e.aliases.hasOwnProperty(t))return e.aliases[t]}};e.normalize=function(e,t){var n=[];if("."!=t.charAt(0))return t;e=e.split("/");t=t.split("/");for(var r=0;r<t.length;++r){if(".."==t[r]){e.pop()}else if("."!=t[r]&&""!=t[r]){n.push(t[r])}}return e.concat(n).join("/")};e.register=function(t,n){e.modules[t]=n};e.alias=function(t,n){if(!e.modules.hasOwnProperty(t)){throw new Error('Failed to alias "'+t+'", it does not exist')}e.aliases[n]=t};e.relative=function(t){function r(e,t){var n=e.length;while(n--){if(e[n]===t)return n}return-1}function i(n){var r=i.resolve(n);return e(r,t,n)}var n=e.normalize(t,"..");i.resolve=function(i){var s=i.charAt(0);if("/"==s)return i.slice(1);if("."==s)return e.normalize(n,i);var o=t.split("/");var u=r(o,"deps")+1;if(!u)u=0;i=o.slice(0,u+1).join("/")+"/deps/"+i;return i};i.exists=function(t){return e.modules.hasOwnProperty(i.resolve(t))};return i};var t=this;t.require=e=typeof t.require!=="undefined"?t.require:e;(function(){e.register("MyFirstCommonJSApp/src/main.js",function(e,t,n){var r=t("./views/appview");var i=t("./modules/helper");n.exports=function(e){var t=new r(e);if($(e.target).length!=1)throw"Not found";t.setElement($(e.target));t.render()}});e.register("MyFirstCommonJSApp/src/models/pathwaycollection.js",function(e,t,n){var r=t("./pathwaymodel");var i=Backbone.Collection.extend({model:r,add:function(e){if(!_.isArray(e)){e=[e]}_.each(e,function(e){var t=this.findWhere({slug:this.toSlug(e.name)});if(t){}else{Backbone.Collection.prototype.add.call(this,e)}},this)},comparator:function(e){return e.get("name")},toSlug:function(e){return e.toString().toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,"")}});n.exports=new i});e.register("MyFirstCommonJSApp/src/models/pathwaymodel.js",function(e,t,n){var r=t("../modules/mediator");var i=Backbone.Model.extend({initialize:function(){this.shiftPathwayIdentifier();this.set({slug:this.toSlug(this.get("name"))});this.shiftData()},defaults:function(){return{organisms:[]}},toSlug:function(e){return e.toString().toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,"")},shiftPathwayIdentifier:function(){var e=this.get("identifier");var t=this.get("objectId");_.each(this.attributes.genes,function(n){n.pwayId=e;n.pathwayId=t})},shiftData:function(){currentOrganisms=this.get("organisms");that=this;_.each(this.get("genes"),function(e){r.trigger("column:add",{taxonId:e.organism.taxonId,sName:e.organism.shortName});var t=_.findWhere(currentOrganisms,{taxonId:e.organism.taxonId});if(!t){var n=_.omit(e,"organism");_.extend(n,{url:that.attributes.url});geneArray=[n];e.organism.genes=geneArray;currentOrganisms.push(e.organism)}else{var n=_.omit(e,"organism");_.extend(n,{url:that.attributes.url});t.genes.push(n)}});this.set({organisms:currentOrganisms});this.unset("genes")},updateData:function(e){currentOrganisms=this.get("organisms");_.each(e.genes,function(t){r.trigger("column:add",{taxonId:t.organism.taxonId,sName:t.organism.shortName});var n=_.findWhere(currentOrganisms,{taxonId:t.organism.taxonId});if(!n){var i=_.omit(t,"organism");_.extend(i,{url:e.url,pathwayId:e.objectId});geneArray=[i];t.organism.genes=geneArray;currentOrganisms.push(t.organism)}else{var i=_.omit(t,"organism");_.extend(i,{url:e.url});n.genes.push(i)}});this.set({organisms:currentOrganisms});this.unset("genes")}});n.exports=i});e.register("MyFirstCommonJSApp/src/modules/globals.js",function(e,t,n){var r=[];e.columns=r});e.register("MyFirstCommonJSApp/src/modules/helper.js",function(e,t,n){function a(e){var t=1;if(e[0]==="-"){t=-1;e=e.substr(1)}return function(n,r){var i=n[e]<r[e]?-1:n[e]>r[e]?1:0;return i*t}}var r=t("../models/pathwaycollection.js");var i=function(e){var t=[];for(mine in e){t.push(s("FBgn0005558",e[mine]))}return Q.all(t)};var s=function(e,t){return Q.when(u([e],t)).then(function(e){return o(t,e,"collection")})};var o=function(e,t,n){var i,s,o,u,a,f,l;l=t.map(function(e){return'"'+e.primaryIdentifier+'"'}).join(",");i={select:["Pathway.genes.primaryIdentifier","Pathway.id","Pathway.dataSets.name","Pathway.name","Pathway.identifier","Pathway.genes.organism.shortName","Pathway.genes.organism.taxonId"],orderBy:[{"Pathway.name":"ASC"}],where:{"Pathway.genes":{LOOKUP:l}}};o=function(e){return new IM.Service({root:e})};u=function(e){return e.records(i)};makeModels=function(){return function(t){_.map(t,function(t){t.url=e});r.add(t);return t}};a=function(e){return console.log("Error from getPathwaysByGene: "+e)};return Q(o(e)).then(u).then(makeModels()).fail(a)};var u=function(e,t){IM=intermine;var n,r,i,s,o;var n={select:["Homologue.homologue.primaryIdentifier"],orderBy:[{"Homologue.homologue.primaryIdentifier":"ASC"}],where:[{path:"Homologue.gene",op:"LOOKUP",value:e}]};r=function(e){return new IM.Service({root:e})};i=function(e){return e.records(n)};returnResults=function(){return function(t){var n=t.map(function(e){return e.homologue});var r=new Object;r.primaryIdentifier=e;n.push(r);luString=n.map(function(e){return e.primaryIdentifier}).join(",");_.each(n,function(e){});return n}},s=function(e){return console.log("Error from getHomologues using url: "+t+", "+e)};return Q(r(t)).then(i).then(returnResults()).fail(s)};e.getHomologues=u;e.launchAll=i;e.dynamicSort=a});e.register("MyFirstCommonJSApp/src/modules/mediator.js",function(e,t,n){var r=_.extend({},Backbone.Events);n.exports=r});e.register("MyFirstCommonJSApp/src/templates/celltitle.js",function(e,t,n){n.exports="<%= name %>"});e.register("MyFirstCommonJSApp/src/templates/details.js",function(e,t,n){n.exports='<h2><%= pway.name %></h2>       	<h2><%= pway.organism[0].shortName %></h2>       	<h2>Intersection of Homologous Genes</h2>       	<ul class="genes">       		<% _.each(pway.organism[0].genes, function(gene) { %>       			<% console.log(gene) %>       			<li>       			<%= "<a href=http://" + gene.url + "/report.do?id=" + gene.objectId + ">" %>       				<%= gene.primaryIdentifier %>       			</a>       			</li>       		<% }) %>       	</ul>       	<h2>Data Set(s)</h2>       	<ul>       		<% _.each(pway.datasets, function(dataset) { %>       			<li>       				<%= dataset.name %>       			</li>       		<% }); %>       	</ul>'});e.register("MyFirstCommonJSApp/src/templates/detailsview.js",function(e,t,n){n.exports='<h2><%= pway.name %></h2>       	<h2><%= pway.organism[0].shortName %></h2>       	<h2>Intersection of Homologous Genes</h2>       	<ul class="genes">       		<% _.each(pway.organism[0].genes, function(gene) { %>       			<% console.log(gene) %>       			<li>       			<%= "<a href=http://" + gene.url + "/report.do?id=" + gene.objectId + ">" %>       				<%= gene.primaryIdentifier %>       			</a>       			</li>       		<% }) %>       	</ul>       	<h2>Data Set(s)</h2>       	<ul>       		<% _.each(pway.datasets, function(dataset) { %>       			<li>       				<%= dataset.name %>       			</li>       		<% }); %>       	</ul>'});e.register("MyFirstCommonJSApp/src/templates/pathwaycell.js",function(e,t,n){n.exports='<div class="circle"></div>'});e.register("MyFirstCommonJSApp/src/templates/results.js",function(e,t,n){n.exports='<table id="myTableResults"></table>'});e.register("MyFirstCommonJSApp/src/templates/shell.js",function(e,t,n){n.exports='      	<div class="pwayHeader">Cross-Species Pathway Displayer</div>       	<div class="pwayWrapper">       		<div class="headersMain"></div>       		<div class="pwayMain"></div>       			<div id="pwayResultsContainer"></div>       		<div class="dataPane"></div>       	</div>'});e.register("MyFirstCommonJSApp/src/templates/tableheaders.js",function(e,t,n){n.exports='<table id="myTableHeaders">       		<thead>      		<tr>      		<th>Pathway Name</th>      	<% _.each(columns, function(col) { %>      		<th><%= col.sName %></th>      	<% }) %>      	</tr>      	</thead>      	</table>'});e.register("MyFirstCommonJSApp/src/templates/tableheaderssanstable.js",function(e,t,n){n.exports="<thead>      		<tr>      		<th>Pathway Name</th>      	<% _.each(columns, function(col) { %>      		<th><%= col.sName %></th>      	<% }) %>      	</tr>      	</thead>"});e.register("MyFirstCommonJSApp/src/views/appview.js",function(e,t,n){var r=t("../modules/mediator");var i=t("../modules/helper");var s=t("../models/pathwaycollection");var o=t("./tableview");var u=t("./tableviewheaders");var a=t("../modules/globals");var f=Backbone.View.extend({columns:[],templateShell:t("../templates/shell"),initialize:function(e){console.log(JSON.stringify(e));var t=e.friendlyMines;console.log("friendlyMines: "+t);this.$el.html($(this.templateShell));r.on("test",this.test,this);r.on("column:add",this.addColumn,this);r.on("stats:show",this.showStats,this);r.on("table:show",this.showTable,this);r.on("stats:hide",this.hideStats,this);Q.when(i.launchAll(t)).then(function(e){return console.log(e)}).then(function(){r.trigger("table:show",{})})},test:function(){console.log("test function trigger")},render:function(){var e=_.template(this.templateShell,{});this.$el.html(e);return this},showTable:function(){console.log("showTable has been called");var e=new o({collection:s});var t=new u({collection:s});console.log("foundDIV: "+this.$("#pwayResultsContainer").append("<p>HELLO</p>"));this.$(".pwayMain").append(t.render().el);this.$(".pwayMain").append(e.render().el);$("#pwayResultsId th").each(function(e,t){$("#myTableHeaders th:eq("+e+")").width($(this).width())})},showStats:function(e){var n=_.where(e.aModel.get("organisms"),{taxonId:e.taxonId});var r=e.aModel.get("dataSets");var i={name:e.aModel.get("name"),organism:n,datasets:e.aModel.get("dataSets")};var s=t("../templates/details");var o=_.template(s,{pway:i});this.$el.find(".dataPane").html(o);this.$el.find(".dataPane").addClass("active")},addColumn:function(e){var t=_.where(a.columns,{taxonId:e.taxonId});if(t.length<1){a.columns.push(e);a.columns.sort(i.dynamicSort("sName"))}},hideStats:function(){console.log("hiding stats");this.$(".dataPane").removeClass("active")}});n.exports=f});e.register("MyFirstCommonJSApp/src/views/celltitleview.js",function(e,t,n){var r=t("../modules/mediator");var i=t("../templates/celltitle.js");var s=Backbone.View.extend({tagName:"td",events:{click:"openMe"},initialize:function(e){this.options=e||{}},openMe:function(){r.trigger("stats:hide",{taxonId:this.options.taxonId,aModel:this.model})},render:function(){var e=_.template(i,{name:this.model.get("name")});this.$el.append(e);return this.$el}});n.exports=s});e.register("MyFirstCommonJSApp/src/views/pathwaycellview.js",function(e,t,n){var r=t("../modules/mediator");var i=t("../templates/pathwaycell");var s=Backbone.View.extend({tagName:"td",events:{click:"openMe"},initialize:function(e){this.options=e||{}},openMe:function(){r.trigger("stats:show",{taxonId:this.options.taxonId,aModel:this.model});console.log("Cell Click Detected")},render:function(){var e=_.template(i,{});console.log("cellTemplate: ",e);this.$el.html(e);return this.$el},showMessage:function(){this.$el.html("<div>Test</div>")}});n.exports=s});e.register("MyFirstCommonJSApp/src/views/pathwayview.js",function(e,t,n){var r=t("./pathwaycellview");var i=t("./celltitleview");var s=t("../modules/globals");var o=Backbone.View.extend({tagName:"tr",initialize:function(){},events:{click:"open"},open:function(){console.log("Row Click Detected")},render:function(){var e=this.model.get("organisms");var t;var n=new i({model:this.model});this.$el.append(n.render());_.each(s.columns,function(n){t=_.where(e,{taxonId:n.taxonId});if(t!=null&&t!=""&&t.length>0){var i=new r({model:this.model,taxonId:n.taxonId});this.$el.append(i.render())}else{this.$el.append("<td></td>")}},this);return this}});n.exports=o});e.register("MyFirstCommonJSApp/src/views/tableview.js",function(e,t,n){var r=t("../modules/mediator");var i=t("../models/pathwaycollection.js");var s=t("../templates/tableheaders");var o=t("../templates/tableheaderssanstable");var u=t("./pathwayview");var a=t("../modules/globals");var f=Backbone.View.extend({tagName:"table",className:"pwayResults",id:"pwayResultsId",initialize:function(){_.bindAll(this,"render","renderOne");console.log("table view initialized")},render:function(){var e=_.template(o,{columns:a.columns});this.$el.append(e);this.collection.each(this.renderOne);console.log("from table view: "+this.$el.html());return this},renderOne:function(e){var t=new u({model:e});this.$el.append(t.render().$el);return this}});n.exports=f});e.register("MyFirstCommonJSApp/src/views/tableviewheaders.js",function(e,t,n){var r=t("../modules/mediator");var i=t("../models/pathwaycollection.js");var s=t("../templates/tableheaders");var o=t("./pathwayview");var u=t("../modules/globals");var a=Backbone.View.extend({tagName:"div",className:"pwayHeaders",initialize:function(){console.log("table view initialized")},render:function(){var e=_.template(s,{columns:u.columns});console.log("compiledTemplate: "+e);this.$el.append(e);return this}});n.exports=a})})();var n=e("MyFirstCommonJSApp/src/main.js");if(typeof define!=="undefined"&&define.amd){define("MyFirstCommonJSApp",[],function(){return n})}else if(typeof module!=="undefined"&&module.exports){module.exports=n}else{t["MyFirstCommonJSApp"]=n}e.alias("MyFirstCommonJSApp/src/main.js","MyFirstCommonJSApp/index.js")})()